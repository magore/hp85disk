<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>HP85 GPIB Disk Emulator: lif/td02lif.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">HP85 GPIB Disk Emulator
   &#160;<span id="projectnumber">1.0</span>
   </div>
   <div id="projectbrief">HP85GPIBDiskEmulator</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d0df06b98878d1ea853460381a116f79.html">lif</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">td02lif.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>TeleDisk decoder library targetting LIF format images only.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;string.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;inttypes.h&gt;</code><br />
<code>#include &lt;<a class="el" href="time_8h_source.html">time.h</a>&gt;</code><br />
<code>#include &quot;<a class="el" href="lifsup_8h_source.html">lifsup.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="lifutils_8h_source.html">lifutils.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="td02lif_8h_source.html">td02lif.h</a>&quot;</code><br />
<code>#include &quot;td0_lzss.h&quot;</code><br />
</div>
<p><a href="td02lif_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a038d4e9f86f76569a97e443e376a8e11"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="td02lif_8c.html#a038d4e9f86f76569a97e443e376a8e11">td0_unpack_disk_header</a> (uint8_t *B, <a class="el" href="structtd__header__t.html">td_header_t</a> *p)</td></tr>
<tr class="memdesc:a038d4e9f86f76569a97e443e376a8e11"><td class="mdescLeft">&#160;</td><td class="mdescRight">Extract TeleDisk image header data in architecture nutral way.  <a href="#a038d4e9f86f76569a97e443e376a8e11">More...</a><br /></td></tr>
<tr class="separator:a038d4e9f86f76569a97e443e376a8e11"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa2721b8d8bba4008a2b48d1b362b9850"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="td02lif_8c.html#aa2721b8d8bba4008a2b48d1b362b9850">td0_unpack_comment_header</a> (uint8_t *B, <a class="el" href="structtd__comment__t.html">td_comment_t</a> *p)</td></tr>
<tr class="memdesc:aa2721b8d8bba4008a2b48d1b362b9850"><td class="mdescLeft">&#160;</td><td class="mdescRight">Extract TeleDisk comment header data in architecture nutral way.  <a href="#aa2721b8d8bba4008a2b48d1b362b9850">More...</a><br /></td></tr>
<tr class="separator:aa2721b8d8bba4008a2b48d1b362b9850"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab9cc29346498d37ff85d3a3417d8fc11"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="td02lif_8c.html#ab9cc29346498d37ff85d3a3417d8fc11">td0_unpack_track_header</a> (uint8_t *B, <a class="el" href="structtd__track__t.html">td_track_t</a> *p)</td></tr>
<tr class="memdesc:ab9cc29346498d37ff85d3a3417d8fc11"><td class="mdescLeft">&#160;</td><td class="mdescRight">Extract TeleDisk track header data in architecture nutral way.  <a href="#ab9cc29346498d37ff85d3a3417d8fc11">More...</a><br /></td></tr>
<tr class="separator:ab9cc29346498d37ff85d3a3417d8fc11"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac393151af482d511b246de534da58e6f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="td02lif_8c.html#ac393151af482d511b246de534da58e6f">td0_unpack_sector_header</a> (uint8_t *B, <a class="el" href="structtd__sector__t.html">td_sector_t</a> *p)</td></tr>
<tr class="memdesc:ac393151af482d511b246de534da58e6f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Extract TeleDisk sector header data in architecture nutral way.  <a href="#ac393151af482d511b246de534da58e6f">More...</a><br /></td></tr>
<tr class="separator:ac393151af482d511b246de534da58e6f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a37a47298b833b16f03857809714f1d1d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="td02lif_8c.html#a37a47298b833b16f03857809714f1d1d">td0_enable_decompress</a> (int flag)</td></tr>
<tr class="memdesc:a37a47298b833b16f03857809714f1d1d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enable TeleDisk image decompression.  <a href="#a37a47298b833b16f03857809714f1d1d">More...</a><br /></td></tr>
<tr class="separator:a37a47298b833b16f03857809714f1d1d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad3adf37fc95dc0874606f364a4ce7e21"><td class="memItemLeft" align="right" valign="top">long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="td02lif_8c.html#ad3adf37fc95dc0874606f364a4ce7e21">td0_read</a> (void *p, int osize, int size, <a class="el" href="posix_8h.html#aed4dabeb9f7c518ded42f930a04abce8">FILE</a> *fp)</td></tr>
<tr class="memdesc:ad3adf37fc95dc0874606f364a4ce7e21"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read TeleDisk image data block Optionally decompress the data if decompression is enabled.  <a href="#ad3adf37fc95dc0874606f364a4ce7e21">More...</a><br /></td></tr>
<tr class="separator:ad3adf37fc95dc0874606f364a4ce7e21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a626504ce2f4e7747628f091fea9a81e8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="td02lif_8c.html#a626504ce2f4e7747628f091fea9a81e8">td0_init_trackdata</a> (int freemem)</td></tr>
<tr class="memdesc:a626504ce2f4e7747628f091fea9a81e8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize track sector information Optionally decompress the data if decompression is enabled.  <a href="#a626504ce2f4e7747628f091fea9a81e8">More...</a><br /></td></tr>
<tr class="separator:a626504ce2f4e7747628f091fea9a81e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f9b8f09a74778aafcef0ccfcf7e73e6"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="td02lif_8c.html#a7f9b8f09a74778aafcef0ccfcf7e73e6">td0_rle</a> (uint8_t *<a class="el" href="time_8c.html#a5a388b2bb2a2a9914c7d68ed3d09f7e9">dst</a>, uint8_t *src, int max)</td></tr>
<tr class="memdesc:a7f9b8f09a74778aafcef0ccfcf7e73e6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Expand a Run Length encoded TeleDisk sector Notes: the source length is encoded in the source data Credits based on work (C) 2006-2014 Jean-François DEL NERO Part of the HxCFloppyEmulator library GNU GPL version 2 or later Rewitten for clarity,to enforce size limits, provide error reporting and to avoid word order dependent assumptions,.  <a href="#a7f9b8f09a74778aafcef0ccfcf7e73e6">More...</a><br /></td></tr>
<tr class="separator:a7f9b8f09a74778aafcef0ccfcf7e73e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a77bf211d16286c7ae97ecc75d0ddd50b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="td02lif_8c.html#a77bf211d16286c7ae97ecc75d0ddd50b">td0_track</a> (int index)</td></tr>
<tr class="memdesc:a77bf211d16286c7ae97ecc75d0ddd50b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Display TeleDisk track sector values.  <a href="#a77bf211d16286c7ae97ecc75d0ddd50b">More...</a><br /></td></tr>
<tr class="separator:a77bf211d16286c7ae97ecc75d0ddd50b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aba782c58c559984d2a456208edf9864b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="td02lif_8c.html#aba782c58c559984d2a456208edf9864b">td0_sector</a> (<a class="el" href="structtd__sector__t.html">td_sector_t</a> *P)</td></tr>
<tr class="memdesc:aba782c58c559984d2a456208edf9864b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Display TeleDisk sector data.  <a href="#aba782c58c559984d2a456208edf9864b">More...</a><br /></td></tr>
<tr class="separator:aba782c58c559984d2a456208edf9864b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a48825de35a808127b9c304a764a48439"><td class="memItemLeft" align="right" valign="top">long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="td02lif_8c.html#a48825de35a808127b9c304a764a48439">td0_density2bitrate</a> (uint8_t density)</td></tr>
<tr class="memdesc:a48825de35a808127b9c304a764a48439"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert Denisity to bitrate  don't care about the density except as a possible filter.  <a href="#a48825de35a808127b9c304a764a48439">More...</a><br /></td></tr>
<tr class="separator:a48825de35a808127b9c304a764a48439"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a82346ed45d0b49999c4ef54b90a59b07"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="td02lif_8c.html#a82346ed45d0b49999c4ef54b90a59b07">td0_read_image</a> (char *imgfile, <a class="el" href="structlif__t.html">lif_t</a> *LIF)</td></tr>
<tr class="memdesc:a82346ed45d0b49999c4ef54b90a59b07"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read TeleDisk image file and call LIF converter.  <a href="#a82346ed45d0b49999c4ef54b90a59b07">More...</a><br /></td></tr>
<tr class="separator:a82346ed45d0b49999c4ef54b90a59b07"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ab31664441afebf11648c13b65cfad5"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="td02lif_8c.html#a0ab31664441afebf11648c13b65cfad5">td02lif_sector</a> (uint8_t *data, int size, <a class="el" href="structlif__t.html">lif_t</a> *LIF)</td></tr>
<tr class="memdesc:a0ab31664441afebf11648c13b65cfad5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Process all sectors on a track from TeleDisk image.  <a href="#a0ab31664441afebf11648c13b65cfad5">More...</a><br /></td></tr>
<tr class="separator:a0ab31664441afebf11648c13b65cfad5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a26d4f0afc5df75f388d93a9510ab39ee"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="td02lif_8c.html#a26d4f0afc5df75f388d93a9510ab39ee">td0_help</a> (int full)</td></tr>
<tr class="separator:a26d4f0afc5df75f388d93a9510ab39ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a768caca68199c490335ee088781e7bba"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="td02lif_8c.html#a768caca68199c490335ee088781e7bba">td02lif</a> (int argc, char *argv[])</td></tr>
<tr class="memdesc:a768caca68199c490335ee088781e7bba"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert a Teledisk LIF formatted disk image into a pure LIF image.  <a href="#a768caca68199c490335ee088781e7bba">More...</a><br /></td></tr>
<tr class="separator:a768caca68199c490335ee088781e7bba"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a4f9ac71c0f95ded3735b782546f8a233"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structtrack__data__t.html">track_data_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="td02lif_8c.html#a4f9ac71c0f95ded3735b782546f8a233">trackdata</a> [<a class="el" href="td02lif_8h.html#a88c30c1e70576397f9e74bce80cfa164">MAXSECTOR</a>]</td></tr>
<tr class="memdesc:a4f9ac71c0f95ded3735b782546f8a233"><td class="mdescLeft">&#160;</td><td class="mdescRight">Dave Dunfiled LZSS expander.  <a href="#a4f9ac71c0f95ded3735b782546f8a233">More...</a><br /></td></tr>
<tr class="separator:a4f9ac71c0f95ded3735b782546f8a233"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af2b2b3e4827acc662c88bb762e41106d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structliftel__t.html">liftel_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="td02lif_8c.html#af2b2b3e4827acc662c88bb762e41106d">liftel</a></td></tr>
<tr class="memdesc:af2b2b3e4827acc662c88bb762e41106d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Teledisk to LIF state.  <a href="#af2b2b3e4827acc662c88bb762e41106d">More...</a><br /></td></tr>
<tr class="separator:af2b2b3e4827acc662c88bb762e41106d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a89975ebcdec4539e9562b6f25a33e7d9"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="td02lif_8c.html#a89975ebcdec4539e9562b6f25a33e7d9">decompress</a> = 0</td></tr>
<tr class="memdesc:a89975ebcdec4539e9562b6f25a33e7d9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Teledisk LZSS decompression flag.  <a href="#a89975ebcdec4539e9562b6f25a33e7d9">More...</a><br /></td></tr>
<tr class="separator:a89975ebcdec4539e9562b6f25a33e7d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>TeleDisk decoder library targetting LIF format images only. </p>
<dl class="section user"><dt>Copyright &copy; 2014-2017 Mike Gore, Inc. All rights reserved. GPL</dt><dd></dd></dl>
<dl class="section see"><dt>See also</dt><dd><a href="http://github.com/magore/hp85disk">http://github.com/magore/hp85disk</a> </dd>
<dd>
<a href="http://github.com/magore/hp85disk/COPYRIGHT.md">http://github.com/magore/hp85disk/COPYRIGHT.md</a> for Copyright details</dd></dl>
<p>LIF command help lif td02lif image.td0 image.lif Convert TeleDisk encoded LIF disk image into to pure LIF image TELEDISK command help td02lif file.td0 file.lif Convert TeleDisk encoded LIF disk image into to pure LIF image</p>
<dl class="section user"><dt>Edit History</dt><dd><ul>
<li>[1.0] [Mike Gore] Initial revision of file.</li>
</ul>
</dd></dl>
<p>lif/teledisk My TELEDISK LIF extracter Note: The TeleDisk image MUST contain a LIF image - we do NOT translate it README.txt Credits Important Contributions (My converted would not have been possible without these) Dave Dunfield, LZSS Code and TeleDisk documentation Copyright 2007-2008 Dave Dunfield All rights reserved. td0_lzss.h td0_lzss.c LZSS decoder td0notes.txt Teledisk Documentation Jean-Franois DEL NERO, TeleDisk Documentation Copyright (C) 2006-2014 Jean-Franois DEL NERO wteledsk.htm TeleDisk documenation See his github project <a href="https://github.com/jfdelnero/libhxcfe">https://github.com/jfdelnero/libhxcfe</a> </p>

<p>Definition in file <a class="el" href="td02lif_8c_source.html">td02lif.c</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a768caca68199c490335ee088781e7bba"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int td02lif </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>argv</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Convert a Teledisk LIF formatted disk image into a pure LIF image. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">telediskname</td><td>TELEDISK image name </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">lifname</td><td>LIF file name to write </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>1 on success, 0 on error </dd></dl>
<p>Write LIF file</p>
<p>LIF summary</p>
<p>Close LIF file </p>

<p>Definition at line <a class="el" href="td02lif_8c_source.html#l01268">1268</a> of file <a class="el" href="td02lif_8c_source.html">td02lif.c</a>.</p>

<p>Referenced by <a class="el" href="lifutils_8c_source.html#l00134">lif_tests()</a>.</p>

</div>
</div>
<a class="anchor" id="a0ab31664441afebf11648c13b65cfad5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int td02lif_sector </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structlif__t.html">lif_t</a> *&#160;</td>
          <td class="paramname"><em>LIF</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Process all sectors on a track from TeleDisk image. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">data</td><td>sector data </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">size</td><td>sector size </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">LIF</td><td>LIF structure  1 if OK, 0 on error </td></tr>
  </table>
  </dd>
</dl>
<p>==================================================== Write sectors from Teledisk track to LIF file </p><h1>We continue until the last last file sector </h1>

<p>Definition at line <a class="el" href="td02lif_8c_source.html#l01051">1051</a> of file <a class="el" href="td02lif_8c_source.html">td02lif.c</a>.</p>

<p>Referenced by <a class="el" href="td02lif_8c_source.html#l00421">td0_read_image()</a>.</p>

</div>
</div>
<a class="anchor" id="a48825de35a808127b9c304a764a48439"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long td0_density2bitrate </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>density</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Convert Denisity to bitrate  don't care about the density except as a possible filter. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">Density</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>bitrate </dd></dl>

<p>Definition at line <a class="el" href="td02lif_8c_source.html#l00397">397</a> of file <a class="el" href="td02lif_8c_source.html">td02lif.c</a>.</p>

<p>Referenced by <a class="el" href="td02lif_8c_source.html#l00421">td0_read_image()</a>.</p>

</div>
</div>
<a class="anchor" id="a37a47298b833b16f03857809714f1d1d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void td0_enable_decompress </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flag</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enable TeleDisk image decompression. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">flag</td><td>decompression enable </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void </dd></dl>

<p>Definition at line <a class="el" href="td02lif_8c_source.html#l00161">161</a> of file <a class="el" href="td02lif_8c_source.html">td02lif.c</a>.</p>

<p>Referenced by <a class="el" href="td02lif_8c_source.html#l00421">td0_read_image()</a>.</p>

</div>
</div>
<a class="anchor" id="a26d4f0afc5df75f388d93a9510ab39ee"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void td0_help </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>full</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="td02lif_8c_source.html#l01243">1243</a> of file <a class="el" href="td02lif_8c_source.html">td02lif.c</a>.</p>

<p>Referenced by <a class="el" href="lifutils_8c_source.html#l00134">lif_tests()</a>, and <a class="el" href="td02lif_8c_source.html#l01268">td02lif()</a>.</p>

</div>
</div>
<a class="anchor" id="a626504ce2f4e7747628f091fea9a81e8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void td0_init_trackdata </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>freemem</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize track sector information Optionally decompress the data if decompression is enabled. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">p</td><td>data buffer for read </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">osize</td><td>size of object </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">size</td><td>number of objects to read </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>size of dataactually read </dd></dl>

<p>Definition at line <a class="el" href="td02lif_8c_source.html#l00206">206</a> of file <a class="el" href="td02lif_8c_source.html">td02lif.c</a>.</p>

<p>Referenced by <a class="el" href="td02lif_8c_source.html#l00421">td0_read_image()</a>.</p>

</div>
</div>
<a class="anchor" id="ad3adf37fc95dc0874606f364a4ce7e21"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long td0_read </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>osize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="posix_8h.html#aed4dabeb9f7c518ded42f930a04abce8">FILE</a> *&#160;</td>
          <td class="paramname"><em>fp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read TeleDisk image data block Optionally decompress the data if decompression is enabled. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">p</td><td>data buffer for read </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">osize</td><td>size of object </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">size</td><td>number of objects to read </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>size of dataactually read </dd></dl>

<p>Definition at line <a class="el" href="td02lif_8c_source.html#l00174">174</a> of file <a class="el" href="td02lif_8c_source.html">td02lif.c</a>.</p>

<p>Referenced by <a class="el" href="td02lif_8c_source.html#l00421">td0_read_image()</a>.</p>

</div>
</div>
<a class="anchor" id="a82346ed45d0b49999c4ef54b90a59b07"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int td0_read_image </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>imgfile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structlif__t.html">lif_t</a> *&#160;</td>
          <td class="paramname"><em>LIF</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read TeleDisk image file and call LIF converter. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">imagefile</td><td>TD0 image file </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">data</td><td>LIF data structure pointer </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>1 on success 0 on error </dd></dl>
<p>TeleDisk disk image header</p>
<p>we expect "TD" (uncompressed) or "td" (compressed) format</p>
<p>We only accept TeleDisk versions &gt;= 10 &amp;&amp; version &lt;= 21</p>
<p>Do we have a Comment Block ? bit 7 of TrackDensity is set</p>
<p>Time to Unix format</p>
<p>Process all image Data</p>
<p>EOF? TeleDisk specification says EOF is 255 sectors</p>
<p>Process all track sectors</p>
<p>Sector Header</p>
<p>first test verifies sector &lt; 2K in size second test verifies no data or address mark errors</p>
<p>Compute how much data to read</p>
<p>td0_rle does not use len internal data in the buffer does this We limit the expansion to sector size</p>
<p>Done processing track sectors </p><hr/>
<hr/>

<p>Definition at line <a class="el" href="td02lif_8c_source.html#l00421">421</a> of file <a class="el" href="td02lif_8c_source.html">td02lif.c</a>.</p>

<p>Referenced by <a class="el" href="td02lif_8c_source.html#l01268">td02lif()</a>.</p>

</div>
</div>
<a class="anchor" id="a7f9b8f09a74778aafcef0ccfcf7e73e6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int td0_rle </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>dst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>src</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>max</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Expand a Run Length encoded TeleDisk sector Notes: the source length is encoded in the source data Credits based on work (C) 2006-2014 Jean-François DEL NERO Part of the HxCFloppyEmulator library GNU GPL version 2 or later Rewitten for clarity,to enforce size limits, provide error reporting and to avoid word order dependent assumptions,. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">dst</td><td>destination expanded data </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">src</td><td>source data </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">max</td><td>maximum size of destination data </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>size of expanded data, negative if size &gt; max </dd></dl>
<p>length</p>
<p>block size</p>
<p>repeat count </p>

<p>Definition at line <a class="el" href="td02lif_8c_source.html#l00235">235</a> of file <a class="el" href="td02lif_8c_source.html">td02lif.c</a>.</p>

<p>Referenced by <a class="el" href="td02lif_8c_source.html#l00421">td0_read_image()</a>.</p>

</div>
</div>
<a class="anchor" id="aba782c58c559984d2a456208edf9864b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void td0_sector </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtd__sector__t.html">td_sector_t</a> *&#160;</td>
          <td class="paramname"><em>P</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Display TeleDisk sector data. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">P</td><td>td_sector pointer </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void </dd></dl>

<p>Definition at line <a class="el" href="td02lif_8c_source.html#l00383">383</a> of file <a class="el" href="td02lif_8c_source.html">td02lif.c</a>.</p>

<p>Referenced by <a class="el" href="td02lif_8c_source.html#l00421">td0_read_image()</a>.</p>

</div>
</div>
<a class="anchor" id="a77bf211d16286c7ae97ecc75d0ddd50b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void td0_track </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>index</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Display TeleDisk track sector values. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">trackdata</td><td>track sector structure </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">index</td><td>sector index (not sector number) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void </dd></dl>

<p>Definition at line <a class="el" href="td02lif_8c_source.html#l00370">370</a> of file <a class="el" href="td02lif_8c_source.html">td02lif.c</a>.</p>

<p>Referenced by <a class="el" href="td02lif_8c_source.html#l00421">td0_read_image()</a>.</p>

</div>
</div>
<a class="anchor" id="aa2721b8d8bba4008a2b48d1b362b9850"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int td0_unpack_comment_header </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>B</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structtd__comment__t.html">td_comment_t</a> *&#160;</td>
          <td class="paramname"><em>p</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Extract TeleDisk comment header data in architecture nutral way. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">B</td><td>source data </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">p</td><td>TeleDisk comment header structure </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>TeleDisk comment header size (not structure size) </dd></dl>

<p>Definition at line <a class="el" href="td02lif_8c_source.html#l00095">95</a> of file <a class="el" href="td02lif_8c_source.html">td02lif.c</a>.</p>

<p>Referenced by <a class="el" href="td02lif_8c_source.html#l00421">td0_read_image()</a>.</p>

</div>
</div>
<a class="anchor" id="a038d4e9f86f76569a97e443e376a8e11"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int td0_unpack_disk_header </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>B</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structtd__header__t.html">td_header_t</a> *&#160;</td>
          <td class="paramname"><em>p</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Extract TeleDisk image header data in architecture nutral way. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">B</td><td>source data </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">p</td><td>TeleDisk image header structure </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>TeleDisk image header size (not structure size) </dd></dl>

<p>Definition at line <a class="el" href="td02lif_8c_source.html#l00069">69</a> of file <a class="el" href="td02lif_8c_source.html">td02lif.c</a>.</p>

<p>Referenced by <a class="el" href="td02lif_8c_source.html#l00421">td0_read_image()</a>.</p>

</div>
</div>
<a class="anchor" id="ac393151af482d511b246de534da58e6f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int td0_unpack_sector_header </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>B</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structtd__sector__t.html">td_sector_t</a> *&#160;</td>
          <td class="paramname"><em>p</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Extract TeleDisk sector header data in architecture nutral way. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">B</td><td>source data </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">p</td><td>TeleDisk sector header structure </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>TeleDisk sector header size (not structure size) </dd></dl>

<p>Definition at line <a class="el" href="td02lif_8c_source.html#l00144">144</a> of file <a class="el" href="td02lif_8c_source.html">td02lif.c</a>.</p>

<p>Referenced by <a class="el" href="td02lif_8c_source.html#l00421">td0_read_image()</a>.</p>

</div>
</div>
<a class="anchor" id="ab9cc29346498d37ff85d3a3417d8fc11"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int td0_unpack_track_header </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>B</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structtd__track__t.html">td_track_t</a> *&#160;</td>
          <td class="paramname"><em>p</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Extract TeleDisk track header data in architecture nutral way. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">B</td><td>source data </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">p</td><td>TeleDisk track header structure </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>TeleDisk track header size (not structure size) </dd></dl>

<p>Definition at line <a class="el" href="td02lif_8c_source.html#l00117">117</a> of file <a class="el" href="td02lif_8c_source.html">td02lif.c</a>.</p>

<p>Referenced by <a class="el" href="td02lif_8c_source.html#l00421">td0_read_image()</a>.</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="a89975ebcdec4539e9562b6f25a33e7d9"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int decompress = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Teledisk LZSS decompression flag. </p>

<p>Definition at line <a class="el" href="td02lif_8c_source.html#l00063">63</a> of file <a class="el" href="td02lif_8c_source.html">td02lif.c</a>.</p>

<p>Referenced by <a class="el" href="td02lif_8c_source.html#l00161">td0_enable_decompress()</a>, and <a class="el" href="td02lif_8c_source.html#l00174">td0_read()</a>.</p>

</div>
</div>
<a class="anchor" id="af2b2b3e4827acc662c88bb762e41106d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structliftel__t.html">liftel_t</a> liftel</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Teledisk to LIF state. </p>

<p>Definition at line <a class="el" href="td02lif_8c_source.html#l00060">60</a> of file <a class="el" href="td02lif_8c_source.html">td02lif.c</a>.</p>

</div>
</div>
<a class="anchor" id="a4f9ac71c0f95ded3735b782546f8a233"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structtrack__data__t.html">track_data_t</a> trackdata[<a class="el" href="td02lif_8h.html#a88c30c1e70576397f9e74bce80cfa164">MAXSECTOR</a>]</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Dave Dunfiled LZSS expander. </p>
<p>Sectors decoded in this current track </p>

<p>Definition at line <a class="el" href="td02lif_8c_source.html#l00057">57</a> of file <a class="el" href="td02lif_8c_source.html">td02lif.c</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Aug 18 2017 22:00:52 for HP85 GPIB Disk Emulator by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
