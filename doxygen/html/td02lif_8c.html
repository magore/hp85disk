<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>HP85 GPIB Disk Emulator: lif/td02lif.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">HP85 GPIB Disk Emulator
   &#160;<span id="projectnumber">1.0</span>
   </div>
   <div id="projectbrief">HP85GPIBDiskEmulator</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d0df06b98878d1ea853460381a116f79.html">lif</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">td02lif.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>TeleDisk decoder library targetting LIF format images only.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;string.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;inttypes.h&gt;</code><br />
<code>#include &lt;<a class="el" href="time_8h_source.html">time.h</a>&gt;</code><br />
<code>#include &quot;<a class="el" href="lif_2user__config_8h_source.html">user_config.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="lifsup_8h_source.html">lifsup.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="lifutils_8h_source.html">lifutils.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="td02lif_8h_source.html">td02lif.h</a>&quot;</code><br />
<code>#include &quot;td0_lzss.h&quot;</code><br />
</div>
<p><a href="td02lif_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a369d6a9b15ee337cfb9e998b3e914f9c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="td02lif_8c.html#a369d6a9b15ee337cfb9e998b3e914f9c">td0_B2S</a> (uint8_t *B, int index, uint8_t *name, int size)</td></tr>
<tr class="memdesc:a369d6a9b15ee337cfb9e998b3e914f9c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a string from data that has no EOS but known size.  <a href="td02lif_8c.html#a369d6a9b15ee337cfb9e998b3e914f9c">More...</a><br /></td></tr>
<tr class="separator:a369d6a9b15ee337cfb9e998b3e914f9c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e9e20346b224655b6586eb34efe1b5f"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="td02lif_8c.html#a1e9e20346b224655b6586eb34efe1b5f">td0_crc16</a> (uint8_t *B, uint16_t crc, uint16_t poly, int size)</td></tr>
<tr class="memdesc:a1e9e20346b224655b6586eb34efe1b5f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compute CRC16 of 8bit data.  <a href="td02lif_8c.html#a1e9e20346b224655b6586eb34efe1b5f">More...</a><br /></td></tr>
<tr class="separator:a1e9e20346b224655b6586eb34efe1b5f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d01fdafef7fb089054149fd0c04c75f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="td02lif_8c.html#a4d01fdafef7fb089054149fd0c04c75f">td0_hexdump</a> (uint8_t *data, int size)</td></tr>
<tr class="memdesc:a4d01fdafef7fb089054149fd0c04c75f"><td class="mdescLeft">&#160;</td><td class="mdescRight">hex listing of data  <a href="td02lif_8c.html#a4d01fdafef7fb089054149fd0c04c75f">More...</a><br /></td></tr>
<tr class="separator:a4d01fdafef7fb089054149fd0c04c75f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a038d4e9f86f76569a97e443e376a8e11"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="td02lif_8c.html#a038d4e9f86f76569a97e443e376a8e11">td0_unpack_disk_header</a> (uint8_t *B, <a class="el" href="structtd__header__t.html">td_header_t</a> *p)</td></tr>
<tr class="memdesc:a038d4e9f86f76569a97e443e376a8e11"><td class="mdescLeft">&#160;</td><td class="mdescRight">Extract TeleDisk image header data in architecture nutral way.  <a href="td02lif_8c.html#a038d4e9f86f76569a97e443e376a8e11">More...</a><br /></td></tr>
<tr class="separator:a038d4e9f86f76569a97e443e376a8e11"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa2721b8d8bba4008a2b48d1b362b9850"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="td02lif_8c.html#aa2721b8d8bba4008a2b48d1b362b9850">td0_unpack_comment_header</a> (uint8_t *B, <a class="el" href="structtd__comment__t.html">td_comment_t</a> *p)</td></tr>
<tr class="memdesc:aa2721b8d8bba4008a2b48d1b362b9850"><td class="mdescLeft">&#160;</td><td class="mdescRight">Extract TeleDisk comment header data in architecture nutral way.  <a href="td02lif_8c.html#aa2721b8d8bba4008a2b48d1b362b9850">More...</a><br /></td></tr>
<tr class="separator:aa2721b8d8bba4008a2b48d1b362b9850"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab9cc29346498d37ff85d3a3417d8fc11"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="td02lif_8c.html#ab9cc29346498d37ff85d3a3417d8fc11">td0_unpack_track_header</a> (uint8_t *B, <a class="el" href="structtd__track__t.html">td_track_t</a> *p)</td></tr>
<tr class="memdesc:ab9cc29346498d37ff85d3a3417d8fc11"><td class="mdescLeft">&#160;</td><td class="mdescRight">Extract TeleDisk track header data in architecture nutral way.  <a href="td02lif_8c.html#ab9cc29346498d37ff85d3a3417d8fc11">More...</a><br /></td></tr>
<tr class="separator:ab9cc29346498d37ff85d3a3417d8fc11"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac393151af482d511b246de534da58e6f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="td02lif_8c.html#ac393151af482d511b246de534da58e6f">td0_unpack_sector_header</a> (uint8_t *B, <a class="el" href="structtd__sector__t.html">td_sector_t</a> *p)</td></tr>
<tr class="memdesc:ac393151af482d511b246de534da58e6f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Extract TeleDisk sector header data in architecture nutral way.  <a href="td02lif_8c.html#ac393151af482d511b246de534da58e6f">More...</a><br /></td></tr>
<tr class="separator:ac393151af482d511b246de534da58e6f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a786b280e1ac85ba19bcb2f4ca0d21ee3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="td02lif_8c.html#a786b280e1ac85ba19bcb2f4ca0d21ee3">td0_compressed</a> (int flag)</td></tr>
<tr class="memdesc:a786b280e1ac85ba19bcb2f4ca0d21ee3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enable TeleDisk image compression mode.  <a href="td02lif_8c.html#a786b280e1ac85ba19bcb2f4ca0d21ee3">More...</a><br /></td></tr>
<tr class="separator:a786b280e1ac85ba19bcb2f4ca0d21ee3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3f65dd34ac6cf2ee2ab6d5a913b0e457"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="td02lif_8c.html#a3f65dd34ac6cf2ee2ab6d5a913b0e457">td0_read</a> (void *p, int osize, int size, <a class="el" href="posix_8h.html#aed4dabeb9f7c518ded42f930a04abce8">FILE</a> *fp)</td></tr>
<tr class="memdesc:a3f65dd34ac6cf2ee2ab6d5a913b0e457"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read TeleDisk image data block Optionally decompress the data if decompression is enabled.  <a href="td02lif_8c.html#a3f65dd34ac6cf2ee2ab6d5a913b0e457">More...</a><br /></td></tr>
<tr class="separator:a3f65dd34ac6cf2ee2ab6d5a913b0e457"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f9b8f09a74778aafcef0ccfcf7e73e6"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="td02lif_8c.html#a7f9b8f09a74778aafcef0ccfcf7e73e6">td0_rle</a> (uint8_t *<a class="el" href="time_8c.html#a5a388b2bb2a2a9914c7d68ed3d09f7e9">dst</a>, uint8_t *src, int max)</td></tr>
<tr class="memdesc:a7f9b8f09a74778aafcef0ccfcf7e73e6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Expand a Run Length encoded TeleDisk sector Notes: the source length is encoded in the source data Credits based on work (C) 2006-2014 Jean-François DEL NERO Part of the HxCFloppyEmulator library GNU GPL version 2 or later Rewitten for clarity,to enforce size limits, provide error reporting and to avoid word order dependent assumptions,.  <a href="td02lif_8c.html#a7f9b8f09a74778aafcef0ccfcf7e73e6">More...</a><br /></td></tr>
<tr class="separator:a7f9b8f09a74778aafcef0ccfcf7e73e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab14f2a074ca85e1b32cc26f3369c574f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="td02lif_8c.html#ab14f2a074ca85e1b32cc26f3369c574f">td0_trackinfo</a> (<a class="el" href="structdisk__t.html">disk_t</a> *<a class="el" href="td02lif_8c.html#affcceda12b139f26819f4929be705eb1">disk</a>, int trackind, int index)</td></tr>
<tr class="memdesc:ab14f2a074ca85e1b32cc26f3369c574f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Display TeleDisk track sector values.  <a href="td02lif_8c.html#ab14f2a074ca85e1b32cc26f3369c574f">More...</a><br /></td></tr>
<tr class="separator:ab14f2a074ca85e1b32cc26f3369c574f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff9adf4831cee8528e02b6456459435e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="td02lif_8c.html#aff9adf4831cee8528e02b6456459435e">td0_sectorinfo</a> (<a class="el" href="structtd__sector__t.html">td_sector_t</a> *P)</td></tr>
<tr class="memdesc:aff9adf4831cee8528e02b6456459435e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Display TeleDisk sector data.  <a href="td02lif_8c.html#aff9adf4831cee8528e02b6456459435e">More...</a><br /></td></tr>
<tr class="separator:aff9adf4831cee8528e02b6456459435e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a48825de35a808127b9c304a764a48439"><td class="memItemLeft" align="right" valign="top">long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="td02lif_8c.html#a48825de35a808127b9c304a764a48439">td0_density2bitrate</a> (uint8_t density)</td></tr>
<tr class="memdesc:a48825de35a808127b9c304a764a48439"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert Denisity to bitrate @We don't care about the density except as a possible filter.  <a href="td02lif_8c.html#a48825de35a808127b9c304a764a48439">More...</a><br /></td></tr>
<tr class="separator:a48825de35a808127b9c304a764a48439"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab49e4bf7cf89d5c6b90181a6bac46de6"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="td02lif_8c.html#ab49e4bf7cf89d5c6b90181a6bac46de6">td0_open</a> (<a class="el" href="structdisk__t.html">disk_t</a> *<a class="el" href="td02lif_8c.html#affcceda12b139f26819f4929be705eb1">disk</a>, char *name)</td></tr>
<tr class="memdesc:ab49e4bf7cf89d5c6b90181a6bac46de6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Opne TeleDisk image file process header and optional comment block.  <a href="td02lif_8c.html#ab49e4bf7cf89d5c6b90181a6bac46de6">More...</a><br /></td></tr>
<tr class="separator:ab49e4bf7cf89d5c6b90181a6bac46de6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a87120823fa3dd587214e6c70ebde151f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="td02lif_8c.html#a87120823fa3dd587214e6c70ebde151f">td0_read_disk</a> (<a class="el" href="structdisk__t.html">disk_t</a> *<a class="el" href="td02lif_8c.html#affcceda12b139f26819f4929be705eb1">disk</a>)</td></tr>
<tr class="memdesc:a87120823fa3dd587214e6c70ebde151f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read TeleDisk image file and save all sector data.  <a href="td02lif_8c.html#a87120823fa3dd587214e6c70ebde151f">More...</a><br /></td></tr>
<tr class="separator:a87120823fa3dd587214e6c70ebde151f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac777daf6e56deb920d24ac72f83f0624"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="td02lif_8c.html#ac777daf6e56deb920d24ac72f83f0624">td0_analize_format</a> (<a class="el" href="structdisk__t.html">disk_t</a> *<a class="el" href="td02lif_8c.html#affcceda12b139f26819f4929be705eb1">disk</a>)</td></tr>
<tr class="memdesc:ac777daf6e56deb920d24ac72f83f0624"><td class="mdescLeft">&#160;</td><td class="mdescRight">Analize TeleDisk disk sector data Problem: We may have a disk that was reformatted multiple times Each format may have used differing sector sizes, number of tracks, sides For example: First format 80 track disk, two sided, and 9 512 byte sectors per track Second format 35 tracks, single sided, 16 sectors 256 bytes size per track Clearly we only want the 35 tracks on the first side.  <a href="td02lif_8c.html#ac777daf6e56deb920d24ac72f83f0624">More...</a><br /></td></tr>
<tr class="separator:ac777daf6e56deb920d24ac72f83f0624"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b045f601a00f806f99e466e18109a08"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="td02lif_8c.html#a2b045f601a00f806f99e466e18109a08">td0_save_lif</a> (<a class="el" href="structdisk__t.html">disk_t</a> *<a class="el" href="td02lif_8c.html#affcceda12b139f26819f4929be705eb1">disk</a>, <a class="el" href="structlif__t.html">lif_t</a> *LIF)</td></tr>
<tr class="memdesc:a2b045f601a00f806f99e466e18109a08"><td class="mdescLeft">&#160;</td><td class="mdescRight">save remaining sectors as LIF data  <a href="td02lif_8c.html#a2b045f601a00f806f99e466e18109a08">More...</a><br /></td></tr>
<tr class="separator:a2b045f601a00f806f99e466e18109a08"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a08cbf8c12076d3677df348da2dbf7ca2"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="td02lif_8c.html#a08cbf8c12076d3677df348da2dbf7ca2">td0_save_lif_sector</a> (<a class="el" href="structdisk__t.html">disk_t</a> *<a class="el" href="td02lif_8c.html#affcceda12b139f26819f4929be705eb1">disk</a>, uint8_t *data, int size, <a class="el" href="structlif__t.html">lif_t</a> *LIF)</td></tr>
<tr class="memdesc:a08cbf8c12076d3677df348da2dbf7ca2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Process all sectors on a track from TeleDisk image.  <a href="td02lif_8c.html#a08cbf8c12076d3677df348da2dbf7ca2">More...</a><br /></td></tr>
<tr class="separator:a08cbf8c12076d3677df348da2dbf7ca2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a26d4f0afc5df75f388d93a9510ab39ee"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="td02lif_8c.html#a26d4f0afc5df75f388d93a9510ab39ee">td0_help</a> (int full)</td></tr>
<tr class="separator:a26d4f0afc5df75f388d93a9510ab39ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af8f1231cf42003200a45f8b6828f13c1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="td02lif_8c.html#af8f1231cf42003200a45f8b6828f13c1">td0_init_liftel</a> ()</td></tr>
<tr class="memdesc:af8f1231cf42003200a45f8b6828f13c1"><td class="mdescLeft">&#160;</td><td class="mdescRight">TeleDisk image Analisis structure Find attributes of LIF image stored in TeleDisk image.  <a href="td02lif_8c.html#af8f1231cf42003200a45f8b6828f13c1">More...</a><br /></td></tr>
<tr class="separator:af8f1231cf42003200a45f8b6828f13c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a250c5e050c7c158c05611ba8dbf985a9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="td02lif_8c.html#a250c5e050c7c158c05611ba8dbf985a9">td0_init_sectors</a> (<a class="el" href="structdisk__t.html">disk_t</a> *<a class="el" href="td02lif_8c.html#affcceda12b139f26819f4929be705eb1">disk</a>)</td></tr>
<tr class="memdesc:a250c5e050c7c158c05611ba8dbf985a9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize track sector information Optionally decompress the data if decompression is enabled.  <a href="td02lif_8c.html#a250c5e050c7c158c05611ba8dbf985a9">More...</a><br /></td></tr>
<tr class="separator:a250c5e050c7c158c05611ba8dbf985a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a768caca68199c490335ee088781e7bba"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="td02lif_8c.html#a768caca68199c490335ee088781e7bba">td02lif</a> (int argc, char *argv[])</td></tr>
<tr class="memdesc:a768caca68199c490335ee088781e7bba"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert a Teledisk LIF formatted disk image into a pure LIF image.  <a href="td02lif_8c.html#a768caca68199c490335ee088781e7bba">More...</a><br /></td></tr>
<tr class="separator:a768caca68199c490335ee088781e7bba"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:affcceda12b139f26819f4929be705eb1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structdisk__t.html">disk_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="td02lif_8c.html#affcceda12b139f26819f4929be705eb1">disk</a></td></tr>
<tr class="memdesc:affcceda12b139f26819f4929be705eb1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Dave Dunfiled LZSS expander.  <a href="td02lif_8c.html#affcceda12b139f26819f4929be705eb1">More...</a><br /></td></tr>
<tr class="separator:affcceda12b139f26819f4929be705eb1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af2b2b3e4827acc662c88bb762e41106d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structliftel__t.html">liftel_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="td02lif_8c.html#af2b2b3e4827acc662c88bb762e41106d">liftel</a></td></tr>
<tr class="memdesc:af2b2b3e4827acc662c88bb762e41106d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Teledisk liftel analysis and user overrides.  <a href="td02lif_8c.html#af2b2b3e4827acc662c88bb762e41106d">More...</a><br /></td></tr>
<tr class="separator:af2b2b3e4827acc662c88bb762e41106d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>TeleDisk decoder library targetting LIF format images only. </p>
<dl class="section user"><dt>Copyright &copy; 2014-2020 Mike Gore, Inc. All rights reserved. GPL</dt><dd></dd></dl>
<dl class="section see"><dt>See also</dt><dd><a href="http://github.com/magore/hp85disk">http://github.com/magore/hp85disk</a> </dd>
<dd>
<a href="http://github.com/magore/hp85disk/COPYRIGHT.md">http://github.com/magore/hp85disk/COPYRIGHT.md</a> for Copyright details</dd></dl>
<p>@help LIF command help lif td02lif image.td0 image.lif Convert TeleDisk encoded LIF disk image into to pure LIF image TELEDISK command help td02lif file.td0 file.lif Convert TeleDisk encoded LIF disk image into to pure LIF image</p>
<dl class="section user"><dt>Edit History</dt><dd><ul>
<li>[1.0] [Mike Gore] Initial revision of file.</li>
</ul>
</dd></dl>
<p>@Credits lif/teledisk My TELEDISK LIF extracter Note: The TeleDisk image MUST contain a LIF image - we do NOT translate it README.txt Credits Important Contributions (My converted would not have been possible without these) Dave Dunfield, LZSS Code and TeleDisk documentation Copyright 2007-2008 Dave Dunfield All rights reserved. td0_lzss.h td0_lzss.c LZSS decoder td0notes.txt Teledisk Documentation Jean-Franois DEL NERO, TeleDisk Documentation Copyright (C) 2006-2014 Jean-Franois DEL NERO wteledsk.htm TeleDisk documenation See his github project <a href="https://github.com/jfdelnero/libhxcfe">https://github.com/jfdelnero/libhxcfe</a> </p>

<p class="definition">Definition in file <a class="el" href="td02lif_8c_source.html">td02lif.c</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a768caca68199c490335ee088781e7bba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a768caca68199c490335ee088781e7bba">&#9670;&nbsp;</a></span>td02lif()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int td02lif </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>argv</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Convert a Teledisk LIF formatted disk image into a pure LIF image. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">telediskname</td><td>TELEDISK image name </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">lifname</td><td>LIF file name to write </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>1 on success, 0 on error </dd></dl>
<p>Write LIF file</p>
<p>LIF summary</p>
<p>Close LIF file</p>

<p class="definition">Definition at line <a class="el" href="td02lif_8c_source.html#l01650">1650</a> of file <a class="el" href="td02lif_8c_source.html">td02lif.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="lifutils_8c_source.html#l00141">lif_tests()</a>.</p>

</div>
</div>
<a id="ac777daf6e56deb920d24ac72f83f0624"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac777daf6e56deb920d24ac72f83f0624">&#9670;&nbsp;</a></span>td0_analize_format()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int td0_analize_format </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdisk__t.html">disk_t</a> *&#160;</td>
          <td class="paramname"><em>disk</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Analize TeleDisk disk sector data Problem: We may have a disk that was reformatted multiple times Each format may have used differing sector sizes, number of tracks, sides For example: First format 80 track disk, two sided, and 9 512 byte sectors per track Second format 35 tracks, single sided, 16 sectors 256 bytes size per track Clearly we only want the 35 tracks on the first side. </p>
<p>What we do is examine the first 30 tracks (note: 30 is just a safe number less then 35) On side 1, on 30 tracks Find first sector and save its size Reject sectors that do not match size Find Last sector matching size Count sectors matching size On side 2, on 30 tracks Reject sectors that do not match size Find first sector and save its size Find Last sector matching size Count sectors matching size</p>
<p>If the disk had two sides recorded in the header Reject second side if side sector counts do NOT match Reject second side if NO remaining sectors Reject second side if sector ranges do not match or continue in range</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">dist</td><td>TD0 image data @retrun 1 if OK, 0 on error </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="td02lif_8c_source.html#l00896">896</a> of file <a class="el" href="td02lif_8c_source.html">td02lif.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="td02lif_8c_source.html#l01650">td02lif()</a>.</p>

</div>
</div>
<a id="a369d6a9b15ee337cfb9e998b3e914f9c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a369d6a9b15ee337cfb9e998b3e914f9c">&#9670;&nbsp;</a></span>td0_B2S()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void td0_B2S </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>B</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a string from data that has no EOS but known size. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">*B</td><td>source </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">index</td><td>index offset into source data </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">*name</td><td>target string </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">size</td><td>size of string to write - not including EOS </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void </dd></dl>

<p class="definition">Definition at line <a class="el" href="td02lif_8c_source.html#l00068">68</a> of file <a class="el" href="td02lif_8c_source.html">td02lif.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="td02lif_8c_source.html#l00151">td0_unpack_disk_header()</a>.</p>

</div>
</div>
<a id="a786b280e1ac85ba19bcb2f4ca0d21ee3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a786b280e1ac85ba19bcb2f4ca0d21ee3">&#9670;&nbsp;</a></span>td0_compressed()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void td0_compressed </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flag</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enable TeleDisk image compression mode. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">flag</td><td>compression anable/disable </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void </dd></dl>

<p class="definition">Definition at line <a class="el" href="td02lif_8c_source.html#l00250">250</a> of file <a class="el" href="td02lif_8c_source.html">td02lif.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="td02lif_8c_source.html#l00506">td0_open()</a>.</p>

</div>
</div>
<a id="a1e9e20346b224655b6586eb34efe1b5f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1e9e20346b224655b6586eb34efe1b5f">&#9670;&nbsp;</a></span>td0_crc16()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t td0_crc16 </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>B</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>crc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>poly</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Compute CRC16 of 8bit data. </p>
<dl class="section see"><dt>See also</dt><dd><a href="https://en.wikipedia.org/wiki/Cyclic_redundancy_check">https://en.wikipedia.org/wiki/Cyclic_redundancy_check</a> FYI normal CRC16 typically use 0x1021 for ploy Note: You can do a CRC16 of data in blocks by passing the result as the crc initial value for the next call </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">*B</td><td>8 bit binary data </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">crc</td><td>initial crc value </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">poly</td><td>ploynomial </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">size</td><td>number of bytes </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>crc16 of result </dd></dl>

<p class="definition">Definition at line <a class="el" href="td02lif_8c_source.html#l00087">87</a> of file <a class="el" href="td02lif_8c_source.html">td02lif.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="td02lif_8c_source.html#l00506">td0_open()</a>, <a class="el" href="td02lif_8c_source.html#l00643">td0_read_disk()</a>, <a class="el" href="td02lif_8c_source.html#l00178">td0_unpack_comment_header()</a>, <a class="el" href="td02lif_8c_source.html#l00151">td0_unpack_disk_header()</a>, and <a class="el" href="td02lif_8c_source.html#l00201">td0_unpack_track_header()</a>.</p>

</div>
</div>
<a id="a48825de35a808127b9c304a764a48439"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a48825de35a808127b9c304a764a48439">&#9670;&nbsp;</a></span>td0_density2bitrate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long td0_density2bitrate </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>density</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Convert Denisity to bitrate @We don't care about the density except as a possible filter. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">Density</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>bitrate </dd></dl>

<p class="definition">Definition at line <a class="el" href="td02lif_8c_source.html#l00472">472</a> of file <a class="el" href="td02lif_8c_source.html">td02lif.c</a>.</p>

</div>
</div>
<a id="a26d4f0afc5df75f388d93a9510ab39ee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a26d4f0afc5df75f388d93a9510ab39ee">&#9670;&nbsp;</a></span>td0_help()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void td0_help </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>full</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="td02lif_8c_source.html#l01556">1556</a> of file <a class="el" href="td02lif_8c_source.html">td02lif.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="lifutils_8c_source.html#l00141">lif_tests()</a>, and <a class="el" href="td02lif_8c_source.html#l01650">td02lif()</a>.</p>

</div>
</div>
<a id="a4d01fdafef7fb089054149fd0c04c75f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4d01fdafef7fb089054149fd0c04c75f">&#9670;&nbsp;</a></span>td0_hexdump()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void td0_hexdump </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>hex listing of data </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">*data</td><td>date to dump </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">size</td><td>size of data to dump @retrun void </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="td02lif_8c_source.html#l00110">110</a> of file <a class="el" href="td02lif_8c_source.html">td02lif.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="td02lif_8c_source.html#l01366">td0_save_lif_sector()</a>.</p>

</div>
</div>
<a id="af8f1231cf42003200a45f8b6828f13c1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af8f1231cf42003200a45f8b6828f13c1">&#9670;&nbsp;</a></span>td0_init_liftel()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void td0_init_liftel </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>TeleDisk image Analisis structure Find attributes of LIF image stored in TeleDisk image. </p>

<p class="definition">Definition at line <a class="el" href="td02lif_8c_source.html#l01577">1577</a> of file <a class="el" href="td02lif_8c_source.html">td02lif.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="td02lif_8c_source.html#l01650">td02lif()</a>.</p>

</div>
</div>
<a id="a250c5e050c7c158c05611ba8dbf985a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a250c5e050c7c158c05611ba8dbf985a9">&#9670;&nbsp;</a></span>td0_init_sectors()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void td0_init_sectors </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdisk__t.html">disk_t</a> *&#160;</td>
          <td class="paramname"><em>disk</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize track sector information Optionally decompress the data if decompression is enabled. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">p</td><td>data buffer for read </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">osize</td><td>size of object </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">size</td><td>number of objects to read </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>size of dataactually read </dd></dl>

<p class="definition">Definition at line <a class="el" href="td02lif_8c_source.html#l01614">1614</a> of file <a class="el" href="td02lif_8c_source.html">td02lif.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="td02lif_8c_source.html#l01650">td02lif()</a>.</p>

</div>
</div>
<a id="ab49e4bf7cf89d5c6b90181a6bac46de6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab49e4bf7cf89d5c6b90181a6bac46de6">&#9670;&nbsp;</a></span>td0_open()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int td0_open </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdisk__t.html">disk_t</a> *&#160;</td>
          <td class="paramname"><em>disk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Opne TeleDisk image file process header and optional comment block. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">*disk</td><td>TeleDisk information structure </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">*name</td><td>image file name </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>1 on success 0 on error Note: on success disk-&gt;fi has the file handle disk-&gt;td0_name has the file name disk-&gt;compresssed if image is compressed disk-&gt;td_header has teledisk header disk-&gt;td_comment has optional teledisk comment header or zeroed If disk.td_comment.Size &gt; 0 disk-&gt;comment has optional comment string or empty string If disk.td_comment.Size &gt; 0 </dd></dl>
<p>@process TeleDisk disk image header</p>
<p>we expect "TD" (uncompressed) or "td" (compressed) format</p>
<p>We only accept TeleDisk versions &gt;= 10 &amp;&amp; version &lt;= 21</p>
<p>Time to Unix format</p>

<p class="definition">Definition at line <a class="el" href="td02lif_8c_source.html#l00506">506</a> of file <a class="el" href="td02lif_8c_source.html">td02lif.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="td02lif_8c_source.html#l01650">td02lif()</a>.</p>

</div>
</div>
<a id="a3f65dd34ac6cf2ee2ab6d5a913b0e457"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3f65dd34ac6cf2ee2ab6d5a913b0e457">&#9670;&nbsp;</a></span>td0_read()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int td0_read </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>osize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="posix_8h.html#aed4dabeb9f7c518ded42f930a04abce8">FILE</a> *&#160;</td>
          <td class="paramname"><em>fp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read TeleDisk image data block Optionally decompress the data if decompression is enabled. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">p</td><td>data buffer for read </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">osize</td><td>size of object </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">size</td><td>number of objects to read </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>1 on success all bytes read, 0 on failure not all bytes read </dd></dl>

<p class="definition">Definition at line <a class="el" href="td02lif_8c_source.html#l00264">264</a> of file <a class="el" href="td02lif_8c_source.html">td02lif.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="td02lif_8c_source.html#l00506">td0_open()</a>, and <a class="el" href="td02lif_8c_source.html#l00643">td0_read_disk()</a>.</p>

</div>
</div>
<a id="a87120823fa3dd587214e6c70ebde151f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a87120823fa3dd587214e6c70ebde151f">&#9670;&nbsp;</a></span>td0_read_disk()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int td0_read_disk </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdisk__t.html">disk_t</a> *&#160;</td>
          <td class="paramname"><em>disk</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read TeleDisk image file and save all sector data. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">dist</td><td>TD0 image data </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>1 on success 0 on error </dd></dl>
<p>Process all image Data</p>
<p>EOF? TeleDisk specification says EOF is 255 sectors</p>
<p>Process all track sectors</p>
<p>Sector Header</p>
<p>first test verifies sector &lt; 2K in size second test verifies no data or address mark errors</p>
<p>Compute how much data to read</p>
<p>td0_rle does not use len internal data in the buffer does this We limit the expansion to sector size</p>
<p>=========================================</p>

<p class="definition">Definition at line <a class="el" href="td02lif_8c_source.html#l00643">643</a> of file <a class="el" href="td02lif_8c_source.html">td02lif.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="td02lif_8c_source.html#l01650">td02lif()</a>.</p>

</div>
</div>
<a id="a7f9b8f09a74778aafcef0ccfcf7e73e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7f9b8f09a74778aafcef0ccfcf7e73e6">&#9670;&nbsp;</a></span>td0_rle()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int td0_rle </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>dst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>src</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>max</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Expand a Run Length encoded TeleDisk sector Notes: the source length is encoded in the source data Credits based on work (C) 2006-2014 Jean-François DEL NERO Part of the HxCFloppyEmulator library GNU GPL version 2 or later Rewitten for clarity,to enforce size limits, provide error reporting and to avoid word order dependent assumptions,. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">dst</td><td>destination expanded data </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">src</td><td>source data </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">max</td><td>maximum size of destination data </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>size of expanded data, negative if size &gt; max </dd></dl>
<p>@actual length</p>
<p>block size</p>
<p>repeat count</p>

<p class="definition">Definition at line <a class="el" href="td02lif_8c_source.html#l00307">307</a> of file <a class="el" href="td02lif_8c_source.html">td02lif.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="td02lif_8c_source.html#l00643">td0_read_disk()</a>.</p>

</div>
</div>
<a id="a2b045f601a00f806f99e466e18109a08"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2b045f601a00f806f99e466e18109a08">&#9670;&nbsp;</a></span>td0_save_lif()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int td0_save_lif </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdisk__t.html">disk_t</a> *&#160;</td>
          <td class="paramname"><em>disk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structlif__t.html">lif_t</a> *&#160;</td>
          <td class="paramname"><em>LIF</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>save remaining sectors as LIF data </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">data</td><td>sector data </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">LIF</td><td>LIF structure @retrun 1 if OK, 0 on error </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="td02lif_8c_source.html#l01303">1303</a> of file <a class="el" href="td02lif_8c_source.html">td02lif.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="td02lif_8c_source.html#l01650">td02lif()</a>.</p>

</div>
</div>
<a id="a08cbf8c12076d3677df348da2dbf7ca2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a08cbf8c12076d3677df348da2dbf7ca2">&#9670;&nbsp;</a></span>td0_save_lif_sector()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int td0_save_lif_sector </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdisk__t.html">disk_t</a> *&#160;</td>
          <td class="paramname"><em>disk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structlif__t.html">lif_t</a> *&#160;</td>
          <td class="paramname"><em>LIF</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Process all sectors on a track from TeleDisk image. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">data</td><td>sector data </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">size</td><td>sector size </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">LIF</td><td>LIF structure @retrun 1 if OK, 0 on error </td></tr>
  </table>
  </dd>
</dl>
<p>==================================================== Write sectors from Teledisk track to LIF file </p>
<h1><a class="anchor" id="autotoc_md186"></a>
We continue until the last last file sector</h1>

<p class="definition">Definition at line <a class="el" href="td02lif_8c_source.html#l01366">1366</a> of file <a class="el" href="td02lif_8c_source.html">td02lif.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="td02lif_8c_source.html#l01303">td0_save_lif()</a>.</p>

</div>
</div>
<a id="aff9adf4831cee8528e02b6456459435e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aff9adf4831cee8528e02b6456459435e">&#9670;&nbsp;</a></span>td0_sectorinfo()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void td0_sectorinfo </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtd__sector__t.html">td_sector_t</a> *&#160;</td>
          <td class="paramname"><em>P</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Display TeleDisk sector data. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">P</td><td>td_sector pointer </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void </dd></dl>

<p class="definition">Definition at line <a class="el" href="td02lif_8c_source.html#l00458">458</a> of file <a class="el" href="td02lif_8c_source.html">td02lif.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="td02lif_8c_source.html#l00643">td0_read_disk()</a>.</p>

</div>
</div>
<a id="ab14f2a074ca85e1b32cc26f3369c574f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab14f2a074ca85e1b32cc26f3369c574f">&#9670;&nbsp;</a></span>td0_trackinfo()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void td0_trackinfo </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdisk__t.html">disk_t</a> *&#160;</td>
          <td class="paramname"><em>disk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>trackind</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>index</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Display TeleDisk track sector values. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">sector</td><td>track sector structure </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">index</td><td>sector index (not sector number) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void </dd></dl>

<p class="definition">Definition at line <a class="el" href="td02lif_8c_source.html#l00443">443</a> of file <a class="el" href="td02lif_8c_source.html">td02lif.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="td02lif_8c_source.html#l00896">td0_analize_format()</a>, and <a class="el" href="td02lif_8c_source.html#l00643">td0_read_disk()</a>.</p>

</div>
</div>
<a id="aa2721b8d8bba4008a2b48d1b362b9850"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa2721b8d8bba4008a2b48d1b362b9850">&#9670;&nbsp;</a></span>td0_unpack_comment_header()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int td0_unpack_comment_header </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>B</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structtd__comment__t.html">td_comment_t</a> *&#160;</td>
          <td class="paramname"><em>p</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Extract TeleDisk comment header data in architecture nutral way. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">B</td><td>source data </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">p</td><td>TeleDisk comment header structure </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>TeleDisk comment header size (not structure size) </dd></dl>

<p class="definition">Definition at line <a class="el" href="td02lif_8c_source.html#l00178">178</a> of file <a class="el" href="td02lif_8c_source.html">td02lif.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="td02lif_8c_source.html#l00506">td0_open()</a>.</p>

</div>
</div>
<a id="a038d4e9f86f76569a97e443e376a8e11"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a038d4e9f86f76569a97e443e376a8e11">&#9670;&nbsp;</a></span>td0_unpack_disk_header()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int td0_unpack_disk_header </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>B</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structtd__header__t.html">td_header_t</a> *&#160;</td>
          <td class="paramname"><em>p</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Extract TeleDisk image header data in architecture nutral way. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">B</td><td>source data </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">p</td><td>TeleDisk image header structure </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>TeleDisk image header size (not structure size) </dd></dl>

<p class="definition">Definition at line <a class="el" href="td02lif_8c_source.html#l00151">151</a> of file <a class="el" href="td02lif_8c_source.html">td02lif.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="td02lif_8c_source.html#l00506">td0_open()</a>.</p>

</div>
</div>
<a id="ac393151af482d511b246de534da58e6f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac393151af482d511b246de534da58e6f">&#9670;&nbsp;</a></span>td0_unpack_sector_header()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int td0_unpack_sector_header </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>B</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structtd__sector__t.html">td_sector_t</a> *&#160;</td>
          <td class="paramname"><em>p</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Extract TeleDisk sector header data in architecture nutral way. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">B</td><td>source data </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">p</td><td>TeleDisk sector header structure </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>TeleDisk sector header size (not structure size) </dd></dl>

<p class="definition">Definition at line <a class="el" href="td02lif_8c_source.html#l00232">232</a> of file <a class="el" href="td02lif_8c_source.html">td02lif.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="td02lif_8c_source.html#l00643">td0_read_disk()</a>.</p>

</div>
</div>
<a id="ab9cc29346498d37ff85d3a3417d8fc11"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab9cc29346498d37ff85d3a3417d8fc11">&#9670;&nbsp;</a></span>td0_unpack_track_header()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int td0_unpack_track_header </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>B</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structtd__track__t.html">td_track_t</a> *&#160;</td>
          <td class="paramname"><em>p</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Extract TeleDisk track header data in architecture nutral way. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">B</td><td>source data </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">p</td><td>TeleDisk track header structure </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>TeleDisk track header size (not structure size) </dd></dl>

<p class="definition">Definition at line <a class="el" href="td02lif_8c_source.html#l00201">201</a> of file <a class="el" href="td02lif_8c_source.html">td02lif.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="td02lif_8c_source.html#l00643">td0_read_disk()</a>.</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="affcceda12b139f26819f4929be705eb1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#affcceda12b139f26819f4929be705eb1">&#9670;&nbsp;</a></span>disk</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structdisk__t.html">disk_t</a> disk</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Dave Dunfiled LZSS expander. </p>

<p class="definition">Definition at line <a class="el" href="td02lif_8c_source.html#l00057">57</a> of file <a class="el" href="td02lif_8c_source.html">td02lif.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="td02lif_8c_source.html#l01650">td02lif()</a>, <a class="el" href="td02lif_8c_source.html#l00896">td0_analize_format()</a>, <a class="el" href="td02lif_8c_source.html#l00250">td0_compressed()</a>, <a class="el" href="td02lif_8c_source.html#l01614">td0_init_sectors()</a>, <a class="el" href="td02lif_8c_source.html#l00506">td0_open()</a>, <a class="el" href="td02lif_8c_source.html#l00264">td0_read()</a>, <a class="el" href="td02lif_8c_source.html#l00643">td0_read_disk()</a>, <a class="el" href="td02lif_8c_source.html#l01303">td0_save_lif()</a>, and <a class="el" href="td02lif_8c_source.html#l00443">td0_trackinfo()</a>.</p>

</div>
</div>
<a id="af2b2b3e4827acc662c88bb762e41106d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af2b2b3e4827acc662c88bb762e41106d">&#9670;&nbsp;</a></span>liftel</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structliftel__t.html">liftel_t</a> liftel</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Teledisk liftel analysis and user overrides. </p>

<p class="definition">Definition at line <a class="el" href="td02lif_8c_source.html#l00060">60</a> of file <a class="el" href="td02lif_8c_source.html">td02lif.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="td02lif_8c_source.html#l01650">td02lif()</a>, <a class="el" href="td02lif_8c_source.html#l00896">td0_analize_format()</a>, <a class="el" href="td02lif_8c_source.html#l01577">td0_init_liftel()</a>, <a class="el" href="td02lif_8c_source.html#l01303">td0_save_lif()</a>, and <a class="el" href="td02lif_8c_source.html#l01366">td0_save_lif_sector()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Jun 10 2020 17:03:11 for HP85 GPIB Disk Emulator by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
