\hypertarget{lifutils_8c}{}\section{lif/lifutils.c File Reference}
\label{lifutils_8c}\index{lif/lifutils.\+c@{lif/lifutils.\+c}}


L\+IF file utilities.  


{\ttfamily \#include \char`\"{}user\+\_\+config.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}defines.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}drives.\+h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}lifutils.\+h\char`\"{}}\\*
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE} void \hyperlink{lifutils_8c_a9fa8d82d9e4fc93e6ebfb1be2b781bc6}{lif\+\_\+help} ()
\begin{DoxyCompactList}\small\item\em Help Menu for User invoked G\+P\+IB functions and tasks See\+: int gpib\+\_\+tests(char $\ast$str) \end{DoxyCompactList}\item 
\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE} int \hyperlink{lifutils_8c_ae76ffe84d6e9758fbc6b3c1959a0b91f}{lif\+\_\+tests} (int argc, char $\ast$argv\mbox{[}$\,$\mbox{]})
\begin{DoxyCompactList}\small\item\em L\+IF user tests. \end{DoxyCompactList}\item 
\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE} void $\ast$ \hyperlink{lifutils_8c_aca73842308f6e7769da01bd0cc10a10e}{lif\+\_\+calloc} (long size)
\begin{DoxyCompactList}\small\item\em Allocate and clear memory Displays message on errors. \end{DoxyCompactList}\item 
\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE} void \hyperlink{lifutils_8c_a3ae4c14ae153d01c29b10c6a4ee5f3af}{lif\+\_\+free} (uint8\+\_\+t $\ast$p)
\begin{DoxyCompactList}\small\item\em Free allocated memory Displays message on errors. \end{DoxyCompactList}\item 
\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE} void $\ast$ \hyperlink{lifutils_8c_af6f55d2cb736a18df4d934409a0412ed}{lif\+\_\+stralloc} (char $\ast$str)
\begin{DoxyCompactList}\small\item\em Allocate and copy a string Displays message on errors. \end{DoxyCompactList}\item 
\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE} \hyperlink{posix_8h_aed4dabeb9f7c518ded42f930a04abce8}{F\+I\+LE} $\ast$ \hyperlink{lifutils_8c_aca2921d0bba9c706ba27d6a3ae598140}{lif\+\_\+open} (char $\ast$name, char $\ast$mode)
\begin{DoxyCompactList}\small\item\em Open a file that must exist Displays message on errors. \end{DoxyCompactList}\item 
\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE} \hyperlink{defines_8h_aebb3d0e746d3aa086e0baa48ad66b964}{stat\+\_\+t} $\ast$ \hyperlink{lifutils_8c_a67f1ed1dfac85f6dff9a3851c9b4f79b}{lif\+\_\+stat} (char $\ast$name, \hyperlink{defines_8h_aebb3d0e746d3aa086e0baa48ad66b964}{stat\+\_\+t} $\ast$p)
\begin{DoxyCompactList}\small\item\em Stat a file Displays message on errors. \end{DoxyCompactList}\item 
\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE} int \hyperlink{lifutils_8c_ada97dce18d20d7432911f1232fa5876c}{lif\+\_\+seek\+\_\+msg} (\hyperlink{posix_8h_aed4dabeb9f7c518ded42f930a04abce8}{F\+I\+LE} $\ast$fp, long offset, char $\ast$msg)
\item 
\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE} long \hyperlink{lifutils_8c_a43c84ad805d39fe11e9c01ed96d8449f}{lif\+\_\+read} (\hyperlink{structlif__t}{lif\+\_\+t} $\ast$L\+IF, void $\ast$buf, long offset, int bytes)
\begin{DoxyCompactList}\small\item\em Read data from a L\+IF image Displays message on errors. \end{DoxyCompactList}\item 
\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE} int \hyperlink{lifutils_8c_a51651de65cdba6cf543b498e770e2971}{lif\+\_\+write} (\hyperlink{structlif__t}{lif\+\_\+t} $\ast$L\+IF, void $\ast$buf, long offset, int bytes)
\begin{DoxyCompactList}\small\item\em Write data to an L\+IF image Displays message on errors. \end{DoxyCompactList}\item 
\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE} int \hyperlink{lifutils_8c_af125780fc6bbe395b4288aeffb8ed013}{lif\+\_\+chars} (int c, int index)
\begin{DoxyCompactList}\small\item\em Check if characters in a L\+IF volume or L\+IF file name are valid. \end{DoxyCompactList}\item 
\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE} int \hyperlink{lifutils_8c_ab2f681c9cb11eefcb573ab80dc9d7633}{lif\+\_\+\+B2S} (uint8\+\_\+t $\ast$B, uint8\+\_\+t $\ast$name, int size)
\begin{DoxyCompactList}\small\item\em Convert L\+IF space padded string name into normal string. \end{DoxyCompactList}\item 
\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE} int \hyperlink{lifutils_8c_a3f32a48a31e8fa225a2e5d72ffc969e6}{lif\+\_\+checkname} (char $\ast$name)
\begin{DoxyCompactList}\small\item\em Check volume if name or directory name is valid. \end{DoxyCompactList}\item 
\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE} void \hyperlink{lifutils_8c_a7b21c26a358dc3d0ce1a8fb12400e7b8}{lif\+\_\+\+S2B} (uint8\+\_\+t $\ast$B, uint8\+\_\+t $\ast$name, int size)
\begin{DoxyCompactList}\small\item\em Convert string to L\+IF directory record. \end{DoxyCompactList}\item 
\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE} int \hyperlink{lifutils_8c_a05e815994fb0e328a72e3a514428f07f}{lif\+\_\+fixname} (uint8\+\_\+t $\ast$B, char $\ast$name, int size)
\begin{DoxyCompactList}\small\item\em Convert name into a valid L\+IF name Only use the \hyperlink{posix_8c_a4d3dfaf2f5a63e2e4eaa128477a9b5e7}{basename()} part of the string and remove any file name extentions L\+IF names may have only these characters\+: \mbox{[}A-\/Z\mbox{]}\mbox{[}A-\/\+Z0-\/09\+\_\+\mbox{]}+ L\+IF names are converted to upper case L\+IF names are padded at the end with spaces Any invalid input characters are converted into spaces. \end{DoxyCompactList}\item 
\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE} void \hyperlink{lifutils_8c_a1f62ff0f9d7b16de4c717e9ff5440547}{lif\+\_\+vol2str} (\hyperlink{structlif__t}{lif\+\_\+t} $\ast$L\+IF, uint8\+\_\+t $\ast$B)
\begin{DoxyCompactList}\small\item\em Convert L\+IF volume records into byte vector. \end{DoxyCompactList}\item 
\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE} void \hyperlink{lifutils_8c_a309f4e78392fd508f4b2966989f0fe11}{lif\+\_\+str2vol} (uint8\+\_\+t $\ast$B, \hyperlink{structlif__t}{lif\+\_\+t} $\ast$L\+IF)
\begin{DoxyCompactList}\small\item\em Convert byte vector into L\+IF volume records. \end{DoxyCompactList}\item 
\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE} void \hyperlink{lifutils_8c_a38bbbf82814835350f636cf16427ac89}{lif\+\_\+dir2str} (\hyperlink{structlif__t}{lif\+\_\+t} $\ast$L\+IF, uint8\+\_\+t $\ast$B)
\begin{DoxyCompactList}\small\item\em Convert L\+IF directory records into byte vector. \end{DoxyCompactList}\item 
\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE} void \hyperlink{lifutils_8c_a96cf5cb4698643c717d21305bacb9f0a}{lif\+\_\+str2dir} (uint8\+\_\+t $\ast$B, \hyperlink{structlif__t}{lif\+\_\+t} $\ast$L\+IF)
\begin{DoxyCompactList}\small\item\em Convert byte vector into byte vector. \end{DoxyCompactList}\item 
\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE} uint8\+\_\+t \hyperlink{lifutils_8c_a74e4057cb326e5592b0c69f50eb68d02}{lif\+\_\+\+B\+I\+N2\+B\+CD} (uint8\+\_\+t data)
\begin{DoxyCompactList}\small\item\em Convert number $>$= 0 and $<$= 99 to B\+CD. \end{DoxyCompactList}\item 
\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE} int \hyperlink{lifutils_8c_ae1cece4d7bf8e52e9fde4d1d836d4431}{lif\+\_\+\+B\+C\+D2\+B\+IN} (uint8\+\_\+t bin)
\begin{DoxyCompactList}\small\item\em Convert B\+CD in the range 0 and $<$= 99 to B\+IN B\+CD format\+: each hex nibble has a digit 0 .. 9. \end{DoxyCompactList}\item 
\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE} void \hyperlink{lifutils_8c_aa91627c2cb74e13d291b623dccf24fff}{lif\+\_\+time2lifbcd} (\hyperlink{time_8h_a3346b04b0420b32ccf6b706551b70762}{time\+\_\+t} t, uint8\+\_\+t $\ast$bcd)
\begin{DoxyCompactList}\small\item\em U\+N\+IX time to L\+IF B\+CD time format The B\+CD year is only the lower 2 digits of the year So We assume that values $<$= 70 are years $>$= 2000 B\+CD Day and Month start at 1 Note\+: If t == 0 we set A\+LL B\+CD digits to 0. \end{DoxyCompactList}\item 
\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE} \hyperlink{time_8h_a3346b04b0420b32ccf6b706551b70762}{time\+\_\+t} \hyperlink{lifutils_8c_a69b46ceeea3124d0810fc00f910ff342}{lif\+\_\+lifbcd2time} (uint8\+\_\+t $\ast$bcd)
\begin{DoxyCompactList}\small\item\em convert B\+CD date into time\+\_\+t value The B\+CD year is only the lower 2 digits of the year So We assume that values $<$= 70 are years $>$= 2000 B\+CD Day and Month start at 1 If A\+LL B\+CD digits are 0 we return 0 \end{DoxyCompactList}\item 
\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE} char $\ast$ \hyperlink{lifutils_8c_a66037d0bcbffc6000a59cc291cbef769}{lif\+\_\+ctime\+\_\+gmt} (\hyperlink{time_8h_a3346b04b0420b32ccf6b706551b70762}{time\+\_\+t} $\ast$tp)
\begin{DoxyCompactList}\small\item\em G\+MT version of P\+O\+S\+IX \hyperlink{time_8c_a77d6bba12950028852621634ffaf4835}{ctime()}. \end{DoxyCompactList}\item 
\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE} char $\ast$ \hyperlink{lifutils_8c_a5ab27bae428e4b04e1c056f67f65c22f}{lif\+\_\+lifbcd2timestr} (uint8\+\_\+t $\ast$bcd)
\item 
\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE} void \hyperlink{lifutils_8c_a4076e72afcb9beaca5886c5e7e83aed7}{lif\+\_\+image\+\_\+clear} (\hyperlink{structlif__t}{lif\+\_\+t} $\ast$L\+IF)
\begin{DoxyCompactList}\small\item\em File seek with error message. \end{DoxyCompactList}\item 
\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE} void \hyperlink{lifutils_8c_a29c92c7454bad4eb13e9f7ff89995fe2}{lif\+\_\+dir\+\_\+clear} (\hyperlink{structlif__t}{lif\+\_\+t} $\ast$L\+IF)
\begin{DoxyCompactList}\small\item\em Clear \hyperlink{structDIR}{D\+IR} part of L\+IF structure. \end{DoxyCompactList}\item 
\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE} void \hyperlink{lifutils_8c_a864d8cda56e135d05c681dbd896f24dc}{lif\+\_\+vol\+\_\+clear} (\hyperlink{structlif__t}{lif\+\_\+t} $\ast$L\+IF)
\begin{DoxyCompactList}\small\item\em Clear V\+OL part of L\+IF structure. \end{DoxyCompactList}\item 
\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE} void \hyperlink{lifutils_8c_a5c2eb20c1c8f59cae0845a564b5c95db}{lif\+\_\+dump\+\_\+vol} (\hyperlink{structlif__t}{lif\+\_\+t} $\ast$L\+IF, char $\ast$msg)
\begin{DoxyCompactList}\small\item\em Dump L\+IF struture data for debugging. \end{DoxyCompactList}\item 
\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE} int \hyperlink{lifutils_8c_a86bb283b68ec39b17f1f35e03d1dc34d}{lif\+\_\+check\+\_\+volume} (\hyperlink{structlif__t}{lif\+\_\+t} $\ast$L\+IF)
\begin{DoxyCompactList}\small\item\em Check Volume Table for values in range. \end{DoxyCompactList}\item 
\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE} int \hyperlink{lifutils_8c_a4a037ce3b854d7f5cfd31aff61810cd4}{lif\+\_\+check\+\_\+dir} (\hyperlink{structlif__t}{lif\+\_\+t} $\ast$L\+IF)
\begin{DoxyCompactList}\small\item\em Validate Directory record values We only do basic out of bounds tests for this record Purged or E\+OF directory records are N\+OT checked and always return 1. \end{DoxyCompactList}\item 
\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE} \hyperlink{structlif__t}{lif\+\_\+t} $\ast$ \hyperlink{lifutils_8c_a40173cedac7bb1b0b9f7e2902d76c3b8}{lif\+\_\+create\+\_\+volume} (char $\ast$imagename, char $\ast$liflabel, long dirstart, long dirsectors, long filesectors)
\begin{DoxyCompactList}\small\item\em Create L\+IF image with Volume, Directory and optional empty filespace. \end{DoxyCompactList}\item 
\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE} void \hyperlink{lifutils_8c_aeaf5399e472155070399f492a32a4326}{lif\+\_\+close\+\_\+volume} (\hyperlink{structlif__t}{lif\+\_\+t} $\ast$L\+IF)
\begin{DoxyCompactList}\small\item\em Free L\+IF structure and close any files. \end{DoxyCompactList}\item 
\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE} uint32\+\_\+t \hyperlink{lifutils_8c_ac41bc5c7424acf48bba35f8e552f10eb}{lif\+\_\+bytes2sectors} (uint32\+\_\+t bytes)
\begin{DoxyCompactList}\small\item\em Convert bytes into used sectors. \end{DoxyCompactList}\item 
\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE} void \hyperlink{lifutils_8c_ab647d79213dc29209066123907ff2f53}{lif\+\_\+rewinddir} (\hyperlink{structlif__t}{lif\+\_\+t} $\ast$L\+IF)
\begin{DoxyCompactList}\small\item\em Rewind L\+IF directory Note readdir pre-\/increments the directory pointer index so we start at -\/1. \end{DoxyCompactList}\item 
\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE} void \hyperlink{lifutils_8c_a1cc44034801a758d64625c15810b42ab}{lif\+\_\+closedir} (\hyperlink{structlif__t}{lif\+\_\+t} $\ast$L\+IF)
\begin{DoxyCompactList}\small\item\em Close L\+IF directory clear and free \hyperlink{structlif__t}{lif\+\_\+t} structure. \end{DoxyCompactList}\item 
\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE} int \hyperlink{lifutils_8c_aafa159b3cfd19fd13546dfffe86f7b4d}{lif\+\_\+checkdirindex} (\hyperlink{structlif__t}{lif\+\_\+t} $\ast$L\+IF, int index)
\begin{DoxyCompactList}\small\item\em Check directory index limits. \end{DoxyCompactList}\item 
\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE} int \hyperlink{lifutils_8c_ae82f40ed6588c230c0319f202f9484e5}{lif\+\_\+readdirindex} (\hyperlink{structlif__t}{lif\+\_\+t} $\ast$L\+IF, int index)
\begin{DoxyCompactList}\small\item\em Read L\+IF directory record number N. \end{DoxyCompactList}\item 
\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE} int \hyperlink{lifutils_8c_a9ea3982f8710265ac6eea14c6ea24b94}{lif\+\_\+writedirindex} (\hyperlink{structlif__t}{lif\+\_\+t} $\ast$L\+IF, int index)
\begin{DoxyCompactList}\small\item\em Write L\+IF drectory record number N. \end{DoxyCompactList}\item 
\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE} int \hyperlink{lifutils_8c_ada21b62e03559daceb095165769ba76d}{lif\+\_\+writedir\+E\+OF} (\hyperlink{structlif__t}{lif\+\_\+t} $\ast$L\+IF, int index)
\begin{DoxyCompactList}\small\item\em Write L\+IF drectory E\+OF. \end{DoxyCompactList}\item 
\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE} \hyperlink{structlifdir__t}{lifdir\+\_\+t} $\ast$ \hyperlink{lifutils_8c_a8d4632c74b663c5565e03fa81f3d13b0}{lif\+\_\+readdir} (\hyperlink{structlif__t}{lif\+\_\+t} $\ast$L\+IF)
\begin{DoxyCompactList}\small\item\em Read a directory records from L\+IF image advancind directory index. \end{DoxyCompactList}\item 
\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE} \hyperlink{structlif__t}{lif\+\_\+t} $\ast$ \hyperlink{lifutils_8c_aedfa0156b71f7b94060d74212acdf5c3}{lif\+\_\+updatefree} (\hyperlink{structlif__t}{lif\+\_\+t} $\ast$L\+IF)
\begin{DoxyCompactList}\small\item\em Update free space \mbox{[}in\mbox{]} $\ast$\+L\+IF\+: L\+IF structure. \end{DoxyCompactList}\item 
\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE} int \hyperlink{lifutils_8c_aa815e9770db054c7f53cf1dbe268e414}{lif\+\_\+newdir} (\hyperlink{structlif__t}{lif\+\_\+t} $\ast$L\+IF, long sectors)
\begin{DoxyCompactList}\small\item\em Allocate index of free directory record. \end{DoxyCompactList}\item 
\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE} \hyperlink{structlif__t}{lif\+\_\+t} $\ast$ \hyperlink{lifutils_8c_a982b5ca066312fb4912c15a002b0aeed}{lif\+\_\+open\+\_\+volume} (char $\ast$name, char $\ast$mode)
\begin{DoxyCompactList}\small\item\em Open L\+IF directory for reading. \end{DoxyCompactList}\item 
\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE} void \hyperlink{lifutils_8c_ab1cc4d2745277a057661a9403f87cafe}{lif\+\_\+dir} (char $\ast$lifimagename)
\begin{DoxyCompactList}\small\item\em Display a L\+IF image file directory. \end{DoxyCompactList}\item 
\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE} int \hyperlink{lifutils_8c_a3aa4f8a1fcdc71af87f471b9a4414415}{lif\+\_\+find\+\_\+file} (\hyperlink{structlif__t}{lif\+\_\+t} $\ast$L\+IF, char $\ast$liflabel)
\begin{DoxyCompactList}\small\item\em Find a L\+IF image file by name. \end{DoxyCompactList}\item 
\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE} int \hyperlink{lifutils_8c_a437c2155a777ed5be9d53e0491001751}{lif\+\_\+e010\+\_\+pad\+\_\+sector} (long offset, uint8\+\_\+t $\ast$wbuf)
\begin{DoxyCompactList}\small\item\em H\+P85 E010 A\+S\+C\+II L\+IF records ef \mbox{[}ff\mbox{]}$\ast$ = no more data in this sector df size \mbox{[}A\+S\+C\+II\mbox{]} = data must fit inside this sector cf size \mbox{[}A\+S\+C\+II\mbox{]} = split data accross sector boundry, \char`\"{}6f\char`\"{} record continues at start of next sector Note\+: The 6f header is I\+N\+S\+I\+DE the \char`\"{}cf\char`\"{} record and not included in the \char`\"{}cf\char`\"{} size value (yuck!) 6f size \mbox{[}A\+S\+C\+II\mbox{]} = split continue (always starts at sector boundry) df 00 00 ef \mbox{[}ff\mbox{]}$\ast$ = E\+OF (df size = 0) pad with \char`\"{}ef\char`\"{} and \char`\"{}ff\char`\"{} until sector end size = 16 bits L\+SB M\+SB. \end{DoxyCompactList}\item 
\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE} int \hyperlink{lifutils_8c_a41d5fbd0df0da5fb7f126aa76959c518}{lif\+\_\+ascii\+\_\+string\+\_\+to\+\_\+e010} (char $\ast$str, long offset, uint8\+\_\+t $\ast$wbuf)
\begin{DoxyCompactList}\small\item\em Convert an A\+S\+C\+II string into H\+P85 E010 format. \end{DoxyCompactList}\item 
\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE} long \hyperlink{lifutils_8c_ae63f3f2ff0ff20f2c286ea9a88577e55}{lif\+\_\+add\+\_\+ascii\+\_\+file\+\_\+as\+\_\+e010\+\_\+wrapper} (\hyperlink{structlif__t}{lif\+\_\+t} $\ast$L\+IF, uint32\+\_\+t offset, char $\ast$username)
\begin{DoxyCompactList}\small\item\em Add A\+S\+C\+II file as E010 data to L\+IF image -\/ or compute converted data size To find size of formatted result only, without writting, set L\+IF to N\+U\+LL. \end{DoxyCompactList}\item 
\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE} long \hyperlink{lifutils_8c_a41e5bf70103522d814831d085476359c}{lif\+\_\+add\+\_\+ascii\+\_\+file\+\_\+as\+\_\+e010} (char $\ast$lifimagename, char $\ast$lifname, char $\ast$userfile)
\begin{DoxyCompactList}\small\item\em Convert and add A\+S\+C\+II file to the L\+IF image as type E010 format The basename of the lifname, without extensions, is used as the L\+IF file name. \end{DoxyCompactList}\item 
\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE} int \hyperlink{lifutils_8c_a174f02d0e64e50ce40e692d6c3ce0af0}{lif\+\_\+extract\+\_\+e010\+\_\+as\+\_\+ascii} (char $\ast$lifimagename, char $\ast$lifname, char $\ast$username)
\begin{DoxyCompactList}\small\item\em Extract E010 type file from L\+IF image and save as user A\+S\+C\+II file. \end{DoxyCompactList}\item 
\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE} int \hyperlink{lifutils_8c_ad794aef9462a1b7c6822f6dcdb346680}{lif\+\_\+extract\+\_\+lif\+\_\+as\+\_\+lif} (char $\ast$lifimagename, char $\ast$lifname, char $\ast$username)
\begin{DoxyCompactList}\small\item\em Extract a file from L\+IF image entry as standalone L\+IF image. \end{DoxyCompactList}\item 
\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE} long \hyperlink{lifutils_8c_a240d782bc59f4d263d345318b94b66a5}{lif\+\_\+add\+\_\+lif\+\_\+file} (char $\ast$lifimagename, char $\ast$lifname, char $\ast$userfile)
\begin{DoxyCompactList}\small\item\em Add L\+IF file from another L\+IF image. \end{DoxyCompactList}\item 
\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE} int \hyperlink{lifutils_8c_a875b62c5b7f9c40d9aa9620ded12db84}{lif\+\_\+del\+\_\+file} (char $\ast$lifimagename, char $\ast$lifname)
\begin{DoxyCompactList}\small\item\em Delete L\+IF file in L\+IF image. \end{DoxyCompactList}\item 
\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE} int \hyperlink{lifutils_8c_a4f93e888b2ad255e5db96a9840d22d61}{lif\+\_\+rename\+\_\+file} (char $\ast$lifimagename, char $\ast$oldlifname, char $\ast$newlifname)
\begin{DoxyCompactList}\small\item\em Rename L\+IF file in L\+IF image. \end{DoxyCompactList}\item 
\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE} long \hyperlink{lifutils_8c_a88a6a829944a8acd4fa4152a79381c20}{lif\+\_\+create\+\_\+image} (char $\ast$lifimagename, char $\ast$liflabel, uint32\+\_\+t dirsectors, uint32\+\_\+t sectors)
\begin{DoxyCompactList}\small\item\em Create/\+Format a L\+IF new disk image This can take a while to run, about 1 min for 10,000,000 bytes. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
L\+IF file utilities. 

\begin{DoxyParagraph}{Copyright \copyright{} 2014-\/2017 Mike Gore, All rights reserved. G\+PL}

\end{DoxyParagraph}
\begin{DoxySeeAlso}{See also}
\href{http://github.com/magore/hp85disk}{\tt http\+://github.\+com/magore/hp85disk} 

\href{http://github.com/magore/hp85disk/COPYRIGHT.md}{\tt http\+://github.\+com/magore/hp85disk/\+C\+O\+P\+Y\+R\+I\+G\+H\+T.\+md} for Copyright details
\end{DoxySeeAlso}
\begin{DoxyParagraph}{Edit History}

\begin{DoxyItemize}
\item \mbox{[}1.\+0\mbox{]} \mbox{[}Mike Gore\mbox{]} Initial revision of file.
\end{DoxyItemize}
\end{DoxyParagraph}
\begin{DoxyVerb}LIF command help
  lif add lifimage lifname from_ascii_file
    Add ASCII file converted to E010 format to existing LIF image on SD card
      lif add /amigo1.lif TEST1 /test.bas
      lif add /amigo1.lif TREK85 /TREK85/TREK85.BAS
    Notes:
       Strings must be no longer then sector size - 3
       Any trailing "\n" and/or "\r" are coverted to "\n" when stored in LIF file

  lif addbin lifimage lifname from_lif_image
    Adding a binary LIF image files to another LIF image
    Examples 
      lif addbin /amigo1.lif TEST /test.lif
      lif addbin /amigo1.lif TREK85 /TREK85/trek.lif
    Notes about TREK85 in the examples
      Author: TREK85 port was done by Martin Hepperle
      https://groups.io/g/hpseries80/topic/star_trek_game_for_hp_85/4845241

  lif create lifimage liflabel directory_sectors total_sectors
    Create a new LIF image
    Example 
      lif create /amigo3.lif AMIGO3 15 1120
        This formats an LIF image file with 15 directory sectors and a length of 1120 (16 * 2 * 35) sectors

  lif del lifimage lifname
    Delete a file from LIF image on SD card
    Example
     lif del /amigo1.lif TREK85

  lif dir lifimage
    Directory listing of LIF image
  Example:
 <pre>
   lif dir amigo1.lif
   Volume:[AMIGO2] Date:[<EMPTY>]
   NAME         TYPE   START SECTOR        SIZE    RECSIZE   DATE
   HELLO       e020h            10h         512        256   <EMPTY>
   CIRCLE      e020h            12h         256        256   <EMPTY>
   GPIB-S      e020h            13h         512        256   <EMPTY>
   GPIB-T      e020h            15h        1536        256   <EMPTY>
   GPIB7       e020h            1bh         256        256   <EMPTY>
   AMIGO2      e020h            1ch         256        256   <EMPTY>
   TREK85      e010h            1dh       27615        256   Tue Jun 27 16:28:28 2017
   HELLO3      e010h            8bh         344        256   Sun Jun 18 18:13:24 2017
   TREK85B     e010h            8dh       27615        256   Tue Jun 27 16:28:28 2017

          9 Files
          0 Purged
        231 Used sectors
        873 Free sectors
   </pre>

  lif extract lifimage lifname to_ascii_file
    Extracts E010 file from LIF image converting to ASCII file on SD card
    Example
    lif extract /amigo1.lif HELLO3 /HELLO3.BAS

  lif extractbin lifimage llifname to_lif_image
    Extracts LIF file from a LIF image and saves it as new LIF image 
    Example
      lif extractbin /amigo1.lif HELLO3 /hello3.lif

  lif rename lifimage oldlifname newlifname
    Renames file in LIF image
    Example
      lif rename /amigo1.lif HELLO3 HELLO4
OPTIONAL - compile time add on
  lif td02lif image.td0 image.lif
    Convert TeleDIsk LIF encoded disk into pure LIF file
    Uses code from external HxCFloppyEmulator library to decode TELEDISK format
    The HxCFloppyEmulator library is Copyright (C) 2006-2014 Jean-Franâ–’ois DEL NERO
    See: https://github.com/jfdelnero/libhxcfe/tree/master/sources/loaders/teledisk_loader\end{DoxyVerb}


\subsection{Function Documentation}
\index{lifutils.\+c@{lifutils.\+c}!lif\+\_\+add\+\_\+ascii\+\_\+file\+\_\+as\+\_\+e010@{lif\+\_\+add\+\_\+ascii\+\_\+file\+\_\+as\+\_\+e010}}
\index{lif\+\_\+add\+\_\+ascii\+\_\+file\+\_\+as\+\_\+e010@{lif\+\_\+add\+\_\+ascii\+\_\+file\+\_\+as\+\_\+e010}!lifutils.\+c@{lifutils.\+c}}
\subsubsection[{\texorpdfstring{lif\+\_\+add\+\_\+ascii\+\_\+file\+\_\+as\+\_\+e010(char $\ast$lifimagename, char $\ast$lifname, char $\ast$userfile)}{lif_add_ascii_file_as_e010(char *lifimagename, char *lifname, char *userfile)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\+E\+M\+S\+P\+A\+CE} long lif\+\_\+add\+\_\+ascii\+\_\+file\+\_\+as\+\_\+e010 (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{lifimagename, }
\item[{char $\ast$}]{lifname, }
\item[{char $\ast$}]{userfile}
\end{DoxyParamCaption}
)}\hypertarget{lifutils_8c_a41e5bf70103522d814831d085476359c}{}\label{lifutils_8c_a41e5bf70103522d814831d085476359c}


Convert and add A\+S\+C\+II file to the L\+IF image as type E010 format The basename of the lifname, without extensions, is used as the L\+IF file name. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em lifimagename} & L\+IF image name \\
\hline
\mbox{\tt in}  & {\em lifname} & L\+IF file name \\
\hline
\mbox{\tt in}  & {\em userfile} & userfile name \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
size of data written into to L\+IF image, or -\/1 on error 
\end{DoxyReturn}


Definition at line 1974 of file lifutils.\+c.



Referenced by lif\+\_\+tests().

\index{lifutils.\+c@{lifutils.\+c}!lif\+\_\+add\+\_\+ascii\+\_\+file\+\_\+as\+\_\+e010\+\_\+wrapper@{lif\+\_\+add\+\_\+ascii\+\_\+file\+\_\+as\+\_\+e010\+\_\+wrapper}}
\index{lif\+\_\+add\+\_\+ascii\+\_\+file\+\_\+as\+\_\+e010\+\_\+wrapper@{lif\+\_\+add\+\_\+ascii\+\_\+file\+\_\+as\+\_\+e010\+\_\+wrapper}!lifutils.\+c@{lifutils.\+c}}
\subsubsection[{\texorpdfstring{lif\+\_\+add\+\_\+ascii\+\_\+file\+\_\+as\+\_\+e010\+\_\+wrapper(lif\+\_\+t $\ast$\+L\+I\+F, uint32\+\_\+t offset, char $\ast$username)}{lif_add_ascii_file_as_e010_wrapper(lif_t *LIF, uint32_t offset, char *username)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\+E\+M\+S\+P\+A\+CE} long lif\+\_\+add\+\_\+ascii\+\_\+file\+\_\+as\+\_\+e010\+\_\+wrapper (
\begin{DoxyParamCaption}
\item[{{\bf lif\+\_\+t} $\ast$}]{L\+IF, }
\item[{uint32\+\_\+t}]{offset, }
\item[{char $\ast$}]{username}
\end{DoxyParamCaption}
)}\hypertarget{lifutils_8c_ae63f3f2ff0ff20f2c286ea9a88577e55}{}\label{lifutils_8c_ae63f3f2ff0ff20f2c286ea9a88577e55}


Add A\+S\+C\+II file as E010 data to L\+IF image -\/ or compute converted data size To find size of formatted result only, without writting, set L\+IF to N\+U\+LL. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em userfile} & User A\+S\+C\+II file source \\
\hline
\mbox{\tt in}  & {\em $\ast$\+L\+IF} & Where to write file if set (not N\+U\+LL) \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
size of formatted result 
\end{DoxyReturn}


Definition at line 1879 of file lifutils.\+c.



Referenced by lif\+\_\+add\+\_\+ascii\+\_\+file\+\_\+as\+\_\+e010().

\index{lifutils.\+c@{lifutils.\+c}!lif\+\_\+add\+\_\+lif\+\_\+file@{lif\+\_\+add\+\_\+lif\+\_\+file}}
\index{lif\+\_\+add\+\_\+lif\+\_\+file@{lif\+\_\+add\+\_\+lif\+\_\+file}!lifutils.\+c@{lifutils.\+c}}
\subsubsection[{\texorpdfstring{lif\+\_\+add\+\_\+lif\+\_\+file(char $\ast$lifimagename, char $\ast$lifname, char $\ast$userfile)}{lif_add_lif_file(char *lifimagename, char *lifname, char *userfile)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\+E\+M\+S\+P\+A\+CE} long lif\+\_\+add\+\_\+lif\+\_\+file (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{lifimagename, }
\item[{char $\ast$}]{lifname, }
\item[{char $\ast$}]{userfile}
\end{DoxyParamCaption}
)}\hypertarget{lifutils_8c_a240d782bc59f4d263d345318b94b66a5}{}\label{lifutils_8c_a240d782bc59f4d263d345318b94b66a5}


Add L\+IF file from another L\+IF image. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em lifimagename} & L\+IF image name \\
\hline
\mbox{\tt in}  & {\em lifname} & L\+IF file name to copy file to \\
\hline
\mbox{\tt in}  & {\em userfile} & L\+IF mage name copy file from \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
size of data written into to L\+IF image, or -\/1 on error 
\end{DoxyReturn}


Definition at line 2356 of file lifutils.\+c.



Referenced by lif\+\_\+tests().

\index{lifutils.\+c@{lifutils.\+c}!lif\+\_\+ascii\+\_\+string\+\_\+to\+\_\+e010@{lif\+\_\+ascii\+\_\+string\+\_\+to\+\_\+e010}}
\index{lif\+\_\+ascii\+\_\+string\+\_\+to\+\_\+e010@{lif\+\_\+ascii\+\_\+string\+\_\+to\+\_\+e010}!lifutils.\+c@{lifutils.\+c}}
\subsubsection[{\texorpdfstring{lif\+\_\+ascii\+\_\+string\+\_\+to\+\_\+e010(char $\ast$str, long offset, uint8\+\_\+t $\ast$wbuf)}{lif_ascii_string_to_e010(char *str, long offset, uint8_t *wbuf)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\+E\+M\+S\+P\+A\+CE} int lif\+\_\+ascii\+\_\+string\+\_\+to\+\_\+e010 (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{str, }
\item[{long}]{offset, }
\item[{uint8\+\_\+t $\ast$}]{wbuf}
\end{DoxyParamCaption}
)}\hypertarget{lifutils_8c_a41d5fbd0df0da5fb7f126aa76959c518}{}\label{lifutils_8c_a41d5fbd0df0da5fb7f126aa76959c518}


Convert an A\+S\+C\+II string into H\+P85 E010 format. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em str} & A\+S\+C\+II string to write \\
\hline
\mbox{\tt in}  & {\em offset} & E010 data sector offset, only used in formatting wbuf with headers \\
\hline
\mbox{\tt in}  & {\em wbuf} & E010 data result \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
size of E010 data 
\end{DoxyReturn}
We A\+L\+W\+A\+YS pad a sector if\+: There is no room for a 0xdf single header
\begin{DoxyItemize}
\item OR -\/ Spliting a string takes more space then padding here (extra header) 
\end{DoxyItemize}

Definition at line 1786 of file lifutils.\+c.



Referenced by lif\+\_\+add\+\_\+ascii\+\_\+file\+\_\+as\+\_\+e010\+\_\+wrapper().

\index{lifutils.\+c@{lifutils.\+c}!lif\+\_\+\+B2S@{lif\+\_\+\+B2S}}
\index{lif\+\_\+\+B2S@{lif\+\_\+\+B2S}!lifutils.\+c@{lifutils.\+c}}
\subsubsection[{\texorpdfstring{lif\+\_\+\+B2\+S(uint8\+\_\+t $\ast$\+B, uint8\+\_\+t $\ast$name, int size)}{lif_B2S(uint8_t *B, uint8_t *name, int size)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\+E\+M\+S\+P\+A\+CE} int lif\+\_\+\+B2S (
\begin{DoxyParamCaption}
\item[{uint8\+\_\+t $\ast$}]{B, }
\item[{uint8\+\_\+t $\ast$}]{name, }
\item[{int}]{size}
\end{DoxyParamCaption}
)}\hypertarget{lifutils_8c_ab2f681c9cb11eefcb573ab80dc9d7633}{}\label{lifutils_8c_ab2f681c9cb11eefcb573ab80dc9d7633}


Convert L\+IF space padded string name into normal string. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em $\ast$B} & L\+IF name space padded \\
\hline
\mbox{\tt out}  & {\em $\ast$name} & string result with traling spaces removed \\
\hline
\mbox{\tt in}  & {\em size} & max size of name  1 if string i ok or 0 if bad characters were found \\
\hline
\end{DoxyParams}


Definition at line 401 of file lifutils.\+c.



Referenced by lif\+\_\+str2dir(), and lif\+\_\+str2vol().

\index{lifutils.\+c@{lifutils.\+c}!lif\+\_\+\+B\+C\+D2\+B\+IN@{lif\+\_\+\+B\+C\+D2\+B\+IN}}
\index{lif\+\_\+\+B\+C\+D2\+B\+IN@{lif\+\_\+\+B\+C\+D2\+B\+IN}!lifutils.\+c@{lifutils.\+c}}
\subsubsection[{\texorpdfstring{lif\+\_\+\+B\+C\+D2\+B\+I\+N(uint8\+\_\+t bin)}{lif_BCD2BIN(uint8_t bin)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\+E\+M\+S\+P\+A\+CE} int lif\+\_\+\+B\+C\+D2\+B\+IN (
\begin{DoxyParamCaption}
\item[{uint8\+\_\+t}]{bin}
\end{DoxyParamCaption}
)}\hypertarget{lifutils_8c_ae1cece4d7bf8e52e9fde4d1d836d4431}{}\label{lifutils_8c_ae1cece4d7bf8e52e9fde4d1d836d4431}


Convert B\+CD in the range 0 and $<$= 99 to B\+IN B\+CD format\+: each hex nibble has a digit 0 .. 9. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em data} & number to convert to binary \\
\hline
\end{DoxyParams}


Definition at line 588 of file lifutils.\+c.



Referenced by lif\+\_\+lifbcd2time().

\index{lifutils.\+c@{lifutils.\+c}!lif\+\_\+\+B\+I\+N2\+B\+CD@{lif\+\_\+\+B\+I\+N2\+B\+CD}}
\index{lif\+\_\+\+B\+I\+N2\+B\+CD@{lif\+\_\+\+B\+I\+N2\+B\+CD}!lifutils.\+c@{lifutils.\+c}}
\subsubsection[{\texorpdfstring{lif\+\_\+\+B\+I\+N2\+B\+C\+D(uint8\+\_\+t data)}{lif_BIN2BCD(uint8_t data)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\+E\+M\+S\+P\+A\+CE} uint8\+\_\+t lif\+\_\+\+B\+I\+N2\+B\+CD (
\begin{DoxyParamCaption}
\item[{uint8\+\_\+t}]{data}
\end{DoxyParamCaption}
)}\hypertarget{lifutils_8c_a74e4057cb326e5592b0c69f50eb68d02}{}\label{lifutils_8c_a74e4057cb326e5592b0c69f50eb68d02}


Convert number $>$= 0 and $<$= 99 to B\+CD. 

\begin{DoxyWarning}{Warning}
we assume the number is in range. B\+CD format\+: each hex nibble has a digit 0 .. 9 
\end{DoxyWarning}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em data} & number to convert. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
B\+CD value 
\end{DoxyReturn}


Definition at line 578 of file lifutils.\+c.



Referenced by lif\+\_\+time2lifbcd().

\index{lifutils.\+c@{lifutils.\+c}!lif\+\_\+bytes2sectors@{lif\+\_\+bytes2sectors}}
\index{lif\+\_\+bytes2sectors@{lif\+\_\+bytes2sectors}!lifutils.\+c@{lifutils.\+c}}
\subsubsection[{\texorpdfstring{lif\+\_\+bytes2sectors(uint32\+\_\+t bytes)}{lif_bytes2sectors(uint32_t bytes)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\+E\+M\+S\+P\+A\+CE} uint32\+\_\+t lif\+\_\+bytes2sectors (
\begin{DoxyParamCaption}
\item[{uint32\+\_\+t}]{bytes}
\end{DoxyParamCaption}
)}\hypertarget{lifutils_8c_ac41bc5c7424acf48bba35f8e552f10eb}{}\label{lifutils_8c_ac41bc5c7424acf48bba35f8e552f10eb}


Convert bytes into used sectors. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em bytes} & size in bytes \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
sectors 
\end{DoxyReturn}


Definition at line 1134 of file lifutils.\+c.



Referenced by lif\+\_\+add\+\_\+ascii\+\_\+file\+\_\+as\+\_\+e010(), lif\+\_\+check\+\_\+dir(), lif\+\_\+checkdirindex(), lif\+\_\+dir(), lif\+\_\+extract\+\_\+e010\+\_\+as\+\_\+ascii(), and lif\+\_\+open\+\_\+volume().

\index{lifutils.\+c@{lifutils.\+c}!lif\+\_\+calloc@{lif\+\_\+calloc}}
\index{lif\+\_\+calloc@{lif\+\_\+calloc}!lifutils.\+c@{lifutils.\+c}}
\subsubsection[{\texorpdfstring{lif\+\_\+calloc(long size)}{lif_calloc(long size)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\+E\+M\+S\+P\+A\+CE} void$\ast$ lif\+\_\+calloc (
\begin{DoxyParamCaption}
\item[{long}]{size}
\end{DoxyParamCaption}
)}\hypertarget{lifutils_8c_aca73842308f6e7769da01bd0cc10a10e}{}\label{lifutils_8c_aca73842308f6e7769da01bd0cc10a10e}


Allocate and clear memory Displays message on errors. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em size} & size of memory to allocate \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
pointer to allocated memory 
\end{DoxyReturn}


Definition at line 232 of file lifutils.\+c.



Referenced by lif\+\_\+create\+\_\+volume(), lif\+\_\+open\+\_\+volume(), lif\+\_\+stralloc(), and lif\+\_\+td02lif().

\index{lifutils.\+c@{lifutils.\+c}!lif\+\_\+chars@{lif\+\_\+chars}}
\index{lif\+\_\+chars@{lif\+\_\+chars}!lifutils.\+c@{lifutils.\+c}}
\subsubsection[{\texorpdfstring{lif\+\_\+chars(int c, int index)}{lif_chars(int c, int index)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\+E\+M\+S\+P\+A\+CE} int lif\+\_\+chars (
\begin{DoxyParamCaption}
\item[{int}]{c, }
\item[{int}]{index}
\end{DoxyParamCaption}
)}\hypertarget{lifutils_8c_af125780fc6bbe395b4288aeffb8ed013}{}\label{lifutils_8c_af125780fc6bbe395b4288aeffb8ed013}


Check if characters in a L\+IF volume or L\+IF file name are valid. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em c} & character to test \\
\hline
\mbox{\tt in}  & {\em index} & index of character in volume or file name  c (optionally upper cased) or 0 if no match \\
\hline
\end{DoxyParams}


Definition at line 380 of file lifutils.\+c.



Referenced by lif\+\_\+\+B2\+S(), lif\+\_\+checkname(), and lif\+\_\+fixname().

\index{lifutils.\+c@{lifutils.\+c}!lif\+\_\+check\+\_\+dir@{lif\+\_\+check\+\_\+dir}}
\index{lif\+\_\+check\+\_\+dir@{lif\+\_\+check\+\_\+dir}!lifutils.\+c@{lifutils.\+c}}
\subsubsection[{\texorpdfstring{lif\+\_\+check\+\_\+dir(lif\+\_\+t $\ast$\+L\+I\+F)}{lif_check_dir(lif_t *LIF)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\+E\+M\+S\+P\+A\+CE} int lif\+\_\+check\+\_\+dir (
\begin{DoxyParamCaption}
\item[{{\bf lif\+\_\+t} $\ast$}]{L\+IF}
\end{DoxyParamCaption}
)}\hypertarget{lifutils_8c_a4a037ce3b854d7f5cfd31aff61810cd4}{}\label{lifutils_8c_a4a037ce3b854d7f5cfd31aff61810cd4}


Validate Directory record values We only do basic out of bounds tests for this record Purged or E\+OF directory records are N\+OT checked and always return 1. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em $\ast$\+L\+IF} & Image structure \\
\hline
\mbox{\tt in}  & {\em debug} & dispaly diagostice messages \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
1 of ok, 0 on eeror 
\end{DoxyReturn}


Definition at line 851 of file lifutils.\+c.



Referenced by lif\+\_\+readdirindex(), lif\+\_\+writedirindex(), and td02lif\+\_\+track().

\index{lifutils.\+c@{lifutils.\+c}!lif\+\_\+check\+\_\+volume@{lif\+\_\+check\+\_\+volume}}
\index{lif\+\_\+check\+\_\+volume@{lif\+\_\+check\+\_\+volume}!lifutils.\+c@{lifutils.\+c}}
\subsubsection[{\texorpdfstring{lif\+\_\+check\+\_\+volume(lif\+\_\+t $\ast$\+L\+I\+F)}{lif_check_volume(lif_t *LIF)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\+E\+M\+S\+P\+A\+CE} int lif\+\_\+check\+\_\+volume (
\begin{DoxyParamCaption}
\item[{{\bf lif\+\_\+t} $\ast$}]{L\+IF}
\end{DoxyParamCaption}
)}\hypertarget{lifutils_8c_a86bb283b68ec39b17f1f35e03d1dc34d}{}\label{lifutils_8c_a86bb283b68ec39b17f1f35e03d1dc34d}


Check Volume Table for values in range. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em $\ast$\+L\+IF} & Image structure \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
1 of ok, 0 on eeror 
\end{DoxyReturn}


Definition at line 775 of file lifutils.\+c.



Referenced by lif\+\_\+create\+\_\+volume(), lif\+\_\+open\+\_\+volume(), and td02lif\+\_\+track().

\index{lifutils.\+c@{lifutils.\+c}!lif\+\_\+checkdirindex@{lif\+\_\+checkdirindex}}
\index{lif\+\_\+checkdirindex@{lif\+\_\+checkdirindex}!lifutils.\+c@{lifutils.\+c}}
\subsubsection[{\texorpdfstring{lif\+\_\+checkdirindex(lif\+\_\+t $\ast$\+L\+I\+F, int index)}{lif_checkdirindex(lif_t *LIF, int index)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\+E\+M\+S\+P\+A\+CE} int lif\+\_\+checkdirindex (
\begin{DoxyParamCaption}
\item[{{\bf lif\+\_\+t} $\ast$}]{L\+IF, }
\item[{int}]{index}
\end{DoxyParamCaption}
)}\hypertarget{lifutils_8c_aafa159b3cfd19fd13546dfffe86f7b4d}{}\label{lifutils_8c_aafa159b3cfd19fd13546dfffe86f7b4d}


Check directory index limits. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em $\ast$\+L\+IF} & L\+IF Volume/\+Diractoy structure \\
\hline
\mbox{\tt in}  & {\em index} & directory index \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
1 inside, 0 outside 
\end{DoxyReturn}


Definition at line 1168 of file lifutils.\+c.



Referenced by lif\+\_\+readdirindex(), and lif\+\_\+writedirindex().

\index{lifutils.\+c@{lifutils.\+c}!lif\+\_\+checkname@{lif\+\_\+checkname}}
\index{lif\+\_\+checkname@{lif\+\_\+checkname}!lifutils.\+c@{lifutils.\+c}}
\subsubsection[{\texorpdfstring{lif\+\_\+checkname(char $\ast$name)}{lif_checkname(char *name)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\+E\+M\+S\+P\+A\+CE} int lif\+\_\+checkname (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{name}
\end{DoxyParamCaption}
)}\hypertarget{lifutils_8c_a3f32a48a31e8fa225a2e5d72ffc969e6}{}\label{lifutils_8c_a3f32a48a31e8fa225a2e5d72ffc969e6}


Check volume if name or directory name is valid. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em $\ast$name} & name to test  1 if the string is ok or 0 if invalid L\+IF name characters on input string \\
\hline
\end{DoxyParams}


Definition at line 422 of file lifutils.\+c.



Referenced by lif\+\_\+check\+\_\+dir(), lif\+\_\+check\+\_\+volume(), lif\+\_\+find\+\_\+file(), and lif\+\_\+rename\+\_\+file().

\index{lifutils.\+c@{lifutils.\+c}!lif\+\_\+close\+\_\+volume@{lif\+\_\+close\+\_\+volume}}
\index{lif\+\_\+close\+\_\+volume@{lif\+\_\+close\+\_\+volume}!lifutils.\+c@{lifutils.\+c}}
\subsubsection[{\texorpdfstring{lif\+\_\+close\+\_\+volume(lif\+\_\+t $\ast$\+L\+I\+F)}{lif_close_volume(lif_t *LIF)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\+E\+M\+S\+P\+A\+CE} void lif\+\_\+close\+\_\+volume (
\begin{DoxyParamCaption}
\item[{{\bf lif\+\_\+t} $\ast$}]{L\+IF}
\end{DoxyParamCaption}
)}\hypertarget{lifutils_8c_aeaf5399e472155070399f492a32a4326}{}\label{lifutils_8c_aeaf5399e472155070399f492a32a4326}


Free L\+IF structure and close any files. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em $\ast$\+L\+IF} & pointer to L\+IF Volume/\+Directoy structure \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}


Definition at line 1112 of file lifutils.\+c.



Referenced by lif\+\_\+closedir(), lif\+\_\+create\+\_\+image(), lif\+\_\+create\+\_\+volume(), and lif\+\_\+td02lif().

\index{lifutils.\+c@{lifutils.\+c}!lif\+\_\+closedir@{lif\+\_\+closedir}}
\index{lif\+\_\+closedir@{lif\+\_\+closedir}!lifutils.\+c@{lifutils.\+c}}
\subsubsection[{\texorpdfstring{lif\+\_\+closedir(lif\+\_\+t $\ast$\+L\+I\+F)}{lif_closedir(lif_t *LIF)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\+E\+M\+S\+P\+A\+CE} void lif\+\_\+closedir (
\begin{DoxyParamCaption}
\item[{{\bf lif\+\_\+t} $\ast$}]{L\+IF}
\end{DoxyParamCaption}
)}\hypertarget{lifutils_8c_a1cc44034801a758d64625c15810b42ab}{}\label{lifutils_8c_a1cc44034801a758d64625c15810b42ab}


Close L\+IF directory clear and free \hyperlink{structlif__t}{lif\+\_\+t} structure. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em $\ast$\+L\+IF} & pointer to L\+IF Volume/\+Directoy structure \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 on sucesss, -\/1 on error 
\end{DoxyReturn}


Definition at line 1158 of file lifutils.\+c.



Referenced by lif\+\_\+add\+\_\+ascii\+\_\+file\+\_\+as\+\_\+e010(), lif\+\_\+add\+\_\+lif\+\_\+file(), lif\+\_\+create\+\_\+volume(), lif\+\_\+del\+\_\+file(), lif\+\_\+dir(), lif\+\_\+extract\+\_\+e010\+\_\+as\+\_\+ascii(), lif\+\_\+extract\+\_\+lif\+\_\+as\+\_\+lif(), lif\+\_\+open\+\_\+volume(), lif\+\_\+rename\+\_\+file(), and lif\+\_\+updatefree().

\index{lifutils.\+c@{lifutils.\+c}!lif\+\_\+create\+\_\+image@{lif\+\_\+create\+\_\+image}}
\index{lif\+\_\+create\+\_\+image@{lif\+\_\+create\+\_\+image}!lifutils.\+c@{lifutils.\+c}}
\subsubsection[{\texorpdfstring{lif\+\_\+create\+\_\+image(char $\ast$lifimagename, char $\ast$liflabel, uint32\+\_\+t dirsectors, uint32\+\_\+t sectors)}{lif_create_image(char *lifimagename, char *liflabel, uint32_t dirsectors, uint32_t sectors)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\+E\+M\+S\+P\+A\+CE} long lif\+\_\+create\+\_\+image (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{lifimagename, }
\item[{char $\ast$}]{liflabel, }
\item[{uint32\+\_\+t}]{dirsectors, }
\item[{uint32\+\_\+t}]{sectors}
\end{DoxyParamCaption}
)}\hypertarget{lifutils_8c_a88a6a829944a8acd4fa4152a79381c20}{}\label{lifutils_8c_a88a6a829944a8acd4fa4152a79381c20}


Create/\+Format a L\+IF new disk image This can take a while to run, about 1 min for 10,000,000 bytes. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em lifimagename} & L\+IF disk image name \\
\hline
\mbox{\tt in}  & {\em liflabel} & L\+IF Volume Label name \\
\hline
\mbox{\tt in}  & {\em dirsectors} & Number of L\+IF directory sectors \\
\hline
\mbox{\tt in}  & {\em sectors} & total disk image size in sectors \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
bytes writting to disk image 
\end{DoxyReturn}


Definition at line 2603 of file lifutils.\+c.



Referenced by format\+\_\+drives(), and lif\+\_\+tests().

\index{lifutils.\+c@{lifutils.\+c}!lif\+\_\+create\+\_\+volume@{lif\+\_\+create\+\_\+volume}}
\index{lif\+\_\+create\+\_\+volume@{lif\+\_\+create\+\_\+volume}!lifutils.\+c@{lifutils.\+c}}
\subsubsection[{\texorpdfstring{lif\+\_\+create\+\_\+volume(char $\ast$imagename, char $\ast$liflabel, long dirstart, long dirsectors, long filesectors)}{lif_create_volume(char *imagename, char *liflabel, long dirstart, long dirsectors, long filesectors)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\+E\+M\+S\+P\+A\+CE} {\bf lif\+\_\+t}$\ast$ lif\+\_\+create\+\_\+volume (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{imagename, }
\item[{char $\ast$}]{liflabel, }
\item[{long}]{dirstart, }
\item[{long}]{dirsectors, }
\item[{long}]{filesectors}
\end{DoxyParamCaption}
)}\hypertarget{lifutils_8c_a40173cedac7bb1b0b9f7e2902d76c3b8}{}\label{lifutils_8c_a40173cedac7bb1b0b9f7e2902d76c3b8}


Create L\+IF image with Volume, Directory and optional empty filespace. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em imagename} & Image name \\
\hline
\mbox{\tt in}  & {\em liflabel} & Volume Label \\
\hline
\mbox{\tt in}  & {\em dirstart} & Directory start sector \\
\hline
\mbox{\tt in}  & {\em dirsectors} & Directory sectors \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
pointer to L\+IF structure 
\end{DoxyReturn}
0 causes time to return the current date 

Definition at line 958 of file lifutils.\+c.



Referenced by lif\+\_\+create\+\_\+image(), and lif\+\_\+extract\+\_\+lif\+\_\+as\+\_\+lif().

\index{lifutils.\+c@{lifutils.\+c}!lif\+\_\+ctime\+\_\+gmt@{lif\+\_\+ctime\+\_\+gmt}}
\index{lif\+\_\+ctime\+\_\+gmt@{lif\+\_\+ctime\+\_\+gmt}!lifutils.\+c@{lifutils.\+c}}
\subsubsection[{\texorpdfstring{lif\+\_\+ctime\+\_\+gmt(time\+\_\+t $\ast$tp)}{lif_ctime_gmt(time_t *tp)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\+E\+M\+S\+P\+A\+CE} char$\ast$ lif\+\_\+ctime\+\_\+gmt (
\begin{DoxyParamCaption}
\item[{{\bf time\+\_\+t} $\ast$}]{tp}
\end{DoxyParamCaption}
)}\hypertarget{lifutils_8c_a66037d0bcbffc6000a59cc291cbef769}{}\label{lifutils_8c_a66037d0bcbffc6000a59cc291cbef769}


G\+MT version of P\+O\+S\+IX \hyperlink{time_8c_a77d6bba12950028852621634ffaf4835}{ctime()}. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em tp} & time\+\_\+t $\ast$ time input.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
buf\mbox{[}\mbox{]}.
\begin{DoxyItemize}
\item Example\+: \char`\"{}\+Thu Dec  8 21\+:45\+:05 E\+S\+T 2011\char`\"{}. 
\end{DoxyItemize}
\end{DoxyReturn}
\begin{DoxySeeAlso}{See also}
\hyperlink{time_8c_a77d6bba12950028852621634ffaf4835}{ctime()} 
\end{DoxySeeAlso}
\begin{DoxyWarning}{Warning}
result is overwritten on each call. 
\end{DoxyWarning}


Definition at line 674 of file lifutils.\+c.



Referenced by lif\+\_\+lifbcd2timestr().

\index{lifutils.\+c@{lifutils.\+c}!lif\+\_\+del\+\_\+file@{lif\+\_\+del\+\_\+file}}
\index{lif\+\_\+del\+\_\+file@{lif\+\_\+del\+\_\+file}!lifutils.\+c@{lifutils.\+c}}
\subsubsection[{\texorpdfstring{lif\+\_\+del\+\_\+file(char $\ast$lifimagename, char $\ast$lifname)}{lif_del_file(char *lifimagename, char *lifname)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\+E\+M\+S\+P\+A\+CE} int lif\+\_\+del\+\_\+file (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{lifimagename, }
\item[{char $\ast$}]{lifname}
\end{DoxyParamCaption}
)}\hypertarget{lifutils_8c_a875b62c5b7f9c40d9aa9620ded12db84}{}\label{lifutils_8c_a875b62c5b7f9c40d9aa9620ded12db84}


Delete L\+IF file in L\+IF image. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em lifimagename} & L\+IF image name \\
\hline
\mbox{\tt in}  & {\em lifname} & L\+IF file name \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
1 if deleted, 0 if not found, -\/1 error 
\end{DoxyReturn}


Definition at line 2477 of file lifutils.\+c.



Referenced by lif\+\_\+tests().

\index{lifutils.\+c@{lifutils.\+c}!lif\+\_\+dir@{lif\+\_\+dir}}
\index{lif\+\_\+dir@{lif\+\_\+dir}!lifutils.\+c@{lifutils.\+c}}
\subsubsection[{\texorpdfstring{lif\+\_\+dir(char $\ast$lifimagename)}{lif_dir(char *lifimagename)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\+E\+M\+S\+P\+A\+CE} void lif\+\_\+dir (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{lifimagename}
\end{DoxyParamCaption}
)}\hypertarget{lifutils_8c_ab1cc4d2745277a057661a9403f87cafe}{}\label{lifutils_8c_ab1cc4d2745277a057661a9403f87cafe}


Display a L\+IF image file directory. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em lifimagename} & L\+IF disk image name \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
-\/1 on error or number of files found 
\end{DoxyReturn}


Definition at line 1607 of file lifutils.\+c.



Referenced by lif\+\_\+td02lif(), and lif\+\_\+tests().

\index{lifutils.\+c@{lifutils.\+c}!lif\+\_\+dir2str@{lif\+\_\+dir2str}}
\index{lif\+\_\+dir2str@{lif\+\_\+dir2str}!lifutils.\+c@{lifutils.\+c}}
\subsubsection[{\texorpdfstring{lif\+\_\+dir2str(lif\+\_\+t $\ast$\+L\+I\+F, uint8\+\_\+t $\ast$\+B)}{lif_dir2str(lif_t *LIF, uint8_t *B)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\+E\+M\+S\+P\+A\+CE} void lif\+\_\+dir2str (
\begin{DoxyParamCaption}
\item[{{\bf lif\+\_\+t} $\ast$}]{L\+IF, }
\item[{uint8\+\_\+t $\ast$}]{B}
\end{DoxyParamCaption}
)}\hypertarget{lifutils_8c_a38bbbf82814835350f636cf16427ac89}{}\label{lifutils_8c_a38bbbf82814835350f636cf16427ac89}


Convert L\+IF directory records into byte vector. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em $\ast$\+L\+IF} & L\+IF image pointer \\
\hline
\mbox{\tt out}  & {\em B} & byte vector to pack data into \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}


Definition at line 543 of file lifutils.\+c.



Referenced by lif\+\_\+create\+\_\+volume(), and lif\+\_\+writedirindex().

\index{lifutils.\+c@{lifutils.\+c}!lif\+\_\+dir\+\_\+clear@{lif\+\_\+dir\+\_\+clear}}
\index{lif\+\_\+dir\+\_\+clear@{lif\+\_\+dir\+\_\+clear}!lifutils.\+c@{lifutils.\+c}}
\subsubsection[{\texorpdfstring{lif\+\_\+dir\+\_\+clear(lif\+\_\+t $\ast$\+L\+I\+F)}{lif_dir_clear(lif_t *LIF)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\+E\+M\+S\+P\+A\+CE} void lif\+\_\+dir\+\_\+clear (
\begin{DoxyParamCaption}
\item[{{\bf lif\+\_\+t} $\ast$}]{L\+IF}
\end{DoxyParamCaption}
)}\hypertarget{lifutils_8c_a29c92c7454bad4eb13e9f7ff89995fe2}{}\label{lifutils_8c_a29c92c7454bad4eb13e9f7ff89995fe2}


Clear \hyperlink{structDIR}{D\+IR} part of L\+IF structure. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em $\ast$\+L\+IF} & pointer to L\+IF structure \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}


Definition at line 722 of file lifutils.\+c.



Referenced by lif\+\_\+create\+\_\+volume(), lif\+\_\+newdir(), and lif\+\_\+writedir\+E\+O\+F().

\index{lifutils.\+c@{lifutils.\+c}!lif\+\_\+dump\+\_\+vol@{lif\+\_\+dump\+\_\+vol}}
\index{lif\+\_\+dump\+\_\+vol@{lif\+\_\+dump\+\_\+vol}!lifutils.\+c@{lifutils.\+c}}
\subsubsection[{\texorpdfstring{lif\+\_\+dump\+\_\+vol(lif\+\_\+t $\ast$\+L\+I\+F, char $\ast$msg)}{lif_dump_vol(lif_t *LIF, char *msg)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\+E\+M\+S\+P\+A\+CE} void lif\+\_\+dump\+\_\+vol (
\begin{DoxyParamCaption}
\item[{{\bf lif\+\_\+t} $\ast$}]{L\+IF, }
\item[{char $\ast$}]{msg}
\end{DoxyParamCaption}
)}\hypertarget{lifutils_8c_a5c2eb20c1c8f59cae0845a564b5c95db}{}\label{lifutils_8c_a5c2eb20c1c8f59cae0845a564b5c95db}


Dump L\+IF struture data for debugging. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em $\ast$\+L\+IF} & pointer to L\+IF structure \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}


Definition at line 740 of file lifutils.\+c.



Referenced by lif\+\_\+add\+\_\+ascii\+\_\+file\+\_\+as\+\_\+e010(), lif\+\_\+checkdirindex(), lif\+\_\+create\+\_\+volume(), lif\+\_\+readdirindex(), lif\+\_\+writedirindex(), and td02lif\+\_\+track().

\index{lifutils.\+c@{lifutils.\+c}!lif\+\_\+e010\+\_\+pad\+\_\+sector@{lif\+\_\+e010\+\_\+pad\+\_\+sector}}
\index{lif\+\_\+e010\+\_\+pad\+\_\+sector@{lif\+\_\+e010\+\_\+pad\+\_\+sector}!lifutils.\+c@{lifutils.\+c}}
\subsubsection[{\texorpdfstring{lif\+\_\+e010\+\_\+pad\+\_\+sector(long offset, uint8\+\_\+t $\ast$wbuf)}{lif_e010_pad_sector(long offset, uint8_t *wbuf)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\+E\+M\+S\+P\+A\+CE} int lif\+\_\+e010\+\_\+pad\+\_\+sector (
\begin{DoxyParamCaption}
\item[{long}]{offset, }
\item[{uint8\+\_\+t $\ast$}]{wbuf}
\end{DoxyParamCaption}
)}\hypertarget{lifutils_8c_a437c2155a777ed5be9d53e0491001751}{}\label{lifutils_8c_a437c2155a777ed5be9d53e0491001751}


H\+P85 E010 A\+S\+C\+II L\+IF records ef \mbox{[}ff\mbox{]}$\ast$ = no more data in this sector df size \mbox{[}A\+S\+C\+II\mbox{]} = data must fit inside this sector cf size \mbox{[}A\+S\+C\+II\mbox{]} = split data accross sector boundry, \char`\"{}6f\char`\"{} record continues at start of next sector Note\+: The 6f header is I\+N\+S\+I\+DE the \char`\"{}cf\char`\"{} record and not included in the \char`\"{}cf\char`\"{} size value (yuck!) 6f size \mbox{[}A\+S\+C\+II\mbox{]} = split continue (always starts at sector boundry) df 00 00 ef \mbox{[}ff\mbox{]}$\ast$ = E\+OF (df size = 0) pad with \char`\"{}ef\char`\"{} and \char`\"{}ff\char`\"{} until sector end size = 16 bits L\+SB M\+SB. 

Example\+: 000080e0 \+: 4b 7c 22 0d cf 29 00 31 34 20 44 49 53 50 20 22 \+: K$\vert$\char`\"{}..).\+14 D\+I\+S\+P \char`\"{} 000080f0 \+: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 5f \+: \+\_\+ 00008100 \+: 6f 10 00 5f 5f 5f 5f 5f 5f 5f 5f 5f 5f 5f 5f 5f \+: o..\+\_\+\+\_\+\+\_\+\+\_\+\+\_\+\+\_\+\+\_\+\+\_\+\+\_\+\+\_\+\+\_\+\+\_\+\+\_\+ 00008110 \+: 5f 22 0d df 2b 00 31 35 20 44 49 53 50 20 22 20 \+: \+\_\+\char`\"{}..+.\+15 D\+I\+S\+P \char`\"{}

cf 29 00 (19 is to sector end) (new sector start with 6F 10 00 (10 is remainder) So 29 = 19 and 10 (yuck!)P\+AD wbuf to sector boundry 
\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em offset} & sector offset \\
\hline
\mbox{\tt in}  & {\em wbuf} & E010 P\+AD data \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
size of E010 P\+AD data 
\end{DoxyReturn}


Definition at line 1748 of file lifutils.\+c.



Referenced by lif\+\_\+add\+\_\+ascii\+\_\+file\+\_\+as\+\_\+e010\+\_\+wrapper(), and lif\+\_\+ascii\+\_\+string\+\_\+to\+\_\+e010().

\index{lifutils.\+c@{lifutils.\+c}!lif\+\_\+extract\+\_\+e010\+\_\+as\+\_\+ascii@{lif\+\_\+extract\+\_\+e010\+\_\+as\+\_\+ascii}}
\index{lif\+\_\+extract\+\_\+e010\+\_\+as\+\_\+ascii@{lif\+\_\+extract\+\_\+e010\+\_\+as\+\_\+ascii}!lifutils.\+c@{lifutils.\+c}}
\subsubsection[{\texorpdfstring{lif\+\_\+extract\+\_\+e010\+\_\+as\+\_\+ascii(char $\ast$lifimagename, char $\ast$lifname, char $\ast$username)}{lif_extract_e010_as_ascii(char *lifimagename, char *lifname, char *username)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\+E\+M\+S\+P\+A\+CE} int lif\+\_\+extract\+\_\+e010\+\_\+as\+\_\+ascii (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{lifimagename, }
\item[{char $\ast$}]{lifname, }
\item[{char $\ast$}]{username}
\end{DoxyParamCaption}
)}\hypertarget{lifutils_8c_a174f02d0e64e50ce40e692d6c3ce0af0}{}\label{lifutils_8c_a174f02d0e64e50ce40e692d6c3ce0af0}


Extract E010 type file from L\+IF image and save as user A\+S\+C\+II file. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em lifimagename} & L\+IF disk image name \\
\hline
\mbox{\tt in}  & {\em lifname} & name of file in L\+IF image \\
\hline
\mbox{\tt in}  & {\em username} & name to call the extracted image \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
1 on sucess or 0 on error 
\end{DoxyReturn}


Definition at line 2080 of file lifutils.\+c.



Referenced by lif\+\_\+tests().

\index{lifutils.\+c@{lifutils.\+c}!lif\+\_\+extract\+\_\+lif\+\_\+as\+\_\+lif@{lif\+\_\+extract\+\_\+lif\+\_\+as\+\_\+lif}}
\index{lif\+\_\+extract\+\_\+lif\+\_\+as\+\_\+lif@{lif\+\_\+extract\+\_\+lif\+\_\+as\+\_\+lif}!lifutils.\+c@{lifutils.\+c}}
\subsubsection[{\texorpdfstring{lif\+\_\+extract\+\_\+lif\+\_\+as\+\_\+lif(char $\ast$lifimagename, char $\ast$lifname, char $\ast$username)}{lif_extract_lif_as_lif(char *lifimagename, char *lifname, char *username)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\+E\+M\+S\+P\+A\+CE} int lif\+\_\+extract\+\_\+lif\+\_\+as\+\_\+lif (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{lifimagename, }
\item[{char $\ast$}]{lifname, }
\item[{char $\ast$}]{username}
\end{DoxyParamCaption}
)}\hypertarget{lifutils_8c_ad794aef9462a1b7c6822f6dcdb346680}{}\label{lifutils_8c_ad794aef9462a1b7c6822f6dcdb346680}


Extract a file from L\+IF image entry as standalone L\+IF image. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em lifimagename} & L\+IF disk image name to extract file from \\
\hline
\mbox{\tt in}  & {\em lifname} & name of file in L\+IF image we want to extract \\
\hline
\mbox{\tt in}  & {\em username} & new L\+IF file to create \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
1 on sucess or 0 on error 
\end{DoxyReturn}


Definition at line 2257 of file lifutils.\+c.



Referenced by lif\+\_\+tests().

\index{lifutils.\+c@{lifutils.\+c}!lif\+\_\+find\+\_\+file@{lif\+\_\+find\+\_\+file}}
\index{lif\+\_\+find\+\_\+file@{lif\+\_\+find\+\_\+file}!lifutils.\+c@{lifutils.\+c}}
\subsubsection[{\texorpdfstring{lif\+\_\+find\+\_\+file(lif\+\_\+t $\ast$\+L\+I\+F, char $\ast$liflabel)}{lif_find_file(lif_t *LIF, char *liflabel)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\+E\+M\+S\+P\+A\+CE} int lif\+\_\+find\+\_\+file (
\begin{DoxyParamCaption}
\item[{{\bf lif\+\_\+t} $\ast$}]{L\+IF, }
\item[{char $\ast$}]{liflabel}
\end{DoxyParamCaption}
)}\hypertarget{lifutils_8c_a3aa4f8a1fcdc71af87f471b9a4414415}{}\label{lifutils_8c_a3aa4f8a1fcdc71af87f471b9a4414415}


Find a L\+IF image file by name. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em $\ast$\+L\+IF} & directory pointer \\
\hline
\mbox{\tt in}  & {\em liflabel} & File name in L\+IF image \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Directory index of record 
\end{DoxyReturn}


Definition at line 1687 of file lifutils.\+c.



Referenced by lif\+\_\+add\+\_\+lif\+\_\+file(), lif\+\_\+del\+\_\+file(), lif\+\_\+extract\+\_\+e010\+\_\+as\+\_\+ascii(), lif\+\_\+extract\+\_\+lif\+\_\+as\+\_\+lif(), and lif\+\_\+rename\+\_\+file().

\index{lifutils.\+c@{lifutils.\+c}!lif\+\_\+fixname@{lif\+\_\+fixname}}
\index{lif\+\_\+fixname@{lif\+\_\+fixname}!lifutils.\+c@{lifutils.\+c}}
\subsubsection[{\texorpdfstring{lif\+\_\+fixname(uint8\+\_\+t $\ast$\+B, char $\ast$name, int size)}{lif_fixname(uint8_t *B, char *name, int size)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\+E\+M\+S\+P\+A\+CE} int lif\+\_\+fixname (
\begin{DoxyParamCaption}
\item[{uint8\+\_\+t $\ast$}]{B, }
\item[{char $\ast$}]{name, }
\item[{int}]{size}
\end{DoxyParamCaption}
)}\hypertarget{lifutils_8c_a05e815994fb0e328a72e3a514428f07f}{}\label{lifutils_8c_a05e815994fb0e328a72e3a514428f07f}


Convert name into a valid L\+IF name Only use the \hyperlink{posix_8c_a4d3dfaf2f5a63e2e4eaa128477a9b5e7}{basename()} part of the string and remove any file name extentions L\+IF names may have only these characters\+: \mbox{[}A-\/Z\mbox{]}\mbox{[}A-\/\+Z0-\/09\+\_\+\mbox{]}+ L\+IF names are converted to upper case L\+IF names are padded at the end with spaces Any invalid input characters are converted into spaces. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt out}  & {\em $\ast$B} & output L\+IF string \\
\hline
\mbox{\tt in}  & {\em $\ast$name} & input string \\
\hline
\mbox{\tt in}  & {\em size} & maximum size of output string \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
length of result 
\end{DoxyReturn}


Definition at line 463 of file lifutils.\+c.



Referenced by lif\+\_\+add\+\_\+ascii\+\_\+file\+\_\+as\+\_\+e010(), lif\+\_\+create\+\_\+volume(), and lif\+\_\+rename\+\_\+file().

\index{lifutils.\+c@{lifutils.\+c}!lif\+\_\+free@{lif\+\_\+free}}
\index{lif\+\_\+free@{lif\+\_\+free}!lifutils.\+c@{lifutils.\+c}}
\subsubsection[{\texorpdfstring{lif\+\_\+free(uint8\+\_\+t $\ast$p)}{lif_free(uint8_t *p)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\+E\+M\+S\+P\+A\+CE} void lif\+\_\+free (
\begin{DoxyParamCaption}
\item[{uint8\+\_\+t $\ast$}]{p}
\end{DoxyParamCaption}
)}\hypertarget{lifutils_8c_a3ae4c14ae153d01c29b10c6a4ee5f3af}{}\label{lifutils_8c_a3ae4c14ae153d01c29b10c6a4ee5f3af}


Free allocated memory Displays message on errors. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em p} & pointer to memory to free \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
pointer to allocated memory 
\end{DoxyReturn}


Definition at line 245 of file lifutils.\+c.

\index{lifutils.\+c@{lifutils.\+c}!lif\+\_\+help@{lif\+\_\+help}}
\index{lif\+\_\+help@{lif\+\_\+help}!lifutils.\+c@{lifutils.\+c}}
\subsubsection[{\texorpdfstring{lif\+\_\+help()}{lif_help()}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\+E\+M\+S\+P\+A\+CE} void lif\+\_\+help (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}\hypertarget{lifutils_8c_a9fa8d82d9e4fc93e6ebfb1be2b781bc6}{}\label{lifutils_8c_a9fa8d82d9e4fc93e6ebfb1be2b781bc6}


Help Menu for User invoked G\+P\+IB functions and tasks See\+: int gpib\+\_\+tests(char $\ast$str) 

\begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}


Definition at line 108 of file lifutils.\+c.



Referenced by help(), and lif\+\_\+tests().

\index{lifutils.\+c@{lifutils.\+c}!lif\+\_\+image\+\_\+clear@{lif\+\_\+image\+\_\+clear}}
\index{lif\+\_\+image\+\_\+clear@{lif\+\_\+image\+\_\+clear}!lifutils.\+c@{lifutils.\+c}}
\subsubsection[{\texorpdfstring{lif\+\_\+image\+\_\+clear(lif\+\_\+t $\ast$\+L\+I\+F)}{lif_image_clear(lif_t *LIF)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\+E\+M\+S\+P\+A\+CE} void lif\+\_\+image\+\_\+clear (
\begin{DoxyParamCaption}
\item[{{\bf lif\+\_\+t} $\ast$}]{L\+IF}
\end{DoxyParamCaption}
)}\hypertarget{lifutils_8c_a4076e72afcb9beaca5886c5e7e83aed7}{}\label{lifutils_8c_a4076e72afcb9beaca5886c5e7e83aed7}


File seek with error message. 

Clear L\+IF structure 
\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em $\ast$\+L\+IF} & pointer to L\+IF structure \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}


Definition at line 712 of file lifutils.\+c.



Referenced by lif\+\_\+create\+\_\+volume(), and lif\+\_\+td02lif().

\index{lifutils.\+c@{lifutils.\+c}!lif\+\_\+lifbcd2time@{lif\+\_\+lifbcd2time}}
\index{lif\+\_\+lifbcd2time@{lif\+\_\+lifbcd2time}!lifutils.\+c@{lifutils.\+c}}
\subsubsection[{\texorpdfstring{lif\+\_\+lifbcd2time(uint8\+\_\+t $\ast$bcd)}{lif_lifbcd2time(uint8_t *bcd)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\+E\+M\+S\+P\+A\+CE} {\bf time\+\_\+t} lif\+\_\+lifbcd2time (
\begin{DoxyParamCaption}
\item[{uint8\+\_\+t $\ast$}]{bcd}
\end{DoxyParamCaption}
)}\hypertarget{lifutils_8c_a69b46ceeea3124d0810fc00f910ff342}{}\label{lifutils_8c_a69b46ceeea3124d0810fc00f910ff342}


convert B\+CD date into time\+\_\+t value The B\+CD year is only the lower 2 digits of the year So We assume that values $<$= 70 are years $>$= 2000 B\+CD Day and Month start at 1 If A\+LL B\+CD digits are 0 we return 0 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em $\ast$bcd} & packed 6 byte B\+CD L\+IF time YY MM DD HH MM SS \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
time\+\_\+t result or 0 if all bcd digits were 0 
\end{DoxyReturn}


Definition at line 633 of file lifutils.\+c.



Referenced by lif\+\_\+extract\+\_\+e010\+\_\+as\+\_\+ascii(), and lif\+\_\+lifbcd2timestr().

\index{lifutils.\+c@{lifutils.\+c}!lif\+\_\+lifbcd2timestr@{lif\+\_\+lifbcd2timestr}}
\index{lif\+\_\+lifbcd2timestr@{lif\+\_\+lifbcd2timestr}!lifutils.\+c@{lifutils.\+c}}
\subsubsection[{\texorpdfstring{lif\+\_\+lifbcd2timestr(uint8\+\_\+t $\ast$bcd)}{lif_lifbcd2timestr(uint8_t *bcd)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\+E\+M\+S\+P\+A\+CE} char$\ast$ lif\+\_\+lifbcd2timestr (
\begin{DoxyParamCaption}
\item[{uint8\+\_\+t $\ast$}]{bcd}
\end{DoxyParamCaption}
)}\hypertarget{lifutils_8c_a5ab27bae428e4b04e1c056f67f65c22f}{}\label{lifutils_8c_a5ab27bae428e4b04e1c056f67f65c22f}
convert B\+CD time into a date string The B\+CD year is only the lower 2 digits of the year So We assume that values $<$= 70 are years $>$= 2000 B\+CD Day and Month start at 1 If B\+CD string is all zero we return $<$\+E\+M\+P\+T\+Y$>$ 
\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em $\ast$bcd} & pcked 6 byte B\+CD L\+IF time YY MM DD HH MM SS \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
string result 
\end{DoxyReturn}


Definition at line 693 of file lifutils.\+c.



Referenced by lif\+\_\+dir(), lif\+\_\+dump\+\_\+vol(), and td02lif\+\_\+track().

\index{lifutils.\+c@{lifutils.\+c}!lif\+\_\+newdir@{lif\+\_\+newdir}}
\index{lif\+\_\+newdir@{lif\+\_\+newdir}!lifutils.\+c@{lifutils.\+c}}
\subsubsection[{\texorpdfstring{lif\+\_\+newdir(lif\+\_\+t $\ast$\+L\+I\+F, long sectors)}{lif_newdir(lif_t *LIF, long sectors)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\+E\+M\+S\+P\+A\+CE} int lif\+\_\+newdir (
\begin{DoxyParamCaption}
\item[{{\bf lif\+\_\+t} $\ast$}]{L\+IF, }
\item[{long}]{sectors}
\end{DoxyParamCaption}
)}\hypertarget{lifutils_8c_aa815e9770db054c7f53cf1dbe268e414}{}\label{lifutils_8c_aa815e9770db054c7f53cf1dbe268e414}


Allocate index of free directory record. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em $\ast$\+L\+IF} & L\+IF pointer \\
\hline
\mbox{\tt in}  & {\em sectors} & try to find specified free space \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
index or free record or -\/1 on error 
\end{DoxyReturn}


Definition at line 1382 of file lifutils.\+c.



Referenced by lif\+\_\+add\+\_\+ascii\+\_\+file\+\_\+as\+\_\+e010(), and lif\+\_\+add\+\_\+lif\+\_\+file().

\index{lifutils.\+c@{lifutils.\+c}!lif\+\_\+open@{lif\+\_\+open}}
\index{lif\+\_\+open@{lif\+\_\+open}!lifutils.\+c@{lifutils.\+c}}
\subsubsection[{\texorpdfstring{lif\+\_\+open(char $\ast$name, char $\ast$mode)}{lif_open(char *name, char *mode)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\+E\+M\+S\+P\+A\+CE} {\bf F\+I\+LE}$\ast$ lif\+\_\+open (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{name, }
\item[{char $\ast$}]{mode}
\end{DoxyParamCaption}
)}\hypertarget{lifutils_8c_aca2921d0bba9c706ba27d6a3ae598140}{}\label{lifutils_8c_aca2921d0bba9c706ba27d6a3ae598140}


Open a file that must exist Displays message on errors. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em $\ast$name} & file name of L\+IF image \\
\hline
\mbox{\tt in}  & {\em $\ast$mode} & open mode -\/ see fopen \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
F\+I\+LE $\ast$ pointer 
\end{DoxyReturn}


Definition at line 274 of file lifutils.\+c.



Referenced by lif\+\_\+add\+\_\+ascii\+\_\+file\+\_\+as\+\_\+e010\+\_\+wrapper(), lif\+\_\+create\+\_\+volume(), lif\+\_\+extract\+\_\+e010\+\_\+as\+\_\+ascii(), and lif\+\_\+open\+\_\+volume().

\index{lifutils.\+c@{lifutils.\+c}!lif\+\_\+open\+\_\+volume@{lif\+\_\+open\+\_\+volume}}
\index{lif\+\_\+open\+\_\+volume@{lif\+\_\+open\+\_\+volume}!lifutils.\+c@{lifutils.\+c}}
\subsubsection[{\texorpdfstring{lif\+\_\+open\+\_\+volume(char $\ast$name, char $\ast$mode)}{lif_open_volume(char *name, char *mode)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\+E\+M\+S\+P\+A\+CE} {\bf lif\+\_\+t}$\ast$ lif\+\_\+open\+\_\+volume (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{name, }
\item[{char $\ast$}]{mode}
\end{DoxyParamCaption}
)}\hypertarget{lifutils_8c_a982b5ca066312fb4912c15a002b0aeed}{}\label{lifutils_8c_a982b5ca066312fb4912c15a002b0aeed}


Open L\+IF directory for reading. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em $\ast$name} & file name of L\+IF image \\
\hline
\mbox{\tt in}  & {\em $\ast$mode} & \char`\"{}r\char`\"{} = read, \char`\"{}r+\char`\"{} = rea/write \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
L\+IF pointer on sucesses or N\+U\+LL on error 
\end{DoxyReturn}


Definition at line 1522 of file lifutils.\+c.



Referenced by lif\+\_\+add\+\_\+ascii\+\_\+file\+\_\+as\+\_\+e010(), lif\+\_\+add\+\_\+lif\+\_\+file(), lif\+\_\+del\+\_\+file(), lif\+\_\+dir(), lif\+\_\+extract\+\_\+e010\+\_\+as\+\_\+ascii(), lif\+\_\+extract\+\_\+lif\+\_\+as\+\_\+lif(), and lif\+\_\+rename\+\_\+file().

\index{lifutils.\+c@{lifutils.\+c}!lif\+\_\+read@{lif\+\_\+read}}
\index{lif\+\_\+read@{lif\+\_\+read}!lifutils.\+c@{lifutils.\+c}}
\subsubsection[{\texorpdfstring{lif\+\_\+read(lif\+\_\+t $\ast$\+L\+I\+F, void $\ast$buf, long offset, int bytes)}{lif_read(lif_t *LIF, void *buf, long offset, int bytes)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\+E\+M\+S\+P\+A\+CE} long lif\+\_\+read (
\begin{DoxyParamCaption}
\item[{{\bf lif\+\_\+t} $\ast$}]{L\+IF, }
\item[{void $\ast$}]{buf, }
\item[{long}]{offset, }
\item[{int}]{bytes}
\end{DoxyParamCaption}
)}\hypertarget{lifutils_8c_a43c84ad805d39fe11e9c01ed96d8449f}{}\label{lifutils_8c_a43c84ad805d39fe11e9c01ed96d8449f}


Read data from a L\+IF image Displays message on errors. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em $\ast$\+L\+IF} & \hyperlink{structlif__t}{lif\+\_\+t} structure with file pointers \\
\hline
\mbox{\tt out}  & {\em $\ast$buf} & read buffer \\
\hline
\mbox{\tt in}  & {\em offset} & read offset \\
\hline
\mbox{\tt in}  & {\em bytes} & number of bytes to read \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
bytes read or 0 on error 
\end{DoxyReturn}
Initial file position 

Definition at line 328 of file lifutils.\+c.



Referenced by lif\+\_\+add\+\_\+lif\+\_\+file(), lif\+\_\+extract\+\_\+e010\+\_\+as\+\_\+ascii(), lif\+\_\+extract\+\_\+lif\+\_\+as\+\_\+lif(), lif\+\_\+open\+\_\+volume(), and lif\+\_\+readdirindex().

\index{lifutils.\+c@{lifutils.\+c}!lif\+\_\+readdir@{lif\+\_\+readdir}}
\index{lif\+\_\+readdir@{lif\+\_\+readdir}!lifutils.\+c@{lifutils.\+c}}
\subsubsection[{\texorpdfstring{lif\+\_\+readdir(lif\+\_\+t $\ast$\+L\+I\+F)}{lif_readdir(lif_t *LIF)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\+E\+M\+S\+P\+A\+CE} {\bf lifdir\+\_\+t}$\ast$ lif\+\_\+readdir (
\begin{DoxyParamCaption}
\item[{{\bf lif\+\_\+t} $\ast$}]{L\+IF}
\end{DoxyParamCaption}
)}\hypertarget{lifutils_8c_a8d4632c74b663c5565e03fa81f3d13b0}{}\label{lifutils_8c_a8d4632c74b663c5565e03fa81f3d13b0}


Read a directory records from L\+IF image advancind directory index. 

\begin{DoxySeeAlso}{See also}
\hyperlink{lifutils_8c_a982b5ca066312fb4912c15a002b0aeed}{lif\+\_\+open\+\_\+volume()} n\+Ote\+: skip all purged L\+IF directory records 
\end{DoxySeeAlso}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em $\ast$\+L\+IF} & to L\+IF Volume/\+Diractoy structure \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
directory structure or N\+U\+LL 
\end{DoxyReturn}


Definition at line 1275 of file lifutils.\+c.

\index{lifutils.\+c@{lifutils.\+c}!lif\+\_\+readdirindex@{lif\+\_\+readdirindex}}
\index{lif\+\_\+readdirindex@{lif\+\_\+readdirindex}!lifutils.\+c@{lifutils.\+c}}
\subsubsection[{\texorpdfstring{lif\+\_\+readdirindex(lif\+\_\+t $\ast$\+L\+I\+F, int index)}{lif_readdirindex(lif_t *LIF, int index)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\+E\+M\+S\+P\+A\+CE} int lif\+\_\+readdirindex (
\begin{DoxyParamCaption}
\item[{{\bf lif\+\_\+t} $\ast$}]{L\+IF, }
\item[{int}]{index}
\end{DoxyParamCaption}
)}\hypertarget{lifutils_8c_ae82f40ed6588c230c0319f202f9484e5}{}\label{lifutils_8c_ae82f40ed6588c230c0319f202f9484e5}


Read L\+IF directory record number N. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em $\ast$\+L\+IF} & to L\+IF Volume/\+Diractoy structure \\
\hline
\mbox{\tt in}  & {\em index} & director record number \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
1 on success, 0 if error, bad directory record or outside of directory limits 
\end{DoxyReturn}


Definition at line 1185 of file lifutils.\+c.



Referenced by lif\+\_\+dir(), lif\+\_\+find\+\_\+file(), lif\+\_\+newdir(), lif\+\_\+readdir(), and lif\+\_\+updatefree().

\index{lifutils.\+c@{lifutils.\+c}!lif\+\_\+rename\+\_\+file@{lif\+\_\+rename\+\_\+file}}
\index{lif\+\_\+rename\+\_\+file@{lif\+\_\+rename\+\_\+file}!lifutils.\+c@{lifutils.\+c}}
\subsubsection[{\texorpdfstring{lif\+\_\+rename\+\_\+file(char $\ast$lifimagename, char $\ast$oldlifname, char $\ast$newlifname)}{lif_rename_file(char *lifimagename, char *oldlifname, char *newlifname)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\+E\+M\+S\+P\+A\+CE} int lif\+\_\+rename\+\_\+file (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{lifimagename, }
\item[{char $\ast$}]{oldlifname, }
\item[{char $\ast$}]{newlifname}
\end{DoxyParamCaption}
)}\hypertarget{lifutils_8c_a4f93e888b2ad255e5db96a9840d22d61}{}\label{lifutils_8c_a4f93e888b2ad255e5db96a9840d22d61}


Rename L\+IF file in L\+IF image. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em lifimagename} & L\+IF image name \\
\hline
\mbox{\tt in}  & {\em oldlifname} & old L\+IF file name \\
\hline
\mbox{\tt in}  & {\em newlifname} & new L\+IF file name \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
1 if renamed, 0 if not found, -\/1 error 
\end{DoxyReturn}


Definition at line 2539 of file lifutils.\+c.



Referenced by lif\+\_\+tests().

\index{lifutils.\+c@{lifutils.\+c}!lif\+\_\+rewinddir@{lif\+\_\+rewinddir}}
\index{lif\+\_\+rewinddir@{lif\+\_\+rewinddir}!lifutils.\+c@{lifutils.\+c}}
\subsubsection[{\texorpdfstring{lif\+\_\+rewinddir(lif\+\_\+t $\ast$\+L\+I\+F)}{lif_rewinddir(lif_t *LIF)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\+E\+M\+S\+P\+A\+CE} void lif\+\_\+rewinddir (
\begin{DoxyParamCaption}
\item[{{\bf lif\+\_\+t} $\ast$}]{L\+IF}
\end{DoxyParamCaption}
)}\hypertarget{lifutils_8c_ab647d79213dc29209066123907ff2f53}{}\label{lifutils_8c_ab647d79213dc29209066123907ff2f53}


Rewind L\+IF directory Note readdir pre-\/increments the directory pointer index so we start at -\/1. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em $\ast$\+L\+IF} & pointer to L\+IF Volume/\+Directoy structure \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}


Definition at line 1147 of file lifutils.\+c.



Referenced by lif\+\_\+create\+\_\+volume(), and lif\+\_\+updatefree().

\index{lifutils.\+c@{lifutils.\+c}!lif\+\_\+\+S2B@{lif\+\_\+\+S2B}}
\index{lif\+\_\+\+S2B@{lif\+\_\+\+S2B}!lifutils.\+c@{lifutils.\+c}}
\subsubsection[{\texorpdfstring{lif\+\_\+\+S2\+B(uint8\+\_\+t $\ast$\+B, uint8\+\_\+t $\ast$name, int size)}{lif_S2B(uint8_t *B, uint8_t *name, int size)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\+E\+M\+S\+P\+A\+CE} void lif\+\_\+\+S2B (
\begin{DoxyParamCaption}
\item[{uint8\+\_\+t $\ast$}]{B, }
\item[{uint8\+\_\+t $\ast$}]{name, }
\item[{int}]{size}
\end{DoxyParamCaption}
)}\hypertarget{lifutils_8c_a7b21c26a358dc3d0ce1a8fb12400e7b8}{}\label{lifutils_8c_a7b21c26a358dc3d0ce1a8fb12400e7b8}


Convert string to L\+IF directory record. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt out}  & {\em $\ast$B} & L\+IF result with added trailing spaces \\
\hline
\mbox{\tt in}  & {\em $\ast$name} & string \\
\hline
\mbox{\tt in}  & {\em size} & max size of B  1 if the string is ok or 0 if invalid L\+IF name characters on input string \\
\hline
\end{DoxyParams}


Definition at line 440 of file lifutils.\+c.



Referenced by lif\+\_\+dir2str(), and lif\+\_\+vol2str().

\index{lifutils.\+c@{lifutils.\+c}!lif\+\_\+seek\+\_\+msg@{lif\+\_\+seek\+\_\+msg}}
\index{lif\+\_\+seek\+\_\+msg@{lif\+\_\+seek\+\_\+msg}!lifutils.\+c@{lifutils.\+c}}
\subsubsection[{\texorpdfstring{lif\+\_\+seek\+\_\+msg(\+F\+I\+L\+E $\ast$fp, long offset, char $\ast$msg)}{lif_seek_msg(FILE *fp, long offset, char *msg)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\+E\+M\+S\+P\+A\+CE} int lif\+\_\+seek\+\_\+msg (
\begin{DoxyParamCaption}
\item[{{\bf F\+I\+LE} $\ast$}]{fp, }
\item[{long}]{offset, }
\item[{char $\ast$}]{msg}
\end{DoxyParamCaption}
)}\hypertarget{lifutils_8c_ada97dce18d20d7432911f1232fa5876c}{}\label{lifutils_8c_ada97dce18d20d7432911f1232fa5876c}
Displays message on errors 
\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em $\ast$fp} & F\+I\+LE pointer \\
\hline
\mbox{\tt in}  & {\em offset} & file offset \\
\hline
\mbox{\tt in}  & {\em mesg} & user string as part of error message \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
1 on success, 0 on error 
\end{DoxyReturn}


Definition at line 307 of file lifutils.\+c.



Referenced by lif\+\_\+read(), and lif\+\_\+write().

\index{lifutils.\+c@{lifutils.\+c}!lif\+\_\+stat@{lif\+\_\+stat}}
\index{lif\+\_\+stat@{lif\+\_\+stat}!lifutils.\+c@{lifutils.\+c}}
\subsubsection[{\texorpdfstring{lif\+\_\+stat(char $\ast$name, stat\+\_\+t $\ast$p)}{lif_stat(char *name, stat_t *p)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\+E\+M\+S\+P\+A\+CE} {\bf stat\+\_\+t}$\ast$ lif\+\_\+stat (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{name, }
\item[{{\bf stat\+\_\+t} $\ast$}]{p}
\end{DoxyParamCaption}
)}\hypertarget{lifutils_8c_a67f1ed1dfac85f6dff9a3851c9b4f79b}{}\label{lifutils_8c_a67f1ed1dfac85f6dff9a3851c9b4f79b}


Stat a file Displays message on errors. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em $\ast$name} & file name of L\+IF image \\
\hline
\mbox{\tt in}  & {\em $\ast$p} & start\+\_\+t structure pointer for result \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
N\+U\+LL on error or copy of p 
\end{DoxyReturn}


Definition at line 291 of file lifutils.\+c.



Referenced by lif\+\_\+add\+\_\+ascii\+\_\+file\+\_\+as\+\_\+e010(), and lif\+\_\+open\+\_\+volume().

\index{lifutils.\+c@{lifutils.\+c}!lif\+\_\+str2dir@{lif\+\_\+str2dir}}
\index{lif\+\_\+str2dir@{lif\+\_\+str2dir}!lifutils.\+c@{lifutils.\+c}}
\subsubsection[{\texorpdfstring{lif\+\_\+str2dir(uint8\+\_\+t $\ast$\+B, lif\+\_\+t $\ast$\+L\+I\+F)}{lif_str2dir(uint8_t *B, lif_t *LIF)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\+E\+M\+S\+P\+A\+CE} void lif\+\_\+str2dir (
\begin{DoxyParamCaption}
\item[{uint8\+\_\+t $\ast$}]{B, }
\item[{{\bf lif\+\_\+t} $\ast$}]{L\+IF}
\end{DoxyParamCaption}
)}\hypertarget{lifutils_8c_a96cf5cb4698643c717d21305bacb9f0a}{}\label{lifutils_8c_a96cf5cb4698643c717d21305bacb9f0a}


Convert byte vector into byte vector. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em B} & byte vector to extract data from \\
\hline
\mbox{\tt out}  & {\em L\+IF} & \hyperlink{structlifdir__t}{lifdir\+\_\+t} structure pointer \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}


Definition at line 560 of file lifutils.\+c.



Referenced by lif\+\_\+readdirindex(), and td02lif\+\_\+track().

\index{lifutils.\+c@{lifutils.\+c}!lif\+\_\+str2vol@{lif\+\_\+str2vol}}
\index{lif\+\_\+str2vol@{lif\+\_\+str2vol}!lifutils.\+c@{lifutils.\+c}}
\subsubsection[{\texorpdfstring{lif\+\_\+str2vol(uint8\+\_\+t $\ast$\+B, lif\+\_\+t $\ast$\+L\+I\+F)}{lif_str2vol(uint8_t *B, lif_t *LIF)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\+E\+M\+S\+P\+A\+CE} void lif\+\_\+str2vol (
\begin{DoxyParamCaption}
\item[{uint8\+\_\+t $\ast$}]{B, }
\item[{{\bf lif\+\_\+t} $\ast$}]{L\+IF}
\end{DoxyParamCaption}
)}\hypertarget{lifutils_8c_a309f4e78392fd508f4b2966989f0fe11}{}\label{lifutils_8c_a309f4e78392fd508f4b2966989f0fe11}


Convert byte vector into L\+IF volume records. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em B} & byte vector \\
\hline
\mbox{\tt out}  & {\em $\ast$\+L\+IF} & L\+IF image structure \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}


Definition at line 521 of file lifutils.\+c.



Referenced by lif\+\_\+open\+\_\+volume(), and td02lif\+\_\+track().

\index{lifutils.\+c@{lifutils.\+c}!lif\+\_\+stralloc@{lif\+\_\+stralloc}}
\index{lif\+\_\+stralloc@{lif\+\_\+stralloc}!lifutils.\+c@{lifutils.\+c}}
\subsubsection[{\texorpdfstring{lif\+\_\+stralloc(char $\ast$str)}{lif_stralloc(char *str)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\+E\+M\+S\+P\+A\+CE} void$\ast$ lif\+\_\+stralloc (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{str}
\end{DoxyParamCaption}
)}\hypertarget{lifutils_8c_af6f55d2cb736a18df4d934409a0412ed}{}\label{lifutils_8c_af6f55d2cb736a18df4d934409a0412ed}


Allocate and copy a string Displays message on errors. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em str} & String to allocate and copy \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
pointer to allocated memory with string copy 
\end{DoxyReturn}


Definition at line 258 of file lifutils.\+c.



Referenced by lif\+\_\+create\+\_\+volume(), lif\+\_\+open\+\_\+volume(), and lif\+\_\+td02lif().

\index{lifutils.\+c@{lifutils.\+c}!lif\+\_\+tests@{lif\+\_\+tests}}
\index{lif\+\_\+tests@{lif\+\_\+tests}!lifutils.\+c@{lifutils.\+c}}
\subsubsection[{\texorpdfstring{lif\+\_\+tests(int argc, char $\ast$argv[])}{lif_tests(int argc, char *argv[])}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\+E\+M\+S\+P\+A\+CE} int lif\+\_\+tests (
\begin{DoxyParamCaption}
\item[{int}]{argc, }
\item[{char $\ast$}]{argv\mbox{[}$\,$\mbox{]}}
\end{DoxyParamCaption}
)}\hypertarget{lifutils_8c_ae76ffe84d6e9758fbc6b3c1959a0b91f}{}\label{lifutils_8c_ae76ffe84d6e9758fbc6b3c1959a0b91f}


L\+IF user tests. 

\begin{DoxyReturn}{Returns}
1 matched token, 0 if not 
\end{DoxyReturn}
format L\+IF image 

Definition at line 130 of file lifutils.\+c.



Referenced by task().

\index{lifutils.\+c@{lifutils.\+c}!lif\+\_\+time2lifbcd@{lif\+\_\+time2lifbcd}}
\index{lif\+\_\+time2lifbcd@{lif\+\_\+time2lifbcd}!lifutils.\+c@{lifutils.\+c}}
\subsubsection[{\texorpdfstring{lif\+\_\+time2lifbcd(time\+\_\+t t, uint8\+\_\+t $\ast$bcd)}{lif_time2lifbcd(time_t t, uint8_t *bcd)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\+E\+M\+S\+P\+A\+CE} void lif\+\_\+time2lifbcd (
\begin{DoxyParamCaption}
\item[{{\bf time\+\_\+t}}]{t, }
\item[{uint8\+\_\+t $\ast$}]{bcd}
\end{DoxyParamCaption}
)}\hypertarget{lifutils_8c_aa91627c2cb74e13d291b623dccf24fff}{}\label{lifutils_8c_aa91627c2cb74e13d291b623dccf24fff}


U\+N\+IX time to L\+IF B\+CD time format The B\+CD year is only the lower 2 digits of the year So We assume that values $<$= 70 are years $>$= 2000 B\+CD Day and Month start at 1 Note\+: If t == 0 we set A\+LL B\+CD digits to 0. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em t} & U\+N\+IX time\+\_\+t time value \\
\hline
\mbox{\tt out}  & {\em $\ast$bcd} & pcked 6 byte B\+CD L\+IF time YY MM DD HH MM SS \\
\hline
\end{DoxyParams}
\begin{DoxySeeAlso}{See also}
\hyperlink{time_8c_a32b1cbd925752f0cd61d202bbe204a69}{time()} in \hyperlink{time_8c}{time.\+c} 
\end{DoxySeeAlso}
\begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}


Definition at line 604 of file lifutils.\+c.



Referenced by lif\+\_\+add\+\_\+ascii\+\_\+file\+\_\+as\+\_\+e010(), and lif\+\_\+create\+\_\+volume().

\index{lifutils.\+c@{lifutils.\+c}!lif\+\_\+updatefree@{lif\+\_\+updatefree}}
\index{lif\+\_\+updatefree@{lif\+\_\+updatefree}!lifutils.\+c@{lifutils.\+c}}
\subsubsection[{\texorpdfstring{lif\+\_\+updatefree(lif\+\_\+t $\ast$\+L\+I\+F)}{lif_updatefree(lif_t *LIF)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\+E\+M\+S\+P\+A\+CE} {\bf lif\+\_\+t}$\ast$ lif\+\_\+updatefree (
\begin{DoxyParamCaption}
\item[{{\bf lif\+\_\+t} $\ast$}]{L\+IF}
\end{DoxyParamCaption}
)}\hypertarget{lifutils_8c_aedfa0156b71f7b94060d74212acdf5c3}{}\label{lifutils_8c_aedfa0156b71f7b94060d74212acdf5c3}


Update free space \mbox{[}in\mbox{]} $\ast$\+L\+IF\+: L\+IF structure. 

\begin{DoxyReturn}{Returns}
\+: L\+IF or N\+U\+LL on error 
\end{DoxyReturn}
Update free 

Definition at line 1301 of file lifutils.\+c.



Referenced by lif\+\_\+create\+\_\+volume(), lif\+\_\+del\+\_\+file(), lif\+\_\+newdir(), and lif\+\_\+open\+\_\+volume().

\index{lifutils.\+c@{lifutils.\+c}!lif\+\_\+vol2str@{lif\+\_\+vol2str}}
\index{lif\+\_\+vol2str@{lif\+\_\+vol2str}!lifutils.\+c@{lifutils.\+c}}
\subsubsection[{\texorpdfstring{lif\+\_\+vol2str(lif\+\_\+t $\ast$\+L\+I\+F, uint8\+\_\+t $\ast$\+B)}{lif_vol2str(lif_t *LIF, uint8_t *B)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\+E\+M\+S\+P\+A\+CE} void lif\+\_\+vol2str (
\begin{DoxyParamCaption}
\item[{{\bf lif\+\_\+t} $\ast$}]{L\+IF, }
\item[{uint8\+\_\+t $\ast$}]{B}
\end{DoxyParamCaption}
)}\hypertarget{lifutils_8c_a1f62ff0f9d7b16de4c717e9ff5440547}{}\label{lifutils_8c_a1f62ff0f9d7b16de4c717e9ff5440547}


Convert L\+IF volume records into byte vector. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em $\ast$\+L\+IF} & L\+IF image structure \\
\hline
\mbox{\tt out}  & {\em B} & byte vector to pack data into \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}


Definition at line 500 of file lifutils.\+c.



Referenced by lif\+\_\+create\+\_\+volume().

\index{lifutils.\+c@{lifutils.\+c}!lif\+\_\+vol\+\_\+clear@{lif\+\_\+vol\+\_\+clear}}
\index{lif\+\_\+vol\+\_\+clear@{lif\+\_\+vol\+\_\+clear}!lifutils.\+c@{lifutils.\+c}}
\subsubsection[{\texorpdfstring{lif\+\_\+vol\+\_\+clear(lif\+\_\+t $\ast$\+L\+I\+F)}{lif_vol_clear(lif_t *LIF)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\+E\+M\+S\+P\+A\+CE} void lif\+\_\+vol\+\_\+clear (
\begin{DoxyParamCaption}
\item[{{\bf lif\+\_\+t} $\ast$}]{L\+IF}
\end{DoxyParamCaption}
)}\hypertarget{lifutils_8c_a864d8cda56e135d05c681dbd896f24dc}{}\label{lifutils_8c_a864d8cda56e135d05c681dbd896f24dc}


Clear V\+OL part of L\+IF structure. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em $\ast$\+L\+IF} & pointer to L\+IF structure \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}


Definition at line 731 of file lifutils.\+c.



Referenced by lif\+\_\+close\+\_\+volume().

\index{lifutils.\+c@{lifutils.\+c}!lif\+\_\+write@{lif\+\_\+write}}
\index{lif\+\_\+write@{lif\+\_\+write}!lifutils.\+c@{lifutils.\+c}}
\subsubsection[{\texorpdfstring{lif\+\_\+write(lif\+\_\+t $\ast$\+L\+I\+F, void $\ast$buf, long offset, int bytes)}{lif_write(lif_t *LIF, void *buf, long offset, int bytes)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\+E\+M\+S\+P\+A\+CE} int lif\+\_\+write (
\begin{DoxyParamCaption}
\item[{{\bf lif\+\_\+t} $\ast$}]{L\+IF, }
\item[{void $\ast$}]{buf, }
\item[{long}]{offset, }
\item[{int}]{bytes}
\end{DoxyParamCaption}
)}\hypertarget{lifutils_8c_a51651de65cdba6cf543b498e770e2971}{}\label{lifutils_8c_a51651de65cdba6cf543b498e770e2971}


Write data to an L\+IF image Displays message on errors. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em $\ast$\+L\+IF} & \hyperlink{structlif__t}{lif\+\_\+t} structure with file pointers \\
\hline
\mbox{\tt in}  & {\em $\ast$buf} & write buffer \\
\hline
\mbox{\tt in}  & {\em offset} & write offset \\
\hline
\mbox{\tt in}  & {\em bytes} & number of bytes to write \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
bytes read or 0 on error 
\end{DoxyReturn}
Initial file position 

Definition at line 354 of file lifutils.\+c.



Referenced by lif\+\_\+add\+\_\+ascii\+\_\+file\+\_\+as\+\_\+e010\+\_\+wrapper(), lif\+\_\+add\+\_\+lif\+\_\+file(), lif\+\_\+create\+\_\+volume(), lif\+\_\+extract\+\_\+lif\+\_\+as\+\_\+lif(), and lif\+\_\+writedirindex().

\index{lifutils.\+c@{lifutils.\+c}!lif\+\_\+writedir\+E\+OF@{lif\+\_\+writedir\+E\+OF}}
\index{lif\+\_\+writedir\+E\+OF@{lif\+\_\+writedir\+E\+OF}!lifutils.\+c@{lifutils.\+c}}
\subsubsection[{\texorpdfstring{lif\+\_\+writedir\+E\+O\+F(lif\+\_\+t $\ast$\+L\+I\+F, int index)}{lif_writedirEOF(lif_t *LIF, int index)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\+E\+M\+S\+P\+A\+CE} int lif\+\_\+writedir\+E\+OF (
\begin{DoxyParamCaption}
\item[{{\bf lif\+\_\+t} $\ast$}]{L\+IF, }
\item[{int}]{index}
\end{DoxyParamCaption}
)}\hypertarget{lifutils_8c_ada21b62e03559daceb095165769ba76d}{}\label{lifutils_8c_ada21b62e03559daceb095165769ba76d}


Write L\+IF drectory E\+OF. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em $\ast$\+L\+IF} & L\+IF Volume/\+Diractoy structure \\
\hline
\mbox{\tt in}  & {\em index} & director record number \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
1 on success, 0 on error and outsize directory limits 
\end{DoxyReturn}


Definition at line 1259 of file lifutils.\+c.



Referenced by lif\+\_\+extract\+\_\+lif\+\_\+as\+\_\+lif(), lif\+\_\+newdir(), and lif\+\_\+updatefree().

\index{lifutils.\+c@{lifutils.\+c}!lif\+\_\+writedirindex@{lif\+\_\+writedirindex}}
\index{lif\+\_\+writedirindex@{lif\+\_\+writedirindex}!lifutils.\+c@{lifutils.\+c}}
\subsubsection[{\texorpdfstring{lif\+\_\+writedirindex(lif\+\_\+t $\ast$\+L\+I\+F, int index)}{lif_writedirindex(lif_t *LIF, int index)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf M\+E\+M\+S\+P\+A\+CE} int lif\+\_\+writedirindex (
\begin{DoxyParamCaption}
\item[{{\bf lif\+\_\+t} $\ast$}]{L\+IF, }
\item[{int}]{index}
\end{DoxyParamCaption}
)}\hypertarget{lifutils_8c_a9ea3982f8710265ac6eea14c6ea24b94}{}\label{lifutils_8c_a9ea3982f8710265ac6eea14c6ea24b94}


Write L\+IF drectory record number N. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em $\ast$\+L\+IF} & L\+IF Volume/\+Diractoy structure \\
\hline
\mbox{\tt in}  & {\em index} & director record number \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
1 on success, 0 if error, bad directory record or outside of directory limits 
\end{DoxyReturn}


Definition at line 1222 of file lifutils.\+c.



Referenced by lif\+\_\+add\+\_\+ascii\+\_\+file\+\_\+as\+\_\+e010(), lif\+\_\+add\+\_\+lif\+\_\+file(), lif\+\_\+del\+\_\+file(), lif\+\_\+extract\+\_\+lif\+\_\+as\+\_\+lif(), lif\+\_\+newdir(), lif\+\_\+rename\+\_\+file(), and lif\+\_\+writedir\+E\+O\+F().

