\hypertarget{lifutils_8c}{}\doxysection{lif/lifutils.c File Reference}
\label{lifutils_8c}\index{lif/lifutils.c@{lif/lifutils.c}}


L\+IF file utilities.  


{\ttfamily \#include \char`\"{}hardware/user\+\_\+config.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}vector.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}drives\+\_\+sup.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}lifsup.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}lifutils.\+h\char`\"{}}\newline
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} void \mbox{\hyperlink{lifutils_8c_aaa09913ea26aad14d68bf5459a4b502f}{lif\+\_\+help}} (int full)
\begin{DoxyCompactList}\small\item\em Help Menu for User invoked G\+P\+IB functions and tasks See\+: int gpib\+\_\+tests(char $\ast$str) \end{DoxyCompactList}\item 
\mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} int \mbox{\hyperlink{lifutils_8c_ae76ffe84d6e9758fbc6b3c1959a0b91f}{lif\+\_\+tests}} (int argc, char $\ast$argv\mbox{[}$\,$\mbox{]})
\begin{DoxyCompactList}\small\item\em L\+IF user tests. \end{DoxyCompactList}\item 
\mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} void $\ast$ \mbox{\hyperlink{lifutils_8c_aca73842308f6e7769da01bd0cc10a10e}{lif\+\_\+calloc}} (long size)
\begin{DoxyCompactList}\small\item\em Allocate and clear memory Displays message on errors. \end{DoxyCompactList}\item 
\mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} void \mbox{\hyperlink{lifutils_8c_acfb51c03b6de7a7b6ff9bb08712709f1}{lif\+\_\+free}} (void $\ast$p)
\begin{DoxyCompactList}\small\item\em Free allocated memory Displays message on errors. \end{DoxyCompactList}\item 
\mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} char $\ast$ \mbox{\hyperlink{lifutils_8c_a70f1b6002e409f2b950feb435ef047c1}{lif\+\_\+stralloc}} (char $\ast$str)
\begin{DoxyCompactList}\small\item\em Allocate and copy a string Displays message on errors. \end{DoxyCompactList}\item 
\mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} \mbox{\hyperlink{posix_8h_aed4dabeb9f7c518ded42f930a04abce8}{F\+I\+LE}} $\ast$ \mbox{\hyperlink{lifutils_8c_aca2921d0bba9c706ba27d6a3ae598140}{lif\+\_\+open}} (char $\ast$name, char $\ast$mode)
\begin{DoxyCompactList}\small\item\em Open a file that must exist Displays message on errors. \end{DoxyCompactList}\item 
\mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} \mbox{\hyperlink{defines_8h_aebb3d0e746d3aa086e0baa48ad66b964}{stat\+\_\+t}} $\ast$ \mbox{\hyperlink{lifutils_8c_a67f1ed1dfac85f6dff9a3851c9b4f79b}{lif\+\_\+stat}} (char $\ast$name, \mbox{\hyperlink{defines_8h_aebb3d0e746d3aa086e0baa48ad66b964}{stat\+\_\+t}} $\ast$p)
\begin{DoxyCompactList}\small\item\em Stat a file Displays message on errors. \end{DoxyCompactList}\item 
\mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} int \mbox{\hyperlink{lifutils_8c_ada97dce18d20d7432911f1232fa5876c}{lif\+\_\+seek\+\_\+msg}} (\mbox{\hyperlink{posix_8h_aed4dabeb9f7c518ded42f930a04abce8}{F\+I\+LE}} $\ast$fp, long offset, char $\ast$msg)
\item 
\mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} long \mbox{\hyperlink{lifutils_8c_a43c84ad805d39fe11e9c01ed96d8449f}{lif\+\_\+read}} (\mbox{\hyperlink{structlif__t}{lif\+\_\+t}} $\ast$L\+IF, void $\ast$buf, long offset, int bytes)
\begin{DoxyCompactList}\small\item\em Read data from a L\+IF image Displays message on errors. \end{DoxyCompactList}\item 
\mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} int \mbox{\hyperlink{lifutils_8c_a51651de65cdba6cf543b498e770e2971}{lif\+\_\+write}} (\mbox{\hyperlink{structlif__t}{lif\+\_\+t}} $\ast$L\+IF, void $\ast$buf, long offset, int bytes)
\begin{DoxyCompactList}\small\item\em Write data to an L\+IF image Displays message on errors. \end{DoxyCompactList}\item 
\mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} int \mbox{\hyperlink{lifutils_8c_a43cc2a95e7a47cb6c70b21cd600e8f51}{lif\+\_\+chars}} (int c, int index \+\_\+\+\_\+attribute\+\_\+\+\_\+((unused)))
\begin{DoxyCompactList}\small\item\em Check if characters in a L\+IF volume or L\+IF file name are valid. \end{DoxyCompactList}\item 
\mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} int \mbox{\hyperlink{lifutils_8c_ab2f681c9cb11eefcb573ab80dc9d7633}{lif\+\_\+\+B2S}} (uint8\+\_\+t $\ast$B, uint8\+\_\+t $\ast$name, int size)
\begin{DoxyCompactList}\small\item\em Convert L\+IF space padded string name into normal string. \end{DoxyCompactList}\item 
\mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} int \mbox{\hyperlink{lifutils_8c_a3f32a48a31e8fa225a2e5d72ffc969e6}{lif\+\_\+checkname}} (char $\ast$name)
\begin{DoxyCompactList}\small\item\em Check volume L\+IF name or directory name is valid. \end{DoxyCompactList}\item 
\mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} void \mbox{\hyperlink{lifutils_8c_a7b21c26a358dc3d0ce1a8fb12400e7b8}{lif\+\_\+\+S2B}} (uint8\+\_\+t $\ast$B, uint8\+\_\+t $\ast$name, int size)
\begin{DoxyCompactList}\small\item\em Convert string to L\+IF directory record. \end{DoxyCompactList}\item 
\mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} int \mbox{\hyperlink{lifutils_8c_a05e815994fb0e328a72e3a514428f07f}{lif\+\_\+fixname}} (uint8\+\_\+t $\ast$B, char $\ast$name, int size)
\begin{DoxyCompactList}\small\item\em Convert name into a valid L\+IF name Only use the \mbox{\hyperlink{posix_8c_a4d3dfaf2f5a63e2e4eaa128477a9b5e7}{basename()}} part of the string and remove any file name extentions L\+IF names may have only these characters\+: \mbox{[}A-\/Z\mbox{]}\mbox{[}A-\/\+Z0-\/09\+\_\+\mbox{]}+ L\+IF names are converted to upper case L\+IF names are padded at the end with spaces Any invalid input characters are converted into spaces. \end{DoxyCompactList}\item 
\mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} void \mbox{\hyperlink{lifutils_8c_a1f62ff0f9d7b16de4c717e9ff5440547}{lif\+\_\+vol2str}} (\mbox{\hyperlink{structlif__t}{lif\+\_\+t}} $\ast$L\+IF, uint8\+\_\+t $\ast$B)
\begin{DoxyCompactList}\small\item\em Convert L\+IF volume records into byte vector. \end{DoxyCompactList}\item 
\mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} void \mbox{\hyperlink{lifutils_8c_a309f4e78392fd508f4b2966989f0fe11}{lif\+\_\+str2vol}} (uint8\+\_\+t $\ast$B, \mbox{\hyperlink{structlif__t}{lif\+\_\+t}} $\ast$L\+IF)
\begin{DoxyCompactList}\small\item\em Convert byte vector into L\+IF volume records. \end{DoxyCompactList}\item 
\mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} void \mbox{\hyperlink{lifutils_8c_a38bbbf82814835350f636cf16427ac89}{lif\+\_\+dir2str}} (\mbox{\hyperlink{structlif__t}{lif\+\_\+t}} $\ast$L\+IF, uint8\+\_\+t $\ast$B)
\begin{DoxyCompactList}\small\item\em Convert L\+IF directory records into byte vector. \end{DoxyCompactList}\item 
\mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} void \mbox{\hyperlink{lifutils_8c_a96cf5cb4698643c717d21305bacb9f0a}{lif\+\_\+str2dir}} (uint8\+\_\+t $\ast$B, \mbox{\hyperlink{structlif__t}{lif\+\_\+t}} $\ast$L\+IF)
\begin{DoxyCompactList}\small\item\em Convert byte vector into byte vector. \end{DoxyCompactList}\item 
\mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} uint8\+\_\+t \mbox{\hyperlink{lifutils_8c_a74e4057cb326e5592b0c69f50eb68d02}{lif\+\_\+\+B\+I\+N2\+B\+CD}} (uint8\+\_\+t data)
\begin{DoxyCompactList}\small\item\em Convert number $>$= 0 and $<$= 99 to B\+CD. \end{DoxyCompactList}\item 
\mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} int \mbox{\hyperlink{lifutils_8c_ae1cece4d7bf8e52e9fde4d1d836d4431}{lif\+\_\+\+B\+C\+D2\+B\+IN}} (uint8\+\_\+t bin)
\begin{DoxyCompactList}\small\item\em Convert B\+CD in the range 0 and $<$= 99 to B\+IN B\+CD format\+: each hex nibble has a digit 0 .. 9. \end{DoxyCompactList}\item 
\mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} void \mbox{\hyperlink{lifutils_8c_aa91627c2cb74e13d291b623dccf24fff}{lif\+\_\+time2lifbcd}} (\mbox{\hyperlink{time_8h_a3346b04b0420b32ccf6b706551b70762}{time\+\_\+t}} t, uint8\+\_\+t $\ast$bcd)
\begin{DoxyCompactList}\small\item\em U\+N\+IX time to L\+IF B\+CD time format The B\+CD year is only the lower 2 digits of the year So We assume that values $<$= 70 are years $>$= 2000 B\+CD Day and Month start at 1 Note\+: If t == 0 we set A\+LL B\+CD digits to 0. \end{DoxyCompactList}\item 
\mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} \mbox{\hyperlink{time_8h_a3346b04b0420b32ccf6b706551b70762}{time\+\_\+t}} \mbox{\hyperlink{lifutils_8c_a69b46ceeea3124d0810fc00f910ff342}{lif\+\_\+lifbcd2time}} (uint8\+\_\+t $\ast$bcd)
\begin{DoxyCompactList}\small\item\em convert B\+CD date into time\+\_\+t value The B\+CD year is only the lower 2 digits of the year So We assume that values $<$= 70 are years $>$= 2000 B\+CD Day and Month start at 1 If A\+LL B\+CD digits are 0 we return 0 \end{DoxyCompactList}\item 
\mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} char $\ast$ \mbox{\hyperlink{lifutils_8c_a66037d0bcbffc6000a59cc291cbef769}{lif\+\_\+ctime\+\_\+gmt}} (\mbox{\hyperlink{time_8h_a3346b04b0420b32ccf6b706551b70762}{time\+\_\+t}} $\ast$tp)
\begin{DoxyCompactList}\small\item\em G\+MT version of P\+O\+S\+IX \mbox{\hyperlink{time_8c_a77d6bba12950028852621634ffaf4835}{ctime()}}. \end{DoxyCompactList}\item 
\mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} char $\ast$ \mbox{\hyperlink{lifutils_8c_a5ab27bae428e4b04e1c056f67f65c22f}{lif\+\_\+lifbcd2timestr}} (uint8\+\_\+t $\ast$bcd)
\item 
\mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} void \mbox{\hyperlink{lifutils_8c_a4076e72afcb9beaca5886c5e7e83aed7}{lif\+\_\+image\+\_\+clear}} (\mbox{\hyperlink{structlif__t}{lif\+\_\+t}} $\ast$L\+IF)
\begin{DoxyCompactList}\small\item\em File seek with error message. \end{DoxyCompactList}\item 
\mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} void \mbox{\hyperlink{lifutils_8c_a29c92c7454bad4eb13e9f7ff89995fe2}{lif\+\_\+dir\+\_\+clear}} (\mbox{\hyperlink{structlif__t}{lif\+\_\+t}} $\ast$L\+IF)
\begin{DoxyCompactList}\small\item\em Clear \mbox{\hyperlink{structDIR}{D\+IR}} part of L\+IF structure. \end{DoxyCompactList}\item 
\mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} void \mbox{\hyperlink{lifutils_8c_a864d8cda56e135d05c681dbd896f24dc}{lif\+\_\+vol\+\_\+clear}} (\mbox{\hyperlink{structlif__t}{lif\+\_\+t}} $\ast$L\+IF)
\begin{DoxyCompactList}\small\item\em Clear V\+OL part of L\+IF structure. \end{DoxyCompactList}\item 
\mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} void \mbox{\hyperlink{lifutils_8c_a5c2eb20c1c8f59cae0845a564b5c95db}{lif\+\_\+dump\+\_\+vol}} (\mbox{\hyperlink{structlif__t}{lif\+\_\+t}} $\ast$L\+IF, char $\ast$msg)
\begin{DoxyCompactList}\small\item\em Dump L\+IF struture data for debugging. \end{DoxyCompactList}\item 
\mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} int \mbox{\hyperlink{lifutils_8c_a86bb283b68ec39b17f1f35e03d1dc34d}{lif\+\_\+check\+\_\+volume}} (\mbox{\hyperlink{structlif__t}{lif\+\_\+t}} $\ast$L\+IF)
\begin{DoxyCompactList}\small\item\em Check Volume Table for values in range. \end{DoxyCompactList}\item 
\mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} int \mbox{\hyperlink{lifutils_8c_a4a037ce3b854d7f5cfd31aff61810cd4}{lif\+\_\+check\+\_\+dir}} (\mbox{\hyperlink{structlif__t}{lif\+\_\+t}} $\ast$L\+IF)
\begin{DoxyCompactList}\small\item\em Validate Directory record values We only do basic out of bounds tests for this record Purged or E\+OF directory records are N\+OT checked and always return 1. \end{DoxyCompactList}\item 
\mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} \mbox{\hyperlink{structlif__t}{lif\+\_\+t}} $\ast$ \mbox{\hyperlink{lifutils_8c_a40173cedac7bb1b0b9f7e2902d76c3b8}{lif\+\_\+create\+\_\+volume}} (char $\ast$imagename, char $\ast$liflabel, long dirstart, long dirsectors, long filesectors)
\begin{DoxyCompactList}\small\item\em Create L\+IF image with Volume, Directory and optional empty filespace. \end{DoxyCompactList}\item 
\mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} void \mbox{\hyperlink{lifutils_8c_aeaf5399e472155070399f492a32a4326}{lif\+\_\+close\+\_\+volume}} (\mbox{\hyperlink{structlif__t}{lif\+\_\+t}} $\ast$L\+IF)
\begin{DoxyCompactList}\small\item\em Free L\+IF structure and close any files. \end{DoxyCompactList}\item 
\mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} uint32\+\_\+t \mbox{\hyperlink{lifutils_8c_ac41bc5c7424acf48bba35f8e552f10eb}{lif\+\_\+bytes2sectors}} (uint32\+\_\+t bytes)
\begin{DoxyCompactList}\small\item\em Convert bytes into used sectors. \end{DoxyCompactList}\item 
\mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} void \mbox{\hyperlink{lifutils_8c_ab647d79213dc29209066123907ff2f53}{lif\+\_\+rewinddir}} (\mbox{\hyperlink{structlif__t}{lif\+\_\+t}} $\ast$L\+IF)
\begin{DoxyCompactList}\small\item\em Rewind L\+IF directory Note readdir pre-\/increments the directory pointer index so we start at -\/1. \end{DoxyCompactList}\item 
\mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} void \mbox{\hyperlink{lifutils_8c_a1cc44034801a758d64625c15810b42ab}{lif\+\_\+closedir}} (\mbox{\hyperlink{structlif__t}{lif\+\_\+t}} $\ast$L\+IF)
\begin{DoxyCompactList}\small\item\em Close L\+IF directory clear and free \mbox{\hyperlink{structlif__t}{lif\+\_\+t}} structure. \end{DoxyCompactList}\item 
\mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} int \mbox{\hyperlink{lifutils_8c_aafa159b3cfd19fd13546dfffe86f7b4d}{lif\+\_\+checkdirindex}} (\mbox{\hyperlink{structlif__t}{lif\+\_\+t}} $\ast$L\+IF, int index)
\begin{DoxyCompactList}\small\item\em Check directory index limits. \end{DoxyCompactList}\item 
\mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} int \mbox{\hyperlink{lifutils_8c_ae82f40ed6588c230c0319f202f9484e5}{lif\+\_\+readdirindex}} (\mbox{\hyperlink{structlif__t}{lif\+\_\+t}} $\ast$L\+IF, int index)
\begin{DoxyCompactList}\small\item\em Read L\+IF directory record number N. \end{DoxyCompactList}\item 
\mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} int \mbox{\hyperlink{lifutils_8c_a9ea3982f8710265ac6eea14c6ea24b94}{lif\+\_\+writedirindex}} (\mbox{\hyperlink{structlif__t}{lif\+\_\+t}} $\ast$L\+IF, int index)
\begin{DoxyCompactList}\small\item\em Write L\+IF drectory record number N. \end{DoxyCompactList}\item 
\mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} int \mbox{\hyperlink{lifutils_8c_ada21b62e03559daceb095165769ba76d}{lif\+\_\+writedir\+E\+OF}} (\mbox{\hyperlink{structlif__t}{lif\+\_\+t}} $\ast$L\+IF, int index)
\begin{DoxyCompactList}\small\item\em Write L\+IF drectory E\+OF. \end{DoxyCompactList}\item 
\mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} \mbox{\hyperlink{structlifdir__t}{lifdir\+\_\+t}} $\ast$ \mbox{\hyperlink{lifutils_8c_a8d4632c74b663c5565e03fa81f3d13b0}{lif\+\_\+readdir}} (\mbox{\hyperlink{structlif__t}{lif\+\_\+t}} $\ast$L\+IF)
\begin{DoxyCompactList}\small\item\em Read a directory records from L\+IF image advancind directory index. \end{DoxyCompactList}\item 
\mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} \mbox{\hyperlink{structlif__t}{lif\+\_\+t}} $\ast$ \mbox{\hyperlink{lifutils_8c_aedfa0156b71f7b94060d74212acdf5c3}{lif\+\_\+updatefree}} (\mbox{\hyperlink{structlif__t}{lif\+\_\+t}} $\ast$L\+IF)
\begin{DoxyCompactList}\small\item\em Update free space @parameter\mbox{[}in\mbox{]} $\ast$\+L\+IF\+: L\+IF structure. \end{DoxyCompactList}\item 
\mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} int \mbox{\hyperlink{lifutils_8c_aa815e9770db054c7f53cf1dbe268e414}{lif\+\_\+newdir}} (\mbox{\hyperlink{structlif__t}{lif\+\_\+t}} $\ast$L\+IF, long sectors)
\begin{DoxyCompactList}\small\item\em Allocate index of free directory record. \end{DoxyCompactList}\item 
\mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} \mbox{\hyperlink{structlif__t}{lif\+\_\+t}} $\ast$ \mbox{\hyperlink{lifutils_8c_a982b5ca066312fb4912c15a002b0aeed}{lif\+\_\+open\+\_\+volume}} (char $\ast$name, char $\ast$mode)
\begin{DoxyCompactList}\small\item\em Open L\+IF directory for reading. \end{DoxyCompactList}\item 
\mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} void \mbox{\hyperlink{lifutils_8c_ab1cc4d2745277a057661a9403f87cafe}{lif\+\_\+dir}} (char $\ast$lifimagename)
\begin{DoxyCompactList}\small\item\em Display a L\+IF image file directory. \end{DoxyCompactList}\item 
\mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} int \mbox{\hyperlink{lifutils_8c_a3aa4f8a1fcdc71af87f471b9a4414415}{lif\+\_\+find\+\_\+file}} (\mbox{\hyperlink{structlif__t}{lif\+\_\+t}} $\ast$L\+IF, char $\ast$liflabel)
\begin{DoxyCompactList}\small\item\em Find a L\+IF image file by name. \end{DoxyCompactList}\item 
\mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} int \mbox{\hyperlink{lifutils_8c_a437c2155a777ed5be9d53e0491001751}{lif\+\_\+e010\+\_\+pad\+\_\+sector}} (long offset, uint8\+\_\+t $\ast$wbuf)
\begin{DoxyCompactList}\small\item\em H\+P85 E010 A\+S\+C\+II L\+IF records ef \mbox{[}ff\mbox{]}$\ast$ = no more data in this sector df size \mbox{[}A\+S\+C\+II\mbox{]} = data must fit inside this sector cf size \mbox{[}A\+S\+C\+II\mbox{]} = split data accross sector boundry, \char`\"{}6f\char`\"{} record continues at start of next sector Note\+: The 6f header is I\+N\+S\+I\+DE the \char`\"{}cf\char`\"{} record and not included in the \char`\"{}cf\char`\"{} size value (yuck!) 6f size \mbox{[}A\+S\+C\+II\mbox{]} = split continue (always starts at sector boundry) df 00 00 ef \mbox{[}ff\mbox{]}$\ast$ = E\+OF (df size = 0) pad with \char`\"{}ef\char`\"{} and \char`\"{}ff\char`\"{} until sector end size = 16 bits L\+SB M\+SB. \end{DoxyCompactList}\item 
\mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} int \mbox{\hyperlink{lifutils_8c_a41d5fbd0df0da5fb7f126aa76959c518}{lif\+\_\+ascii\+\_\+string\+\_\+to\+\_\+e010}} (char $\ast$str, long offset, uint8\+\_\+t $\ast$wbuf)
\begin{DoxyCompactList}\small\item\em Convert an A\+S\+C\+II string into H\+P85 E010 format. \end{DoxyCompactList}\item 
\mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} long \mbox{\hyperlink{lifutils_8c_ae63f3f2ff0ff20f2c286ea9a88577e55}{lif\+\_\+add\+\_\+ascii\+\_\+file\+\_\+as\+\_\+e010\+\_\+wrapper}} (\mbox{\hyperlink{structlif__t}{lif\+\_\+t}} $\ast$L\+IF, uint32\+\_\+t offset, char $\ast$username)
\begin{DoxyCompactList}\small\item\em Add A\+S\+C\+II file as E010 data to L\+IF image -\/ or compute converted data size To find size of formatted result only, without writting, set L\+IF to N\+U\+LL. \end{DoxyCompactList}\item 
\mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} long \mbox{\hyperlink{lifutils_8c_a41e5bf70103522d814831d085476359c}{lif\+\_\+add\+\_\+ascii\+\_\+file\+\_\+as\+\_\+e010}} (char $\ast$lifimagename, char $\ast$lifname, char $\ast$userfile)
\begin{DoxyCompactList}\small\item\em Convert and add A\+S\+C\+II file to the L\+IF image as type E010 format The basename of the lifname, without extensions, is used as the L\+IF file name. \end{DoxyCompactList}\item 
\mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} int \mbox{\hyperlink{lifutils_8c_a174f02d0e64e50ce40e692d6c3ce0af0}{lif\+\_\+extract\+\_\+e010\+\_\+as\+\_\+ascii}} (char $\ast$lifimagename, char $\ast$lifname, char $\ast$username)
\begin{DoxyCompactList}\small\item\em Extract E010 type file from L\+IF image and save as user A\+S\+C\+II file. \end{DoxyCompactList}\item 
\mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} int \mbox{\hyperlink{lifutils_8c_ad794aef9462a1b7c6822f6dcdb346680}{lif\+\_\+extract\+\_\+lif\+\_\+as\+\_\+lif}} (char $\ast$lifimagename, char $\ast$lifname, char $\ast$username)
\begin{DoxyCompactList}\small\item\em Extract a file from L\+IF image entry as standalone L\+IF image. \end{DoxyCompactList}\item 
\mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} long \mbox{\hyperlink{lifutils_8c_a240d782bc59f4d263d345318b94b66a5}{lif\+\_\+add\+\_\+lif\+\_\+file}} (char $\ast$lifimagename, char $\ast$lifname, char $\ast$userfile)
\begin{DoxyCompactList}\small\item\em Add L\+IF file from another L\+IF image. \end{DoxyCompactList}\item 
\mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} int \mbox{\hyperlink{lifutils_8c_a875b62c5b7f9c40d9aa9620ded12db84}{lif\+\_\+del\+\_\+file}} (char $\ast$lifimagename, char $\ast$lifname)
\begin{DoxyCompactList}\small\item\em Delete L\+IF file in L\+IF image. \end{DoxyCompactList}\item 
\mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} int \mbox{\hyperlink{lifutils_8c_a4f93e888b2ad255e5db96a9840d22d61}{lif\+\_\+rename\+\_\+file}} (char $\ast$lifimagename, char $\ast$oldlifname, char $\ast$newlifname)
\begin{DoxyCompactList}\small\item\em Rename L\+IF file in L\+IF image. \end{DoxyCompactList}\item 
\mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} long \mbox{\hyperlink{lifutils_8c_a88a6a829944a8acd4fa4152a79381c20}{lif\+\_\+create\+\_\+image}} (char $\ast$lifimagename, char $\ast$liflabel, uint32\+\_\+t dirsectors, uint32\+\_\+t sectors)
\begin{DoxyCompactList}\small\item\em Create/\+Format a L\+IF new disk image This can take a while to run, about 1 min for 10,000,000 bytes. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
int \mbox{\hyperlink{lifutils_8c_af219299ebad47daa6631415a8b41345a}{debuglevel}}
\begin{DoxyCompactList}\small\item\em Debug flag -\/ used to log G\+P\+IB and emulator messages. \end{DoxyCompactList}\item 
\mbox{\hyperlink{structhpdir__t}{hpdir\+\_\+t}} \mbox{\hyperlink{lifutils_8c_a6edb848661be578eca78845085870674}{hpdir}}
\begin{DoxyCompactList}\small\item\em hpdir.\+ini file processing \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
L\+IF file utilities. 

\begin{DoxyParagraph}{Copyright \copyright{} 2014-\/2020 Mike Gore, All rights reserved. G\+PL}

\end{DoxyParagraph}
\begin{DoxySeeAlso}{See also}
\href{http://github.com/magore/hp85disk}{\texttt{ http\+://github.\+com/magore/hp85disk}} 

\href{http://github.com/magore/hp85disk/COPYRIGHT.md}{\texttt{ http\+://github.\+com/magore/hp85disk/\+C\+O\+P\+Y\+R\+I\+G\+H\+T.\+md}} for Copyright details
\end{DoxySeeAlso}
\begin{DoxyParagraph}{Edit History}

\begin{DoxyItemize}
\item \mbox{[}1.\+0\mbox{]} \mbox{[}Mike Gore\mbox{]} Initial revision of file.

L\+IF command help lif add lifimage lifname from\+\_\+ascii\+\_\+file Add A\+S\+C\+II file converted to E010 format to existing L\+IF image on SD card lif add /amigo1.lif T\+E\+S\+T1 /test.bas lif add /amigo1.lif T\+R\+E\+K85 /\+T\+R\+E\+K85/\+T\+R\+E\+K85.B\+AS Notes\+: Strings must be no longer then sector size -\/ 3 Any trailing \char`\"{}\textbackslash{}n\char`\"{} and/or \char`\"{}\textbackslash{}r\char`\"{} are coverted to \char`\"{}\textbackslash{}n\char`\"{} when stored in L\+IF file

lif addbin lifimage lifname from\+\_\+lif\+\_\+image Adding a binary L\+IF image files to another L\+IF image Examples lif addbin /amigo1.lif T\+E\+ST /test.lif lif addbin /amigo1.lif T\+R\+E\+K85 /\+T\+R\+E\+K85/trek.lif Notes about T\+R\+E\+K85 in the examples Author\+: T\+R\+E\+K85 port was done by Martin Hepperle \href{https://groups.io/g/hpseries80/topic/star_trek_game_for_hp_85/4845241}{\texttt{ https\+://groups.\+io/g/hpseries80/topic/star\+\_\+trek\+\_\+game\+\_\+for\+\_\+hp\+\_\+85/4845241}}

lif create lifimage liflabel directory\+\_\+sectors total\+\_\+sectors Create a new L\+IF image Example lif create /amigo3.lif A\+M\+I\+G\+O3 15 1120 This formats an L\+IF image file with 15 directory sectors and a length of 1120 (16 $\ast$ 2 $\ast$ 35) sectors

lif del lifimage lifname Delete a file from L\+IF image on SD card Example lif del /amigo1.lif T\+R\+E\+K85

lif dir lifimage Directory listing of L\+IF image Example\+: 
\begin{DoxyPre}
lif dir amigo1.lif
Volume:[AMIGO2] Date:[<EMPTY>]
NAME         TYPE   START SECTOR        SIZE    RECSIZE   DATE
HELLO       e020h            10h         512        256   <EMPTY>
CIRCLE      e020h            12h         256        256   <EMPTY>
GPIB-\/S      e020h            13h         512        256   <EMPTY>
GPIB-\/T      e020h            15h        1536        256   <EMPTY>
GPIB7       e020h            1bh         256        256   <EMPTY>
AMIGO2      e020h            1ch         256        256   <EMPTY>
TREK85      e010h            1dh       27615        256   Tue Jun 27 16:28:28 2017
HELLO3      e010h            8bh         344        256   Sun Jun 18 18:13:24 2017
TREK85B     e010h            8dh       27615        256   Tue Jun 27 16:28:28 2017\end{DoxyPre}

\end{DoxyItemize}
\end{DoxyParagraph}
9 Files 0 Purged 231 Used sectors 873 Free sectors 


\begin{DoxyPre}  lif extract lifimage lifname to\_ascii\_file
  Extracts E010 file from LIF image converting to ASCII file on SD card
  Example
lif extract /amigo1.lif HELLO3 /HELLO3.BAS\end{DoxyPre}



\begin{DoxyPre}  lif extractbin lifimage lifname to\_lif\_image
  Extracts LIF file from a LIF image and saves it as new LIF image
  Example
  lif extractbin /amigo1.lif HELLO3 /hello3.lif\end{DoxyPre}



\begin{DoxyPre}  lif rename lifimage oldlifname newlifname
  Renames file in LIF image
  Example
  lif rename /amigo1.lif HELLO3 HELLO4
   OPTIONAL -\/ compile time add on
   lif td02lif image.td0 image.lif
   Convert TeleDIsk LIF encoded disk into pure LIF file
   Uses code from external HxCFloppyEmulator library to decode TELEDISK format
   The HxCFloppyEmulator library is Copyright (C) 2006-\/2014 Jean-\/Franâois DEL NERO
   See: \href{https://github.com/xXorAa/hxc-software/tree/master/HxCFloppyEmulator/libhxcfe/trunk/sources/loaders/teledisk_loader}{\texttt{ https://github.com/xXorAa/hxc-\/software/tree/master/HxCFloppyEmulator/libhxcfe/trunk/sources/loaders/teledisk\_loader}}
\end{DoxyPre}


\doxysubsection{Function Documentation}
\mbox{\Hypertarget{lifutils_8c_a41e5bf70103522d814831d085476359c}\label{lifutils_8c_a41e5bf70103522d814831d085476359c}} 
\index{lifutils.c@{lifutils.c}!lif\_add\_ascii\_file\_as\_e010@{lif\_add\_ascii\_file\_as\_e010}}
\index{lif\_add\_ascii\_file\_as\_e010@{lif\_add\_ascii\_file\_as\_e010}!lifutils.c@{lifutils.c}}
\doxysubsubsection{\texorpdfstring{lif\_add\_ascii\_file\_as\_e010()}{lif\_add\_ascii\_file\_as\_e010()}}
{\footnotesize\ttfamily \mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} long lif\+\_\+add\+\_\+ascii\+\_\+file\+\_\+as\+\_\+e010 (\begin{DoxyParamCaption}\item[{char $\ast$}]{lifimagename,  }\item[{char $\ast$}]{lifname,  }\item[{char $\ast$}]{userfile }\end{DoxyParamCaption})}



Convert and add A\+S\+C\+II file to the L\+IF image as type E010 format The basename of the lifname, without extensions, is used as the L\+IF file name. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em lifimagename} & L\+IF image name \\
\hline
\mbox{\texttt{ in}}  & {\em lifname} & L\+IF file name \\
\hline
\mbox{\texttt{ in}}  & {\em userfile} & userfile name \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
size of data written into to L\+IF image, or -\/1 on error F\+I\+X\+ME assumes 256 byte secors 
\end{DoxyReturn}


Definition at line 2098 of file lifutils.\+c.



Referenced by lif\+\_\+tests().

\mbox{\Hypertarget{lifutils_8c_ae63f3f2ff0ff20f2c286ea9a88577e55}\label{lifutils_8c_ae63f3f2ff0ff20f2c286ea9a88577e55}} 
\index{lifutils.c@{lifutils.c}!lif\_add\_ascii\_file\_as\_e010\_wrapper@{lif\_add\_ascii\_file\_as\_e010\_wrapper}}
\index{lif\_add\_ascii\_file\_as\_e010\_wrapper@{lif\_add\_ascii\_file\_as\_e010\_wrapper}!lifutils.c@{lifutils.c}}
\doxysubsubsection{\texorpdfstring{lif\_add\_ascii\_file\_as\_e010\_wrapper()}{lif\_add\_ascii\_file\_as\_e010\_wrapper()}}
{\footnotesize\ttfamily \mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} long lif\+\_\+add\+\_\+ascii\+\_\+file\+\_\+as\+\_\+e010\+\_\+wrapper (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structlif__t}{lif\+\_\+t}} $\ast$}]{L\+IF,  }\item[{uint32\+\_\+t}]{offset,  }\item[{char $\ast$}]{username }\end{DoxyParamCaption})}



Add A\+S\+C\+II file as E010 data to L\+IF image -\/ or compute converted data size To find size of formatted result only, without writting, set L\+IF to N\+U\+LL. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em userfile} & User A\+S\+C\+II file source \\
\hline
\mbox{\texttt{ in}}  & {\em $\ast$\+L\+IF} & Where to write file if set (not N\+U\+LL) \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
size of formatted result F\+I\+X\+ME assumes 256 byte secors 
\end{DoxyReturn}


Definition at line 2001 of file lifutils.\+c.



Referenced by lif\+\_\+add\+\_\+ascii\+\_\+file\+\_\+as\+\_\+e010().

\mbox{\Hypertarget{lifutils_8c_a240d782bc59f4d263d345318b94b66a5}\label{lifutils_8c_a240d782bc59f4d263d345318b94b66a5}} 
\index{lifutils.c@{lifutils.c}!lif\_add\_lif\_file@{lif\_add\_lif\_file}}
\index{lif\_add\_lif\_file@{lif\_add\_lif\_file}!lifutils.c@{lifutils.c}}
\doxysubsubsection{\texorpdfstring{lif\_add\_lif\_file()}{lif\_add\_lif\_file()}}
{\footnotesize\ttfamily \mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} long lif\+\_\+add\+\_\+lif\+\_\+file (\begin{DoxyParamCaption}\item[{char $\ast$}]{lifimagename,  }\item[{char $\ast$}]{lifname,  }\item[{char $\ast$}]{userfile }\end{DoxyParamCaption})}



Add L\+IF file from another L\+IF image. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em lifimagename} & L\+IF image name \\
\hline
\mbox{\texttt{ in}}  & {\em lifname} & L\+IF file name to copy file to \\
\hline
\mbox{\texttt{ in}}  & {\em userfile} & L\+IF mage name copy file from \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
size of data written into to L\+IF image, or -\/1 on error F\+I\+X\+ME assumes 256 byte secors 
\end{DoxyReturn}


Definition at line 2480 of file lifutils.\+c.



Referenced by lif\+\_\+tests().

\mbox{\Hypertarget{lifutils_8c_a41d5fbd0df0da5fb7f126aa76959c518}\label{lifutils_8c_a41d5fbd0df0da5fb7f126aa76959c518}} 
\index{lifutils.c@{lifutils.c}!lif\_ascii\_string\_to\_e010@{lif\_ascii\_string\_to\_e010}}
\index{lif\_ascii\_string\_to\_e010@{lif\_ascii\_string\_to\_e010}!lifutils.c@{lifutils.c}}
\doxysubsubsection{\texorpdfstring{lif\_ascii\_string\_to\_e010()}{lif\_ascii\_string\_to\_e010()}}
{\footnotesize\ttfamily \mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} int lif\+\_\+ascii\+\_\+string\+\_\+to\+\_\+e010 (\begin{DoxyParamCaption}\item[{char $\ast$}]{str,  }\item[{long}]{offset,  }\item[{uint8\+\_\+t $\ast$}]{wbuf }\end{DoxyParamCaption})}



Convert an A\+S\+C\+II string into H\+P85 E010 format. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em str} & A\+S\+C\+II string to write \\
\hline
\mbox{\texttt{ in}}  & {\em offset} & E010 data sector offset, only used in formatting wbuf with headers \\
\hline
\mbox{\texttt{ in}}  & {\em wbuf} & E010 data result \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
size of E010 data F\+I\+X\+ME assumes 256 byte secors 
\end{DoxyReturn}
We A\+L\+W\+A\+YS pad a sector if\+: There is no room for a 0xdf single header
\begin{DoxyItemize}
\item OR -\/ Spliting a string takes more space then padding here (extra header)
\end{DoxyItemize}

Definition at line 1906 of file lifutils.\+c.



Referenced by lif\+\_\+add\+\_\+ascii\+\_\+file\+\_\+as\+\_\+e010\+\_\+wrapper().

\mbox{\Hypertarget{lifutils_8c_ab2f681c9cb11eefcb573ab80dc9d7633}\label{lifutils_8c_ab2f681c9cb11eefcb573ab80dc9d7633}} 
\index{lifutils.c@{lifutils.c}!lif\_B2S@{lif\_B2S}}
\index{lif\_B2S@{lif\_B2S}!lifutils.c@{lifutils.c}}
\doxysubsubsection{\texorpdfstring{lif\_B2S()}{lif\_B2S()}}
{\footnotesize\ttfamily \mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} int lif\+\_\+\+B2S (\begin{DoxyParamCaption}\item[{uint8\+\_\+t $\ast$}]{B,  }\item[{uint8\+\_\+t $\ast$}]{name,  }\item[{int}]{size }\end{DoxyParamCaption})}



Convert L\+IF space padded string name into normal string. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em $\ast$B} & L\+IF name space padded \\
\hline
\mbox{\texttt{ out}}  & {\em $\ast$name} & string result with traling spaces removed \\
\hline
\mbox{\texttt{ in}}  & {\em size} & max size of name @retrun 1 if string i ok or 0 if bad characters were found \\
\hline
\end{DoxyParams}


Definition at line 474 of file lifutils.\+c.



Referenced by lif\+\_\+str2dir(), and lif\+\_\+str2vol().

\mbox{\Hypertarget{lifutils_8c_ae1cece4d7bf8e52e9fde4d1d836d4431}\label{lifutils_8c_ae1cece4d7bf8e52e9fde4d1d836d4431}} 
\index{lifutils.c@{lifutils.c}!lif\_BCD2BIN@{lif\_BCD2BIN}}
\index{lif\_BCD2BIN@{lif\_BCD2BIN}!lifutils.c@{lifutils.c}}
\doxysubsubsection{\texorpdfstring{lif\_BCD2BIN()}{lif\_BCD2BIN()}}
{\footnotesize\ttfamily \mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} int lif\+\_\+\+B\+C\+D2\+B\+IN (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{bin }\end{DoxyParamCaption})}



Convert B\+CD in the range 0 and $<$= 99 to B\+IN B\+CD format\+: each hex nibble has a digit 0 .. 9. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em data} & number to convert to binary \\
\hline
\end{DoxyParams}


Definition at line 667 of file lifutils.\+c.



Referenced by lif\+\_\+lifbcd2time().

\mbox{\Hypertarget{lifutils_8c_a74e4057cb326e5592b0c69f50eb68d02}\label{lifutils_8c_a74e4057cb326e5592b0c69f50eb68d02}} 
\index{lifutils.c@{lifutils.c}!lif\_BIN2BCD@{lif\_BIN2BCD}}
\index{lif\_BIN2BCD@{lif\_BIN2BCD}!lifutils.c@{lifutils.c}}
\doxysubsubsection{\texorpdfstring{lif\_BIN2BCD()}{lif\_BIN2BCD()}}
{\footnotesize\ttfamily \mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} uint8\+\_\+t lif\+\_\+\+B\+I\+N2\+B\+CD (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{data }\end{DoxyParamCaption})}



Convert number $>$= 0 and $<$= 99 to B\+CD. 

\begin{DoxyWarning}{Warning}
we assume the number is in range. B\+CD format\+: each hex nibble has a digit 0 .. 9 
\end{DoxyWarning}

\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em data} & number to convert. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
B\+CD value 
\end{DoxyReturn}


Definition at line 657 of file lifutils.\+c.



Referenced by lif\+\_\+time2lifbcd().

\mbox{\Hypertarget{lifutils_8c_ac41bc5c7424acf48bba35f8e552f10eb}\label{lifutils_8c_ac41bc5c7424acf48bba35f8e552f10eb}} 
\index{lifutils.c@{lifutils.c}!lif\_bytes2sectors@{lif\_bytes2sectors}}
\index{lif\_bytes2sectors@{lif\_bytes2sectors}!lifutils.c@{lifutils.c}}
\doxysubsubsection{\texorpdfstring{lif\_bytes2sectors()}{lif\_bytes2sectors()}}
{\footnotesize\ttfamily \mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} uint32\+\_\+t lif\+\_\+bytes2sectors (\begin{DoxyParamCaption}\item[{uint32\+\_\+t}]{bytes }\end{DoxyParamCaption})}



Convert bytes into used sectors. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em bytes} & size in bytes \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
sectors F\+I\+X\+ME assumes 256 byte sectors 
\end{DoxyReturn}


Definition at line 1236 of file lifutils.\+c.



Referenced by lif\+\_\+add\+\_\+ascii\+\_\+file\+\_\+as\+\_\+e010(), lif\+\_\+check\+\_\+dir(), lif\+\_\+checkdirindex(), lif\+\_\+dir(), lif\+\_\+extract\+\_\+e010\+\_\+as\+\_\+ascii(), and lif\+\_\+open\+\_\+volume().

\mbox{\Hypertarget{lifutils_8c_aca73842308f6e7769da01bd0cc10a10e}\label{lifutils_8c_aca73842308f6e7769da01bd0cc10a10e}} 
\index{lifutils.c@{lifutils.c}!lif\_calloc@{lif\_calloc}}
\index{lif\_calloc@{lif\_calloc}!lifutils.c@{lifutils.c}}
\doxysubsubsection{\texorpdfstring{lif\_calloc()}{lif\_calloc()}}
{\footnotesize\ttfamily \mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} void$\ast$ lif\+\_\+calloc (\begin{DoxyParamCaption}\item[{long}]{size }\end{DoxyParamCaption})}



Allocate and clear memory Displays message on errors. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em size} & size of memory to allocate \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
pointer to allocated memory 
\end{DoxyReturn}


Definition at line 287 of file lifutils.\+c.



Referenced by lif\+\_\+create\+\_\+volume(), lif\+\_\+open\+\_\+volume(), lif\+\_\+stralloc(), and td02lif().

\mbox{\Hypertarget{lifutils_8c_a43cc2a95e7a47cb6c70b21cd600e8f51}\label{lifutils_8c_a43cc2a95e7a47cb6c70b21cd600e8f51}} 
\index{lifutils.c@{lifutils.c}!lif\_chars@{lif\_chars}}
\index{lif\_chars@{lif\_chars}!lifutils.c@{lifutils.c}}
\doxysubsubsection{\texorpdfstring{lif\_chars()}{lif\_chars()}}
{\footnotesize\ttfamily \mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} int lif\+\_\+chars (\begin{DoxyParamCaption}\item[{int}]{c,  }\item[{int index }]{\+\_\+\+\_\+attribute\+\_\+\+\_\+(unused) }\end{DoxyParamCaption})}



Check if characters in a L\+IF volume or L\+IF file name are valid. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em c} & character to test \\
\hline
\mbox{\texttt{ in}}  & {\em index} & index of character in volume or file name @retrun c (optionally upper cased) or 0 if no match \\
\hline
\end{DoxyParams}


Definition at line 443 of file lifutils.\+c.



Referenced by lif\+\_\+\+B2\+S(), lif\+\_\+checkname(), and lif\+\_\+fixname().

\mbox{\Hypertarget{lifutils_8c_a4a037ce3b854d7f5cfd31aff61810cd4}\label{lifutils_8c_a4a037ce3b854d7f5cfd31aff61810cd4}} 
\index{lifutils.c@{lifutils.c}!lif\_check\_dir@{lif\_check\_dir}}
\index{lif\_check\_dir@{lif\_check\_dir}!lifutils.c@{lifutils.c}}
\doxysubsubsection{\texorpdfstring{lif\_check\_dir()}{lif\_check\_dir()}}
{\footnotesize\ttfamily \mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} int lif\+\_\+check\+\_\+dir (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structlif__t}{lif\+\_\+t}} $\ast$}]{L\+IF }\end{DoxyParamCaption})}



Validate Directory record values We only do basic out of bounds tests for this record Purged or E\+OF directory records are N\+OT checked and always return 1. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em $\ast$\+L\+IF} & Image structure \\
\hline
\mbox{\texttt{ in}}  & {\em debug} & dispaly diagostice messages \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
1 of ok, 0 on eeror 
\end{DoxyReturn}


Definition at line 935 of file lifutils.\+c.



Referenced by lif\+\_\+readdirindex(), lif\+\_\+writedirindex(), and td0\+\_\+save\+\_\+lif\+\_\+sector().

\mbox{\Hypertarget{lifutils_8c_a86bb283b68ec39b17f1f35e03d1dc34d}\label{lifutils_8c_a86bb283b68ec39b17f1f35e03d1dc34d}} 
\index{lifutils.c@{lifutils.c}!lif\_check\_volume@{lif\_check\_volume}}
\index{lif\_check\_volume@{lif\_check\_volume}!lifutils.c@{lifutils.c}}
\doxysubsubsection{\texorpdfstring{lif\_check\_volume()}{lif\_check\_volume()}}
{\footnotesize\ttfamily \mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} int lif\+\_\+check\+\_\+volume (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structlif__t}{lif\+\_\+t}} $\ast$}]{L\+IF }\end{DoxyParamCaption})}



Check Volume Table for values in range. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em $\ast$\+L\+IF} & Image structure \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
1 of ok, 0 on eeror 
\end{DoxyReturn}


Definition at line 861 of file lifutils.\+c.



Referenced by lif\+\_\+create\+\_\+volume(), lif\+\_\+open\+\_\+volume(), and td0\+\_\+save\+\_\+lif\+\_\+sector().

\mbox{\Hypertarget{lifutils_8c_aafa159b3cfd19fd13546dfffe86f7b4d}\label{lifutils_8c_aafa159b3cfd19fd13546dfffe86f7b4d}} 
\index{lifutils.c@{lifutils.c}!lif\_checkdirindex@{lif\_checkdirindex}}
\index{lif\_checkdirindex@{lif\_checkdirindex}!lifutils.c@{lifutils.c}}
\doxysubsubsection{\texorpdfstring{lif\_checkdirindex()}{lif\_checkdirindex()}}
{\footnotesize\ttfamily \mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} int lif\+\_\+checkdirindex (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structlif__t}{lif\+\_\+t}} $\ast$}]{L\+IF,  }\item[{int}]{index }\end{DoxyParamCaption})}



Check directory index limits. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em $\ast$\+L\+IF} & L\+IF Volume/\+Diractoy structure \\
\hline
\mbox{\texttt{ in}}  & {\em index} & directory index \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
1 inside, 0 outside 
\end{DoxyReturn}


Definition at line 1273 of file lifutils.\+c.



Referenced by lif\+\_\+readdirindex(), and lif\+\_\+writedirindex().

\mbox{\Hypertarget{lifutils_8c_a3f32a48a31e8fa225a2e5d72ffc969e6}\label{lifutils_8c_a3f32a48a31e8fa225a2e5d72ffc969e6}} 
\index{lifutils.c@{lifutils.c}!lif\_checkname@{lif\_checkname}}
\index{lif\_checkname@{lif\_checkname}!lifutils.c@{lifutils.c}}
\doxysubsubsection{\texorpdfstring{lif\_checkname()}{lif\_checkname()}}
{\footnotesize\ttfamily \mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} int lif\+\_\+checkname (\begin{DoxyParamCaption}\item[{char $\ast$}]{name }\end{DoxyParamCaption})}



Check volume L\+IF name or directory name is valid. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em $\ast$name} & name to test @retrun 1 if the string is ok or 0 if invalid L\+IF name characters on input string \\
\hline
\end{DoxyParams}


Definition at line 496 of file lifutils.\+c.



Referenced by lif\+\_\+check\+\_\+dir(), lif\+\_\+check\+\_\+volume(), lif\+\_\+find\+\_\+file(), and lif\+\_\+rename\+\_\+file().

\mbox{\Hypertarget{lifutils_8c_aeaf5399e472155070399f492a32a4326}\label{lifutils_8c_aeaf5399e472155070399f492a32a4326}} 
\index{lifutils.c@{lifutils.c}!lif\_close\_volume@{lif\_close\_volume}}
\index{lif\_close\_volume@{lif\_close\_volume}!lifutils.c@{lifutils.c}}
\doxysubsubsection{\texorpdfstring{lif\_close\_volume()}{lif\_close\_volume()}}
{\footnotesize\ttfamily \mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} void lif\+\_\+close\+\_\+volume (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structlif__t}{lif\+\_\+t}} $\ast$}]{L\+IF }\end{DoxyParamCaption})}



Free L\+IF structure and close any files. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em $\ast$\+L\+IF} & pointer to L\+IF Volume/\+Directoy structure \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}


Definition at line 1209 of file lifutils.\+c.



Referenced by lif\+\_\+closedir(), lif\+\_\+create\+\_\+image(), lif\+\_\+create\+\_\+volume(), and td02lif().

\mbox{\Hypertarget{lifutils_8c_a1cc44034801a758d64625c15810b42ab}\label{lifutils_8c_a1cc44034801a758d64625c15810b42ab}} 
\index{lifutils.c@{lifutils.c}!lif\_closedir@{lif\_closedir}}
\index{lif\_closedir@{lif\_closedir}!lifutils.c@{lifutils.c}}
\doxysubsubsection{\texorpdfstring{lif\_closedir()}{lif\_closedir()}}
{\footnotesize\ttfamily \mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} void lif\+\_\+closedir (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structlif__t}{lif\+\_\+t}} $\ast$}]{L\+IF }\end{DoxyParamCaption})}



Close L\+IF directory clear and free \mbox{\hyperlink{structlif__t}{lif\+\_\+t}} structure. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em $\ast$\+L\+IF} & pointer to L\+IF Volume/\+Directoy structure \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 on sucesss, -\/1 on error 
\end{DoxyReturn}


Definition at line 1262 of file lifutils.\+c.



Referenced by lif\+\_\+add\+\_\+ascii\+\_\+file\+\_\+as\+\_\+e010(), lif\+\_\+add\+\_\+lif\+\_\+file(), lif\+\_\+create\+\_\+volume(), lif\+\_\+del\+\_\+file(), lif\+\_\+dir(), lif\+\_\+extract\+\_\+e010\+\_\+as\+\_\+ascii(), lif\+\_\+extract\+\_\+lif\+\_\+as\+\_\+lif(), lif\+\_\+open\+\_\+volume(), and lif\+\_\+rename\+\_\+file().

\mbox{\Hypertarget{lifutils_8c_a88a6a829944a8acd4fa4152a79381c20}\label{lifutils_8c_a88a6a829944a8acd4fa4152a79381c20}} 
\index{lifutils.c@{lifutils.c}!lif\_create\_image@{lif\_create\_image}}
\index{lif\_create\_image@{lif\_create\_image}!lifutils.c@{lifutils.c}}
\doxysubsubsection{\texorpdfstring{lif\_create\_image()}{lif\_create\_image()}}
{\footnotesize\ttfamily \mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} long lif\+\_\+create\+\_\+image (\begin{DoxyParamCaption}\item[{char $\ast$}]{lifimagename,  }\item[{char $\ast$}]{liflabel,  }\item[{uint32\+\_\+t}]{dirsectors,  }\item[{uint32\+\_\+t}]{sectors }\end{DoxyParamCaption})}



Create/\+Format a L\+IF new disk image This can take a while to run, about 1 min for 10,000,000 bytes. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em lifimagename} & L\+IF disk image name \\
\hline
\mbox{\texttt{ in}}  & {\em liflabel} & L\+IF Volume Label name \\
\hline
\mbox{\texttt{ in}}  & {\em dirsectors} & Number of L\+IF directory sectors \\
\hline
\mbox{\texttt{ in}}  & {\em sectors} & total disk image size in sectors \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
bytes writting to disk image 
\end{DoxyReturn}


Definition at line 2722 of file lifutils.\+c.



Referenced by format\+\_\+drives(), and lif\+\_\+tests().

\mbox{\Hypertarget{lifutils_8c_a40173cedac7bb1b0b9f7e2902d76c3b8}\label{lifutils_8c_a40173cedac7bb1b0b9f7e2902d76c3b8}} 
\index{lifutils.c@{lifutils.c}!lif\_create\_volume@{lif\_create\_volume}}
\index{lif\_create\_volume@{lif\_create\_volume}!lifutils.c@{lifutils.c}}
\doxysubsubsection{\texorpdfstring{lif\_create\_volume()}{lif\_create\_volume()}}
{\footnotesize\ttfamily \mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} \mbox{\hyperlink{structlif__t}{lif\+\_\+t}}$\ast$ lif\+\_\+create\+\_\+volume (\begin{DoxyParamCaption}\item[{char $\ast$}]{imagename,  }\item[{char $\ast$}]{liflabel,  }\item[{long}]{dirstart,  }\item[{long}]{dirsectors,  }\item[{long}]{filesectors }\end{DoxyParamCaption})}



Create L\+IF image with Volume, Directory and optional empty filespace. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em imagename} & Image name \\
\hline
\mbox{\texttt{ in}}  & {\em liflabel} & Volume Label \\
\hline
\mbox{\texttt{ in}}  & {\em dirstart} & Directory start sector \\
\hline
\mbox{\texttt{ in}}  & {\em dirsectors} & Directory sectors \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
pointer to L\+IF structure 
\end{DoxyReturn}
0 causes time to return the current date

Definition at line 1051 of file lifutils.\+c.



Referenced by lif\+\_\+create\+\_\+image(), and lif\+\_\+extract\+\_\+lif\+\_\+as\+\_\+lif().

\mbox{\Hypertarget{lifutils_8c_a66037d0bcbffc6000a59cc291cbef769}\label{lifutils_8c_a66037d0bcbffc6000a59cc291cbef769}} 
\index{lifutils.c@{lifutils.c}!lif\_ctime\_gmt@{lif\_ctime\_gmt}}
\index{lif\_ctime\_gmt@{lif\_ctime\_gmt}!lifutils.c@{lifutils.c}}
\doxysubsubsection{\texorpdfstring{lif\_ctime\_gmt()}{lif\_ctime\_gmt()}}
{\footnotesize\ttfamily \mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} char$\ast$ lif\+\_\+ctime\+\_\+gmt (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{time_8h_a3346b04b0420b32ccf6b706551b70762}{time\+\_\+t}} $\ast$}]{tp }\end{DoxyParamCaption})}



G\+MT version of P\+O\+S\+IX \mbox{\hyperlink{time_8c_a77d6bba12950028852621634ffaf4835}{ctime()}}. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em tp} & time\+\_\+t $\ast$ time input.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
buf\mbox{[}\mbox{]}.
\begin{DoxyItemize}
\item Example\+: \char`\"{}\+Thu Dec  8 21\+:45\+:05 E\+S\+T 2011\char`\"{}. 
\end{DoxyItemize}
\end{DoxyReturn}
\begin{DoxySeeAlso}{See also}
\mbox{\hyperlink{time_8c_a77d6bba12950028852621634ffaf4835}{ctime()}} 
\end{DoxySeeAlso}
\begin{DoxyWarning}{Warning}
result is overwritten on each call. 
\end{DoxyWarning}


Definition at line 755 of file lifutils.\+c.



Referenced by lif\+\_\+lifbcd2timestr().

\mbox{\Hypertarget{lifutils_8c_a875b62c5b7f9c40d9aa9620ded12db84}\label{lifutils_8c_a875b62c5b7f9c40d9aa9620ded12db84}} 
\index{lifutils.c@{lifutils.c}!lif\_del\_file@{lif\_del\_file}}
\index{lif\_del\_file@{lif\_del\_file}!lifutils.c@{lifutils.c}}
\doxysubsubsection{\texorpdfstring{lif\_del\_file()}{lif\_del\_file()}}
{\footnotesize\ttfamily \mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} int lif\+\_\+del\+\_\+file (\begin{DoxyParamCaption}\item[{char $\ast$}]{lifimagename,  }\item[{char $\ast$}]{lifname }\end{DoxyParamCaption})}



Delete L\+IF file in L\+IF image. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em lifimagename} & L\+IF image name \\
\hline
\mbox{\texttt{ in}}  & {\em lifname} & L\+IF file name \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
1 if deleted, 0 if not found, -\/1 error 
\end{DoxyReturn}


Definition at line 2598 of file lifutils.\+c.



Referenced by lif\+\_\+tests().

\mbox{\Hypertarget{lifutils_8c_ab1cc4d2745277a057661a9403f87cafe}\label{lifutils_8c_ab1cc4d2745277a057661a9403f87cafe}} 
\index{lifutils.c@{lifutils.c}!lif\_dir@{lif\_dir}}
\index{lif\_dir@{lif\_dir}!lifutils.c@{lifutils.c}}
\doxysubsubsection{\texorpdfstring{lif\_dir()}{lif\_dir()}}
{\footnotesize\ttfamily \mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} void lif\+\_\+dir (\begin{DoxyParamCaption}\item[{char $\ast$}]{lifimagename }\end{DoxyParamCaption})}



Display a L\+IF image file directory. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em lifimagename} & L\+IF disk image name \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
-\/1 on error or number of files found 
\end{DoxyReturn}


Definition at line 1723 of file lifutils.\+c.



Referenced by lif\+\_\+tests(), and td02lif().

\mbox{\Hypertarget{lifutils_8c_a38bbbf82814835350f636cf16427ac89}\label{lifutils_8c_a38bbbf82814835350f636cf16427ac89}} 
\index{lifutils.c@{lifutils.c}!lif\_dir2str@{lif\_dir2str}}
\index{lif\_dir2str@{lif\_dir2str}!lifutils.c@{lifutils.c}}
\doxysubsubsection{\texorpdfstring{lif\_dir2str()}{lif\_dir2str()}}
{\footnotesize\ttfamily \mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} void lif\+\_\+dir2str (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structlif__t}{lif\+\_\+t}} $\ast$}]{L\+IF,  }\item[{uint8\+\_\+t $\ast$}]{B }\end{DoxyParamCaption})}



Convert L\+IF directory records into byte vector. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em $\ast$\+L\+IF} & L\+IF image pointer \\
\hline
\mbox{\texttt{ out}}  & {\em B} & byte vector to pack data into \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}


Definition at line 620 of file lifutils.\+c.



Referenced by lif\+\_\+create\+\_\+volume(), lif\+\_\+writedirindex(), and td0\+\_\+save\+\_\+lif\+\_\+sector().

\mbox{\Hypertarget{lifutils_8c_a29c92c7454bad4eb13e9f7ff89995fe2}\label{lifutils_8c_a29c92c7454bad4eb13e9f7ff89995fe2}} 
\index{lifutils.c@{lifutils.c}!lif\_dir\_clear@{lif\_dir\_clear}}
\index{lif\_dir\_clear@{lif\_dir\_clear}!lifutils.c@{lifutils.c}}
\doxysubsubsection{\texorpdfstring{lif\_dir\_clear()}{lif\_dir\_clear()}}
{\footnotesize\ttfamily \mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} void lif\+\_\+dir\+\_\+clear (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structlif__t}{lif\+\_\+t}} $\ast$}]{L\+IF }\end{DoxyParamCaption})}



Clear \mbox{\hyperlink{structDIR}{D\+IR}} part of L\+IF structure. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em $\ast$\+L\+IF} & pointer to L\+IF structure \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}


Definition at line 805 of file lifutils.\+c.



Referenced by lif\+\_\+create\+\_\+volume(), lif\+\_\+newdir(), and lif\+\_\+writedir\+E\+O\+F().

\mbox{\Hypertarget{lifutils_8c_a5c2eb20c1c8f59cae0845a564b5c95db}\label{lifutils_8c_a5c2eb20c1c8f59cae0845a564b5c95db}} 
\index{lifutils.c@{lifutils.c}!lif\_dump\_vol@{lif\_dump\_vol}}
\index{lif\_dump\_vol@{lif\_dump\_vol}!lifutils.c@{lifutils.c}}
\doxysubsubsection{\texorpdfstring{lif\_dump\_vol()}{lif\_dump\_vol()}}
{\footnotesize\ttfamily \mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} void lif\+\_\+dump\+\_\+vol (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structlif__t}{lif\+\_\+t}} $\ast$}]{L\+IF,  }\item[{char $\ast$}]{msg }\end{DoxyParamCaption})}



Dump L\+IF struture data for debugging. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em $\ast$\+L\+IF} & pointer to L\+IF structure \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}


Definition at line 825 of file lifutils.\+c.



Referenced by lif\+\_\+add\+\_\+ascii\+\_\+file\+\_\+as\+\_\+e010(), lif\+\_\+checkdirindex(), lif\+\_\+create\+\_\+volume(), lif\+\_\+open\+\_\+volume(), lif\+\_\+readdirindex(), lif\+\_\+writedirindex(), and td0\+\_\+save\+\_\+lif\+\_\+sector().

\mbox{\Hypertarget{lifutils_8c_a437c2155a777ed5be9d53e0491001751}\label{lifutils_8c_a437c2155a777ed5be9d53e0491001751}} 
\index{lifutils.c@{lifutils.c}!lif\_e010\_pad\_sector@{lif\_e010\_pad\_sector}}
\index{lif\_e010\_pad\_sector@{lif\_e010\_pad\_sector}!lifutils.c@{lifutils.c}}
\doxysubsubsection{\texorpdfstring{lif\_e010\_pad\_sector()}{lif\_e010\_pad\_sector()}}
{\footnotesize\ttfamily \mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} int lif\+\_\+e010\+\_\+pad\+\_\+sector (\begin{DoxyParamCaption}\item[{long}]{offset,  }\item[{uint8\+\_\+t $\ast$}]{wbuf }\end{DoxyParamCaption})}



H\+P85 E010 A\+S\+C\+II L\+IF records ef \mbox{[}ff\mbox{]}$\ast$ = no more data in this sector df size \mbox{[}A\+S\+C\+II\mbox{]} = data must fit inside this sector cf size \mbox{[}A\+S\+C\+II\mbox{]} = split data accross sector boundry, \char`\"{}6f\char`\"{} record continues at start of next sector Note\+: The 6f header is I\+N\+S\+I\+DE the \char`\"{}cf\char`\"{} record and not included in the \char`\"{}cf\char`\"{} size value (yuck!) 6f size \mbox{[}A\+S\+C\+II\mbox{]} = split continue (always starts at sector boundry) df 00 00 ef \mbox{[}ff\mbox{]}$\ast$ = E\+OF (df size = 0) pad with \char`\"{}ef\char`\"{} and \char`\"{}ff\char`\"{} until sector end size = 16 bits L\+SB M\+SB. 

Example\+: 000080e0 \+: 4b 7c 22 0d cf 29 00 31 34 20 44 49 53 50 20 22 \+: K$\vert$\char`\"{}..).\+14 D\+I\+S\+P \char`\"{} 000080f0 \+: 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 5f \+: \+\_\+ 00008100 \+: 6f 10 00 5f 5f 5f 5f 5f 5f 5f 5f 5f 5f 5f 5f 5f \+: o..\+\_\+\+\_\+\+\_\+\+\_\+\+\_\+\+\_\+\+\_\+\+\_\+\+\_\+\+\_\+\+\_\+\+\_\+\+\_\+ 00008110 \+: 5f 22 0d df 2b 00 31 35 20 44 49 53 50 20 22 20 \+: \+\_\+\char`\"{}..+.\+15 D\+I\+S\+P \char`\"{}

cf 29 00 (19 is to sector end) (new sector start with 6F 10 00 (10 is remainder) So 29 = 19 and 10 (yuck!)

P\+AD wbuf to sector boundry 
\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em offset} & sector offset \\
\hline
\mbox{\texttt{ in}}  & {\em wbuf} & E010 P\+AD data \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
size of E010 P\+AD data F\+I\+X\+ME assumes 256 byte secors 
\end{DoxyReturn}


Definition at line 1866 of file lifutils.\+c.



Referenced by lif\+\_\+add\+\_\+ascii\+\_\+file\+\_\+as\+\_\+e010\+\_\+wrapper(), and lif\+\_\+ascii\+\_\+string\+\_\+to\+\_\+e010().

\mbox{\Hypertarget{lifutils_8c_a174f02d0e64e50ce40e692d6c3ce0af0}\label{lifutils_8c_a174f02d0e64e50ce40e692d6c3ce0af0}} 
\index{lifutils.c@{lifutils.c}!lif\_extract\_e010\_as\_ascii@{lif\_extract\_e010\_as\_ascii}}
\index{lif\_extract\_e010\_as\_ascii@{lif\_extract\_e010\_as\_ascii}!lifutils.c@{lifutils.c}}
\doxysubsubsection{\texorpdfstring{lif\_extract\_e010\_as\_ascii()}{lif\_extract\_e010\_as\_ascii()}}
{\footnotesize\ttfamily \mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} int lif\+\_\+extract\+\_\+e010\+\_\+as\+\_\+ascii (\begin{DoxyParamCaption}\item[{char $\ast$}]{lifimagename,  }\item[{char $\ast$}]{lifname,  }\item[{char $\ast$}]{username }\end{DoxyParamCaption})}



Extract E010 type file from L\+IF image and save as user A\+S\+C\+II file. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em lifimagename} & L\+IF disk image name \\
\hline
\mbox{\texttt{ in}}  & {\em lifname} & name of file in L\+IF image \\
\hline
\mbox{\texttt{ in}}  & {\em username} & name to call the extracted image \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
1 on sucess or 0 on error F\+I\+X\+ME assumes 256 byte secors 
\end{DoxyReturn}


Definition at line 2202 of file lifutils.\+c.



Referenced by lif\+\_\+tests().

\mbox{\Hypertarget{lifutils_8c_ad794aef9462a1b7c6822f6dcdb346680}\label{lifutils_8c_ad794aef9462a1b7c6822f6dcdb346680}} 
\index{lifutils.c@{lifutils.c}!lif\_extract\_lif\_as\_lif@{lif\_extract\_lif\_as\_lif}}
\index{lif\_extract\_lif\_as\_lif@{lif\_extract\_lif\_as\_lif}!lifutils.c@{lifutils.c}}
\doxysubsubsection{\texorpdfstring{lif\_extract\_lif\_as\_lif()}{lif\_extract\_lif\_as\_lif()}}
{\footnotesize\ttfamily \mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} int lif\+\_\+extract\+\_\+lif\+\_\+as\+\_\+lif (\begin{DoxyParamCaption}\item[{char $\ast$}]{lifimagename,  }\item[{char $\ast$}]{lifname,  }\item[{char $\ast$}]{username }\end{DoxyParamCaption})}



Extract a file from L\+IF image entry as standalone L\+IF image. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em lifimagename} & L\+IF disk image name to extract file from \\
\hline
\mbox{\texttt{ in}}  & {\em lifname} & name of file in L\+IF image we want to extract \\
\hline
\mbox{\texttt{ in}}  & {\em username} & new L\+IF file to create \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
1 on sucess or 0 on error F\+I\+X\+ME assumes 256 byte secors 
\end{DoxyReturn}


Definition at line 2379 of file lifutils.\+c.



Referenced by lif\+\_\+tests().

\mbox{\Hypertarget{lifutils_8c_a3aa4f8a1fcdc71af87f471b9a4414415}\label{lifutils_8c_a3aa4f8a1fcdc71af87f471b9a4414415}} 
\index{lifutils.c@{lifutils.c}!lif\_find\_file@{lif\_find\_file}}
\index{lif\_find\_file@{lif\_find\_file}!lifutils.c@{lifutils.c}}
\doxysubsubsection{\texorpdfstring{lif\_find\_file()}{lif\_find\_file()}}
{\footnotesize\ttfamily \mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} int lif\+\_\+find\+\_\+file (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structlif__t}{lif\+\_\+t}} $\ast$}]{L\+IF,  }\item[{char $\ast$}]{liflabel }\end{DoxyParamCaption})}



Find a L\+IF image file by name. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em $\ast$\+L\+IF} & directory pointer \\
\hline
\mbox{\texttt{ in}}  & {\em liflabel} & File name in L\+IF image \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Directory index of record 
\end{DoxyReturn}


Definition at line 1804 of file lifutils.\+c.



Referenced by lif\+\_\+add\+\_\+lif\+\_\+file(), lif\+\_\+del\+\_\+file(), lif\+\_\+extract\+\_\+e010\+\_\+as\+\_\+ascii(), lif\+\_\+extract\+\_\+lif\+\_\+as\+\_\+lif(), and lif\+\_\+rename\+\_\+file().

\mbox{\Hypertarget{lifutils_8c_a05e815994fb0e328a72e3a514428f07f}\label{lifutils_8c_a05e815994fb0e328a72e3a514428f07f}} 
\index{lifutils.c@{lifutils.c}!lif\_fixname@{lif\_fixname}}
\index{lif\_fixname@{lif\_fixname}!lifutils.c@{lifutils.c}}
\doxysubsubsection{\texorpdfstring{lif\_fixname()}{lif\_fixname()}}
{\footnotesize\ttfamily \mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} int lif\+\_\+fixname (\begin{DoxyParamCaption}\item[{uint8\+\_\+t $\ast$}]{B,  }\item[{char $\ast$}]{name,  }\item[{int}]{size }\end{DoxyParamCaption})}



Convert name into a valid L\+IF name Only use the \mbox{\hyperlink{posix_8c_a4d3dfaf2f5a63e2e4eaa128477a9b5e7}{basename()}} part of the string and remove any file name extentions L\+IF names may have only these characters\+: \mbox{[}A-\/Z\mbox{]}\mbox{[}A-\/\+Z0-\/09\+\_\+\mbox{]}+ L\+IF names are converted to upper case L\+IF names are padded at the end with spaces Any invalid input characters are converted into spaces. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ out}}  & {\em $\ast$B} & output L\+IF string \\
\hline
\mbox{\texttt{ in}}  & {\em $\ast$name} & input string \\
\hline
\mbox{\texttt{ in}}  & {\em size} & maximum size of output string \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
length of result 
\end{DoxyReturn}


Definition at line 538 of file lifutils.\+c.



Referenced by lif\+\_\+add\+\_\+ascii\+\_\+file\+\_\+as\+\_\+e010(), lif\+\_\+create\+\_\+volume(), and lif\+\_\+rename\+\_\+file().

\mbox{\Hypertarget{lifutils_8c_acfb51c03b6de7a7b6ff9bb08712709f1}\label{lifutils_8c_acfb51c03b6de7a7b6ff9bb08712709f1}} 
\index{lifutils.c@{lifutils.c}!lif\_free@{lif\_free}}
\index{lif\_free@{lif\_free}!lifutils.c@{lifutils.c}}
\doxysubsubsection{\texorpdfstring{lif\_free()}{lif\_free()}}
{\footnotesize\ttfamily \mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} void lif\+\_\+free (\begin{DoxyParamCaption}\item[{void $\ast$}]{p }\end{DoxyParamCaption})}



Free allocated memory Displays message on errors. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em p} & pointer to memory to free \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
pointer to allocated memory 
\end{DoxyReturn}


Definition at line 302 of file lifutils.\+c.



Referenced by lif\+\_\+close\+\_\+volume().

\mbox{\Hypertarget{lifutils_8c_aaa09913ea26aad14d68bf5459a4b502f}\label{lifutils_8c_aaa09913ea26aad14d68bf5459a4b502f}} 
\index{lifutils.c@{lifutils.c}!lif\_help@{lif\_help}}
\index{lif\_help@{lif\_help}!lifutils.c@{lifutils.c}}
\doxysubsubsection{\texorpdfstring{lif\_help()}{lif\_help()}}
{\footnotesize\ttfamily \mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} void lif\+\_\+help (\begin{DoxyParamCaption}\item[{int}]{full }\end{DoxyParamCaption})}



Help Menu for User invoked G\+P\+IB functions and tasks See\+: int gpib\+\_\+tests(char $\ast$str) 

\begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}


Definition at line 111 of file lifutils.\+c.



Referenced by help(), and lif\+\_\+tests().

\mbox{\Hypertarget{lifutils_8c_a4076e72afcb9beaca5886c5e7e83aed7}\label{lifutils_8c_a4076e72afcb9beaca5886c5e7e83aed7}} 
\index{lifutils.c@{lifutils.c}!lif\_image\_clear@{lif\_image\_clear}}
\index{lif\_image\_clear@{lif\_image\_clear}!lifutils.c@{lifutils.c}}
\doxysubsubsection{\texorpdfstring{lif\_image\_clear()}{lif\_image\_clear()}}
{\footnotesize\ttfamily \mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} void lif\+\_\+image\+\_\+clear (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structlif__t}{lif\+\_\+t}} $\ast$}]{L\+IF }\end{DoxyParamCaption})}



File seek with error message. 

Clear L\+IF structure 
\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em $\ast$\+L\+IF} & pointer to L\+IF structure \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}


Definition at line 795 of file lifutils.\+c.



Referenced by lif\+\_\+create\+\_\+volume(), and td02lif().

\mbox{\Hypertarget{lifutils_8c_a69b46ceeea3124d0810fc00f910ff342}\label{lifutils_8c_a69b46ceeea3124d0810fc00f910ff342}} 
\index{lifutils.c@{lifutils.c}!lif\_lifbcd2time@{lif\_lifbcd2time}}
\index{lif\_lifbcd2time@{lif\_lifbcd2time}!lifutils.c@{lifutils.c}}
\doxysubsubsection{\texorpdfstring{lif\_lifbcd2time()}{lif\_lifbcd2time()}}
{\footnotesize\ttfamily \mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} \mbox{\hyperlink{time_8h_a3346b04b0420b32ccf6b706551b70762}{time\+\_\+t}} lif\+\_\+lifbcd2time (\begin{DoxyParamCaption}\item[{uint8\+\_\+t $\ast$}]{bcd }\end{DoxyParamCaption})}



convert B\+CD date into time\+\_\+t value The B\+CD year is only the lower 2 digits of the year So We assume that values $<$= 70 are years $>$= 2000 B\+CD Day and Month start at 1 If A\+LL B\+CD digits are 0 we return 0 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em $\ast$bcd} & packed 6 byte B\+CD L\+IF time YY MM DD HH MM SS \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
time\+\_\+t result or 0 if all bcd digits were 0 
\end{DoxyReturn}


Definition at line 713 of file lifutils.\+c.



Referenced by lif\+\_\+extract\+\_\+e010\+\_\+as\+\_\+ascii(), and lif\+\_\+lifbcd2timestr().

\mbox{\Hypertarget{lifutils_8c_a5ab27bae428e4b04e1c056f67f65c22f}\label{lifutils_8c_a5ab27bae428e4b04e1c056f67f65c22f}} 
\index{lifutils.c@{lifutils.c}!lif\_lifbcd2timestr@{lif\_lifbcd2timestr}}
\index{lif\_lifbcd2timestr@{lif\_lifbcd2timestr}!lifutils.c@{lifutils.c}}
\doxysubsubsection{\texorpdfstring{lif\_lifbcd2timestr()}{lif\_lifbcd2timestr()}}
{\footnotesize\ttfamily \mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} char$\ast$ lif\+\_\+lifbcd2timestr (\begin{DoxyParamCaption}\item[{uint8\+\_\+t $\ast$}]{bcd }\end{DoxyParamCaption})}

@breif convert B\+CD time into a date string The B\+CD year is only the lower 2 digits of the year So We assume that values $<$= 70 are years $>$= 2000 B\+CD Day and Month start at 1 If B\+CD string is all zero we return $<$\+E\+M\+P\+T\+Y$>$ 
\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em $\ast$bcd} & pcked 6 byte B\+CD L\+IF time YY MM DD HH MM SS \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
string result 
\end{DoxyReturn}


Definition at line 775 of file lifutils.\+c.



Referenced by lif\+\_\+dir(), lif\+\_\+dump\+\_\+vol(), and td0\+\_\+save\+\_\+lif\+\_\+sector().

\mbox{\Hypertarget{lifutils_8c_aa815e9770db054c7f53cf1dbe268e414}\label{lifutils_8c_aa815e9770db054c7f53cf1dbe268e414}} 
\index{lifutils.c@{lifutils.c}!lif\_newdir@{lif\_newdir}}
\index{lif\_newdir@{lif\_newdir}!lifutils.c@{lifutils.c}}
\doxysubsubsection{\texorpdfstring{lif\_newdir()}{lif\_newdir()}}
{\footnotesize\ttfamily \mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} int lif\+\_\+newdir (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structlif__t}{lif\+\_\+t}} $\ast$}]{L\+IF,  }\item[{long}]{sectors }\end{DoxyParamCaption})}



Allocate index of free directory record. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em $\ast$\+L\+IF} & L\+IF pointer \\
\hline
\mbox{\texttt{ in}}  & {\em sectors} & try to find specified free space \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
index or free record or -\/1 on error 
\end{DoxyReturn}


Definition at line 1496 of file lifutils.\+c.



Referenced by lif\+\_\+add\+\_\+ascii\+\_\+file\+\_\+as\+\_\+e010(), and lif\+\_\+add\+\_\+lif\+\_\+file().

\mbox{\Hypertarget{lifutils_8c_aca2921d0bba9c706ba27d6a3ae598140}\label{lifutils_8c_aca2921d0bba9c706ba27d6a3ae598140}} 
\index{lifutils.c@{lifutils.c}!lif\_open@{lif\_open}}
\index{lif\_open@{lif\_open}!lifutils.c@{lifutils.c}}
\doxysubsubsection{\texorpdfstring{lif\_open()}{lif\_open()}}
{\footnotesize\ttfamily \mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} \mbox{\hyperlink{posix_8h_aed4dabeb9f7c518ded42f930a04abce8}{F\+I\+LE}}$\ast$ lif\+\_\+open (\begin{DoxyParamCaption}\item[{char $\ast$}]{name,  }\item[{char $\ast$}]{mode }\end{DoxyParamCaption})}



Open a file that must exist Displays message on errors. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em $\ast$name} & file name of L\+IF image \\
\hline
\mbox{\texttt{ in}}  & {\em $\ast$mode} & open mode -\/ see fopen \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
F\+I\+LE $\ast$ pointer 
\end{DoxyReturn}


Definition at line 333 of file lifutils.\+c.



Referenced by lif\+\_\+add\+\_\+ascii\+\_\+file\+\_\+as\+\_\+e010\+\_\+wrapper(), lif\+\_\+create\+\_\+volume(), lif\+\_\+extract\+\_\+e010\+\_\+as\+\_\+ascii(), and lif\+\_\+open\+\_\+volume().

\mbox{\Hypertarget{lifutils_8c_a982b5ca066312fb4912c15a002b0aeed}\label{lifutils_8c_a982b5ca066312fb4912c15a002b0aeed}} 
\index{lifutils.c@{lifutils.c}!lif\_open\_volume@{lif\_open\_volume}}
\index{lif\_open\_volume@{lif\_open\_volume}!lifutils.c@{lifutils.c}}
\doxysubsubsection{\texorpdfstring{lif\_open\_volume()}{lif\_open\_volume()}}
{\footnotesize\ttfamily \mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} \mbox{\hyperlink{structlif__t}{lif\+\_\+t}}$\ast$ lif\+\_\+open\+\_\+volume (\begin{DoxyParamCaption}\item[{char $\ast$}]{name,  }\item[{char $\ast$}]{mode }\end{DoxyParamCaption})}



Open L\+IF directory for reading. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em $\ast$name} & file name of L\+IF image \\
\hline
\mbox{\texttt{ in}}  & {\em $\ast$mode} & \char`\"{}rb\char`\"{} = read, \char`\"{}rb+\char`\"{} = read/write \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
L\+IF pointer on sucesses or N\+U\+LL on error 
\end{DoxyReturn}


Definition at line 1633 of file lifutils.\+c.



Referenced by lif\+\_\+add\+\_\+ascii\+\_\+file\+\_\+as\+\_\+e010(), lif\+\_\+add\+\_\+lif\+\_\+file(), lif\+\_\+del\+\_\+file(), lif\+\_\+dir(), lif\+\_\+extract\+\_\+e010\+\_\+as\+\_\+ascii(), lif\+\_\+extract\+\_\+lif\+\_\+as\+\_\+lif(), and lif\+\_\+rename\+\_\+file().

\mbox{\Hypertarget{lifutils_8c_a43c84ad805d39fe11e9c01ed96d8449f}\label{lifutils_8c_a43c84ad805d39fe11e9c01ed96d8449f}} 
\index{lifutils.c@{lifutils.c}!lif\_read@{lif\_read}}
\index{lif\_read@{lif\_read}!lifutils.c@{lifutils.c}}
\doxysubsubsection{\texorpdfstring{lif\_read()}{lif\_read()}}
{\footnotesize\ttfamily \mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} long lif\+\_\+read (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structlif__t}{lif\+\_\+t}} $\ast$}]{L\+IF,  }\item[{void $\ast$}]{buf,  }\item[{long}]{offset,  }\item[{int}]{bytes }\end{DoxyParamCaption})}



Read data from a L\+IF image Displays message on errors. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em $\ast$\+L\+IF} & \mbox{\hyperlink{structlif__t}{lif\+\_\+t}} structure with file pointers \\
\hline
\mbox{\texttt{ out}}  & {\em $\ast$buf} & read buffer \\
\hline
\mbox{\texttt{ in}}  & {\em offset} & read offset \\
\hline
\mbox{\texttt{ in}}  & {\em bytes} & number of bytes to read \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
bytes read or 0 on error 
\end{DoxyReturn}
Initial file position

Definition at line 390 of file lifutils.\+c.



Referenced by lif\+\_\+add\+\_\+lif\+\_\+file(), lif\+\_\+extract\+\_\+e010\+\_\+as\+\_\+ascii(), lif\+\_\+extract\+\_\+lif\+\_\+as\+\_\+lif(), lif\+\_\+open\+\_\+volume(), and lif\+\_\+readdirindex().

\mbox{\Hypertarget{lifutils_8c_a8d4632c74b663c5565e03fa81f3d13b0}\label{lifutils_8c_a8d4632c74b663c5565e03fa81f3d13b0}} 
\index{lifutils.c@{lifutils.c}!lif\_readdir@{lif\_readdir}}
\index{lif\_readdir@{lif\_readdir}!lifutils.c@{lifutils.c}}
\doxysubsubsection{\texorpdfstring{lif\_readdir()}{lif\_readdir()}}
{\footnotesize\ttfamily \mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} \mbox{\hyperlink{structlifdir__t}{lifdir\+\_\+t}}$\ast$ lif\+\_\+readdir (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structlif__t}{lif\+\_\+t}} $\ast$}]{L\+IF }\end{DoxyParamCaption})}



Read a directory records from L\+IF image advancind directory index. 

\begin{DoxySeeAlso}{See also}
\mbox{\hyperlink{lifutils_8c_a982b5ca066312fb4912c15a002b0aeed}{lif\+\_\+open\+\_\+volume()}} n\+Ote\+: skip all purged L\+IF directory records 
\end{DoxySeeAlso}

\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em $\ast$\+L\+IF} & to L\+IF Volume/\+Diractoy structure \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
directory structure or N\+U\+LL 
\end{DoxyReturn}


Definition at line 1392 of file lifutils.\+c.

\mbox{\Hypertarget{lifutils_8c_ae82f40ed6588c230c0319f202f9484e5}\label{lifutils_8c_ae82f40ed6588c230c0319f202f9484e5}} 
\index{lifutils.c@{lifutils.c}!lif\_readdirindex@{lif\_readdirindex}}
\index{lif\_readdirindex@{lif\_readdirindex}!lifutils.c@{lifutils.c}}
\doxysubsubsection{\texorpdfstring{lif\_readdirindex()}{lif\_readdirindex()}}
{\footnotesize\ttfamily \mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} int lif\+\_\+readdirindex (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structlif__t}{lif\+\_\+t}} $\ast$}]{L\+IF,  }\item[{int}]{index }\end{DoxyParamCaption})}



Read L\+IF directory record number N. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em $\ast$\+L\+IF} & to L\+IF Volume/\+Diractoy structure \\
\hline
\mbox{\texttt{ in}}  & {\em index} & director record number \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
1 on success, 0 if error, bad directory record or outside of directory limits 
\end{DoxyReturn}


Definition at line 1291 of file lifutils.\+c.



Referenced by lif\+\_\+dir(), lif\+\_\+find\+\_\+file(), lif\+\_\+newdir(), lif\+\_\+readdir(), and lif\+\_\+updatefree().

\mbox{\Hypertarget{lifutils_8c_a4f93e888b2ad255e5db96a9840d22d61}\label{lifutils_8c_a4f93e888b2ad255e5db96a9840d22d61}} 
\index{lifutils.c@{lifutils.c}!lif\_rename\_file@{lif\_rename\_file}}
\index{lif\_rename\_file@{lif\_rename\_file}!lifutils.c@{lifutils.c}}
\doxysubsubsection{\texorpdfstring{lif\_rename\_file()}{lif\_rename\_file()}}
{\footnotesize\ttfamily \mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} int lif\+\_\+rename\+\_\+file (\begin{DoxyParamCaption}\item[{char $\ast$}]{lifimagename,  }\item[{char $\ast$}]{oldlifname,  }\item[{char $\ast$}]{newlifname }\end{DoxyParamCaption})}



Rename L\+IF file in L\+IF image. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em lifimagename} & L\+IF image name \\
\hline
\mbox{\texttt{ in}}  & {\em oldlifname} & old L\+IF file name \\
\hline
\mbox{\texttt{ in}}  & {\em newlifname} & new L\+IF file name \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
1 if renamed, 0 if not found, -\/1 error 
\end{DoxyReturn}


Definition at line 2658 of file lifutils.\+c.



Referenced by lif\+\_\+tests().

\mbox{\Hypertarget{lifutils_8c_ab647d79213dc29209066123907ff2f53}\label{lifutils_8c_ab647d79213dc29209066123907ff2f53}} 
\index{lifutils.c@{lifutils.c}!lif\_rewinddir@{lif\_rewinddir}}
\index{lif\_rewinddir@{lif\_rewinddir}!lifutils.c@{lifutils.c}}
\doxysubsubsection{\texorpdfstring{lif\_rewinddir()}{lif\_rewinddir()}}
{\footnotesize\ttfamily \mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} void lif\+\_\+rewinddir (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structlif__t}{lif\+\_\+t}} $\ast$}]{L\+IF }\end{DoxyParamCaption})}



Rewind L\+IF directory Note readdir pre-\/increments the directory pointer index so we start at -\/1. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em $\ast$\+L\+IF} & pointer to L\+IF Volume/\+Directoy structure \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}


Definition at line 1250 of file lifutils.\+c.



Referenced by lif\+\_\+create\+\_\+volume(), and lif\+\_\+updatefree().

\mbox{\Hypertarget{lifutils_8c_a7b21c26a358dc3d0ce1a8fb12400e7b8}\label{lifutils_8c_a7b21c26a358dc3d0ce1a8fb12400e7b8}} 
\index{lifutils.c@{lifutils.c}!lif\_S2B@{lif\_S2B}}
\index{lif\_S2B@{lif\_S2B}!lifutils.c@{lifutils.c}}
\doxysubsubsection{\texorpdfstring{lif\_S2B()}{lif\_S2B()}}
{\footnotesize\ttfamily \mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} void lif\+\_\+\+S2B (\begin{DoxyParamCaption}\item[{uint8\+\_\+t $\ast$}]{B,  }\item[{uint8\+\_\+t $\ast$}]{name,  }\item[{int}]{size }\end{DoxyParamCaption})}



Convert string to L\+IF directory record. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ out}}  & {\em $\ast$B} & L\+IF result with added trailing spaces \\
\hline
\mbox{\texttt{ in}}  & {\em $\ast$name} & string \\
\hline
\mbox{\texttt{ in}}  & {\em size} & max size of B @retrun 1 if the string is ok or 0 if invalid L\+IF name characters on input string \\
\hline
\end{DoxyParams}


Definition at line 515 of file lifutils.\+c.



Referenced by lif\+\_\+dir2str(), and lif\+\_\+vol2str().

\mbox{\Hypertarget{lifutils_8c_ada97dce18d20d7432911f1232fa5876c}\label{lifutils_8c_ada97dce18d20d7432911f1232fa5876c}} 
\index{lifutils.c@{lifutils.c}!lif\_seek\_msg@{lif\_seek\_msg}}
\index{lif\_seek\_msg@{lif\_seek\_msg}!lifutils.c@{lifutils.c}}
\doxysubsubsection{\texorpdfstring{lif\_seek\_msg()}{lif\_seek\_msg()}}
{\footnotesize\ttfamily \mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} int lif\+\_\+seek\+\_\+msg (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{posix_8h_aed4dabeb9f7c518ded42f930a04abce8}{F\+I\+LE}} $\ast$}]{fp,  }\item[{long}]{offset,  }\item[{char $\ast$}]{msg }\end{DoxyParamCaption})}

Displays message on errors 
\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em $\ast$fp} & F\+I\+LE pointer \\
\hline
\mbox{\texttt{ in}}  & {\em offset} & file offset \\
\hline
\mbox{\texttt{ in}}  & {\em mesg} & user string as part of error message \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
1 on success, 0 on error 
\end{DoxyReturn}


Definition at line 368 of file lifutils.\+c.



Referenced by lif\+\_\+read(), and lif\+\_\+write().

\mbox{\Hypertarget{lifutils_8c_a67f1ed1dfac85f6dff9a3851c9b4f79b}\label{lifutils_8c_a67f1ed1dfac85f6dff9a3851c9b4f79b}} 
\index{lifutils.c@{lifutils.c}!lif\_stat@{lif\_stat}}
\index{lif\_stat@{lif\_stat}!lifutils.c@{lifutils.c}}
\doxysubsubsection{\texorpdfstring{lif\_stat()}{lif\_stat()}}
{\footnotesize\ttfamily \mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} \mbox{\hyperlink{defines_8h_aebb3d0e746d3aa086e0baa48ad66b964}{stat\+\_\+t}}$\ast$ lif\+\_\+stat (\begin{DoxyParamCaption}\item[{char $\ast$}]{name,  }\item[{\mbox{\hyperlink{defines_8h_aebb3d0e746d3aa086e0baa48ad66b964}{stat\+\_\+t}} $\ast$}]{p }\end{DoxyParamCaption})}



Stat a file Displays message on errors. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em $\ast$name} & file name of L\+IF image \\
\hline
\mbox{\texttt{ in}}  & {\em $\ast$p} & start\+\_\+t structure pointer for result \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
N\+U\+LL on error or copy of p 
\end{DoxyReturn}


Definition at line 351 of file lifutils.\+c.



Referenced by lif\+\_\+add\+\_\+ascii\+\_\+file\+\_\+as\+\_\+e010(), and lif\+\_\+open\+\_\+volume().

\mbox{\Hypertarget{lifutils_8c_a96cf5cb4698643c717d21305bacb9f0a}\label{lifutils_8c_a96cf5cb4698643c717d21305bacb9f0a}} 
\index{lifutils.c@{lifutils.c}!lif\_str2dir@{lif\_str2dir}}
\index{lif\_str2dir@{lif\_str2dir}!lifutils.c@{lifutils.c}}
\doxysubsubsection{\texorpdfstring{lif\_str2dir()}{lif\_str2dir()}}
{\footnotesize\ttfamily \mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} void lif\+\_\+str2dir (\begin{DoxyParamCaption}\item[{uint8\+\_\+t $\ast$}]{B,  }\item[{\mbox{\hyperlink{structlif__t}{lif\+\_\+t}} $\ast$}]{L\+IF }\end{DoxyParamCaption})}



Convert byte vector into byte vector. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em B} & byte vector to extract data from \\
\hline
\mbox{\texttt{ out}}  & {\em L\+IF} & \mbox{\hyperlink{structlifdir__t}{lifdir\+\_\+t}} structure pointer \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}


Definition at line 638 of file lifutils.\+c.



Referenced by lif\+\_\+readdirindex(), and td0\+\_\+save\+\_\+lif\+\_\+sector().

\mbox{\Hypertarget{lifutils_8c_a309f4e78392fd508f4b2966989f0fe11}\label{lifutils_8c_a309f4e78392fd508f4b2966989f0fe11}} 
\index{lifutils.c@{lifutils.c}!lif\_str2vol@{lif\_str2vol}}
\index{lif\_str2vol@{lif\_str2vol}!lifutils.c@{lifutils.c}}
\doxysubsubsection{\texorpdfstring{lif\_str2vol()}{lif\_str2vol()}}
{\footnotesize\ttfamily \mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} void lif\+\_\+str2vol (\begin{DoxyParamCaption}\item[{uint8\+\_\+t $\ast$}]{B,  }\item[{\mbox{\hyperlink{structlif__t}{lif\+\_\+t}} $\ast$}]{L\+IF }\end{DoxyParamCaption})}



Convert byte vector into L\+IF volume records. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em B} & byte vector \\
\hline
\mbox{\texttt{ out}}  & {\em $\ast$\+L\+IF} & L\+IF image structure \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}


Definition at line 597 of file lifutils.\+c.



Referenced by lif\+\_\+open\+\_\+volume(), and td0\+\_\+save\+\_\+lif\+\_\+sector().

\mbox{\Hypertarget{lifutils_8c_a70f1b6002e409f2b950feb435ef047c1}\label{lifutils_8c_a70f1b6002e409f2b950feb435ef047c1}} 
\index{lifutils.c@{lifutils.c}!lif\_stralloc@{lif\_stralloc}}
\index{lif\_stralloc@{lif\_stralloc}!lifutils.c@{lifutils.c}}
\doxysubsubsection{\texorpdfstring{lif\_stralloc()}{lif\_stralloc()}}
{\footnotesize\ttfamily \mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} char$\ast$ lif\+\_\+stralloc (\begin{DoxyParamCaption}\item[{char $\ast$}]{str }\end{DoxyParamCaption})}



Allocate and copy a string Displays message on errors. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em str} & String to allocate and copy \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
pointer to allocated memory with string copy 
\end{DoxyReturn}


Definition at line 316 of file lifutils.\+c.



Referenced by lif\+\_\+create\+\_\+volume(), lif\+\_\+open\+\_\+volume(), td02lif(), and td0\+\_\+open().

\mbox{\Hypertarget{lifutils_8c_ae76ffe84d6e9758fbc6b3c1959a0b91f}\label{lifutils_8c_ae76ffe84d6e9758fbc6b3c1959a0b91f}} 
\index{lifutils.c@{lifutils.c}!lif\_tests@{lif\_tests}}
\index{lif\_tests@{lif\_tests}!lifutils.c@{lifutils.c}}
\doxysubsubsection{\texorpdfstring{lif\_tests()}{lif\_tests()}}
{\footnotesize\ttfamily \mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} int lif\+\_\+tests (\begin{DoxyParamCaption}\item[{int}]{argc,  }\item[{char $\ast$}]{argv\mbox{[}$\,$\mbox{]} }\end{DoxyParamCaption})}



L\+IF user tests. 

\begin{DoxyReturn}{Returns}
1 matched token, 0 if not 
\end{DoxyReturn}
format L\+IF image

format L\+IF image

Definition at line 139 of file lifutils.\+c.



Referenced by user\+\_\+task().

\mbox{\Hypertarget{lifutils_8c_aa91627c2cb74e13d291b623dccf24fff}\label{lifutils_8c_aa91627c2cb74e13d291b623dccf24fff}} 
\index{lifutils.c@{lifutils.c}!lif\_time2lifbcd@{lif\_time2lifbcd}}
\index{lif\_time2lifbcd@{lif\_time2lifbcd}!lifutils.c@{lifutils.c}}
\doxysubsubsection{\texorpdfstring{lif\_time2lifbcd()}{lif\_time2lifbcd()}}
{\footnotesize\ttfamily \mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} void lif\+\_\+time2lifbcd (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{time_8h_a3346b04b0420b32ccf6b706551b70762}{time\+\_\+t}}}]{t,  }\item[{uint8\+\_\+t $\ast$}]{bcd }\end{DoxyParamCaption})}



U\+N\+IX time to L\+IF B\+CD time format The B\+CD year is only the lower 2 digits of the year So We assume that values $<$= 70 are years $>$= 2000 B\+CD Day and Month start at 1 Note\+: If t == 0 we set A\+LL B\+CD digits to 0. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em t} & U\+N\+IX time\+\_\+t time value \\
\hline
\mbox{\texttt{ out}}  & {\em $\ast$bcd} & pcked 6 byte B\+CD L\+IF time YY MM DD HH MM SS \\
\hline
\end{DoxyParams}
\begin{DoxySeeAlso}{See also}
\mbox{\hyperlink{time_8c_a32b1cbd925752f0cd61d202bbe204a69}{time()}} in \mbox{\hyperlink{time_8c}{time.\+c}} 
\end{DoxySeeAlso}
\begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}


Definition at line 683 of file lifutils.\+c.



Referenced by lif\+\_\+add\+\_\+ascii\+\_\+file\+\_\+as\+\_\+e010(), and lif\+\_\+create\+\_\+volume().

\mbox{\Hypertarget{lifutils_8c_aedfa0156b71f7b94060d74212acdf5c3}\label{lifutils_8c_aedfa0156b71f7b94060d74212acdf5c3}} 
\index{lifutils.c@{lifutils.c}!lif\_updatefree@{lif\_updatefree}}
\index{lif\_updatefree@{lif\_updatefree}!lifutils.c@{lifutils.c}}
\doxysubsubsection{\texorpdfstring{lif\_updatefree()}{lif\_updatefree()}}
{\footnotesize\ttfamily \mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} \mbox{\hyperlink{structlif__t}{lif\+\_\+t}}$\ast$ lif\+\_\+updatefree (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structlif__t}{lif\+\_\+t}} $\ast$}]{L\+IF }\end{DoxyParamCaption})}



Update free space @parameter\mbox{[}in\mbox{]} $\ast$\+L\+IF\+: L\+IF structure. 

\begin{DoxyReturn}{Returns}
\+: L\+IF or N\+U\+LL on error 
\end{DoxyReturn}
Update free

Definition at line 1419 of file lifutils.\+c.



Referenced by lif\+\_\+create\+\_\+volume(), lif\+\_\+del\+\_\+file(), lif\+\_\+newdir(), and lif\+\_\+open\+\_\+volume().

\mbox{\Hypertarget{lifutils_8c_a1f62ff0f9d7b16de4c717e9ff5440547}\label{lifutils_8c_a1f62ff0f9d7b16de4c717e9ff5440547}} 
\index{lifutils.c@{lifutils.c}!lif\_vol2str@{lif\_vol2str}}
\index{lif\_vol2str@{lif\_vol2str}!lifutils.c@{lifutils.c}}
\doxysubsubsection{\texorpdfstring{lif\_vol2str()}{lif\_vol2str()}}
{\footnotesize\ttfamily \mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} void lif\+\_\+vol2str (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structlif__t}{lif\+\_\+t}} $\ast$}]{L\+IF,  }\item[{uint8\+\_\+t $\ast$}]{B }\end{DoxyParamCaption})}



Convert L\+IF volume records into byte vector. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em $\ast$\+L\+IF} & L\+IF image structure \\
\hline
\mbox{\texttt{ out}}  & {\em B} & byte vector to pack data into \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}


Definition at line 575 of file lifutils.\+c.



Referenced by lif\+\_\+create\+\_\+volume().

\mbox{\Hypertarget{lifutils_8c_a864d8cda56e135d05c681dbd896f24dc}\label{lifutils_8c_a864d8cda56e135d05c681dbd896f24dc}} 
\index{lifutils.c@{lifutils.c}!lif\_vol\_clear@{lif\_vol\_clear}}
\index{lif\_vol\_clear@{lif\_vol\_clear}!lifutils.c@{lifutils.c}}
\doxysubsubsection{\texorpdfstring{lif\_vol\_clear()}{lif\_vol\_clear()}}
{\footnotesize\ttfamily \mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} void lif\+\_\+vol\+\_\+clear (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structlif__t}{lif\+\_\+t}} $\ast$}]{L\+IF }\end{DoxyParamCaption})}



Clear V\+OL part of L\+IF structure. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em $\ast$\+L\+IF} & pointer to L\+IF structure \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}


Definition at line 815 of file lifutils.\+c.



Referenced by lif\+\_\+close\+\_\+volume().

\mbox{\Hypertarget{lifutils_8c_a51651de65cdba6cf543b498e770e2971}\label{lifutils_8c_a51651de65cdba6cf543b498e770e2971}} 
\index{lifutils.c@{lifutils.c}!lif\_write@{lif\_write}}
\index{lif\_write@{lif\_write}!lifutils.c@{lifutils.c}}
\doxysubsubsection{\texorpdfstring{lif\_write()}{lif\_write()}}
{\footnotesize\ttfamily \mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} int lif\+\_\+write (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structlif__t}{lif\+\_\+t}} $\ast$}]{L\+IF,  }\item[{void $\ast$}]{buf,  }\item[{long}]{offset,  }\item[{int}]{bytes }\end{DoxyParamCaption})}



Write data to an L\+IF image Displays message on errors. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em $\ast$\+L\+IF} & \mbox{\hyperlink{structlif__t}{lif\+\_\+t}} structure with file pointers \\
\hline
\mbox{\texttt{ in}}  & {\em $\ast$buf} & write buffer \\
\hline
\mbox{\texttt{ in}}  & {\em offset} & write offset \\
\hline
\mbox{\texttt{ in}}  & {\em bytes} & number of bytes to write \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
bytes read or 0 on error 
\end{DoxyReturn}
Initial file position

Definition at line 418 of file lifutils.\+c.



Referenced by lif\+\_\+add\+\_\+ascii\+\_\+file\+\_\+as\+\_\+e010\+\_\+wrapper(), lif\+\_\+add\+\_\+lif\+\_\+file(), lif\+\_\+create\+\_\+volume(), lif\+\_\+extract\+\_\+lif\+\_\+as\+\_\+lif(), and lif\+\_\+writedirindex().

\mbox{\Hypertarget{lifutils_8c_ada21b62e03559daceb095165769ba76d}\label{lifutils_8c_ada21b62e03559daceb095165769ba76d}} 
\index{lifutils.c@{lifutils.c}!lif\_writedirEOF@{lif\_writedirEOF}}
\index{lif\_writedirEOF@{lif\_writedirEOF}!lifutils.c@{lifutils.c}}
\doxysubsubsection{\texorpdfstring{lif\_writedirEOF()}{lif\_writedirEOF()}}
{\footnotesize\ttfamily \mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} int lif\+\_\+writedir\+E\+OF (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structlif__t}{lif\+\_\+t}} $\ast$}]{L\+IF,  }\item[{int}]{index }\end{DoxyParamCaption})}



Write L\+IF drectory E\+OF. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em $\ast$\+L\+IF} & L\+IF Volume/\+Diractoy structure \\
\hline
\mbox{\texttt{ in}}  & {\em index} & director record number \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
1 on success, 0 on error and outsize directory limits 
\end{DoxyReturn}


Definition at line 1376 of file lifutils.\+c.



Referenced by lif\+\_\+extract\+\_\+lif\+\_\+as\+\_\+lif(), lif\+\_\+newdir(), and lif\+\_\+updatefree().

\mbox{\Hypertarget{lifutils_8c_a9ea3982f8710265ac6eea14c6ea24b94}\label{lifutils_8c_a9ea3982f8710265ac6eea14c6ea24b94}} 
\index{lifutils.c@{lifutils.c}!lif\_writedirindex@{lif\_writedirindex}}
\index{lif\_writedirindex@{lif\_writedirindex}!lifutils.c@{lifutils.c}}
\doxysubsubsection{\texorpdfstring{lif\_writedirindex()}{lif\_writedirindex()}}
{\footnotesize\ttfamily \mbox{\hyperlink{mmc__hal_8h_ad0fe97585b8891f5e4f2b9a6426330a4}{M\+E\+M\+S\+P\+A\+CE}} int lif\+\_\+writedirindex (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structlif__t}{lif\+\_\+t}} $\ast$}]{L\+IF,  }\item[{int}]{index }\end{DoxyParamCaption})}



Write L\+IF drectory record number N. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em $\ast$\+L\+IF} & L\+IF Volume/\+Diractoy structure \\
\hline
\mbox{\texttt{ in}}  & {\em index} & director record number \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
1 on success, 0 if error, bad directory record or outside of directory limits 
\end{DoxyReturn}


Definition at line 1338 of file lifutils.\+c.



Referenced by lif\+\_\+add\+\_\+ascii\+\_\+file\+\_\+as\+\_\+e010(), lif\+\_\+add\+\_\+lif\+\_\+file(), lif\+\_\+del\+\_\+file(), lif\+\_\+extract\+\_\+lif\+\_\+as\+\_\+lif(), lif\+\_\+newdir(), lif\+\_\+rename\+\_\+file(), and lif\+\_\+writedir\+E\+O\+F().



\doxysubsection{Variable Documentation}
\mbox{\Hypertarget{lifutils_8c_af219299ebad47daa6631415a8b41345a}\label{lifutils_8c_af219299ebad47daa6631415a8b41345a}} 
\index{lifutils.c@{lifutils.c}!debuglevel@{debuglevel}}
\index{debuglevel@{debuglevel}!lifutils.c@{lifutils.c}}
\doxysubsubsection{\texorpdfstring{debuglevel}{debuglevel}}
{\footnotesize\ttfamily int debuglevel}



Debug flag -\/ used to log G\+P\+IB and emulator messages. 



Definition at line 33 of file gpib\+\_\+task.\+c.



Referenced by lif\+\_\+add\+\_\+ascii\+\_\+file\+\_\+as\+\_\+e010(), lif\+\_\+add\+\_\+lif\+\_\+file(), lif\+\_\+ascii\+\_\+string\+\_\+to\+\_\+e010(), lif\+\_\+check\+\_\+dir(), lif\+\_\+check\+\_\+volume(), lif\+\_\+checkdirindex(), lif\+\_\+create\+\_\+volume(), lif\+\_\+del\+\_\+file(), lif\+\_\+dir(), lif\+\_\+e010\+\_\+pad\+\_\+sector(), lif\+\_\+find\+\_\+file(), lif\+\_\+newdir(), lif\+\_\+open\+\_\+volume(), lif\+\_\+read(), lif\+\_\+readdirindex(), lif\+\_\+tests(), lif\+\_\+updatefree(), lif\+\_\+write(), and lif\+\_\+writedirindex().

\mbox{\Hypertarget{lifutils_8c_a6edb848661be578eca78845085870674}\label{lifutils_8c_a6edb848661be578eca78845085870674}} 
\index{lifutils.c@{lifutils.c}!hpdir@{hpdir}}
\index{hpdir@{hpdir}!lifutils.c@{lifutils.c}}
\doxysubsubsection{\texorpdfstring{hpdir}{hpdir}}
{\footnotesize\ttfamily \mbox{\hyperlink{structhpdir__t}{hpdir\+\_\+t}} hpdir}



hpdir.\+ini file processing 



Definition at line 48 of file drives.\+c.



Referenced by hpdir\+\_\+find\+\_\+drive(), hpdir\+\_\+init(), hpdir\+\_\+set\+\_\+device(), lif\+\_\+tests(), and mount().

